(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{640:function(t,e,r){"use strict";r.r(e);var p=r(2),a=Object(p.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[t._v("「这是我参与2022首次更文挑战的第3天，活动详情查看："),r("a",{attrs:{href:"https://juejin.cn/post/7052884569032392740",target:"_blank",rel:"noopener noreferrer"}},[t._v("2022首次更文挑战"),r("OutboundLink")],1),t._v("」")]),t._v(" "),r("p",[t._v("主体通译自 "),r("a",{attrs:{href:"https://www.preethikasireddy.com/post/the-architecture-of-a-web-3-0-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("the-architecture-of-a-web-3-0-application"),r("OutboundLink")],1)]),r("hr"),r("p"),t._v(" "),r("p",[t._v("看过前 2 篇文章，本瓜相信你对 Web3.0、DApp 已经有了一个基本的认识。")]),t._v(" "),r("p",[t._v("传送门：")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://juejin.cn/post/7054564495808528398",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web3.0 会长什么样？先导篇"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://juejin.cn/post/7054760242415927327",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web3.0 DApp 会是网页开发的下一个未来吗？"),r("OutboundLink")],1)])]),t._v(" "),r("p",[t._v("本篇带来 DApp 设计架构浅析~")]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("先来回顾下 Web2.0 应用程序架构，一图胜千言：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a51a4a22edf143e7973f5ce68bad2ad9~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("图示是对大多数 Web 2.0 应用程序如何工作的一个很好的抽象总结。以一个博客平台为例：")]),t._v(" "),r("p",[r("strong",[t._v("首先")]),t._v("，必须有一个地方来存储基本数据，也就是数据库；")]),t._v(" "),r("p",[r("strong",[t._v("其次")]),t._v("，要有后端代码（用 Node.js、Java 或 Python 等语言编写），用于定义业务逻辑；")]),t._v(" "),r("p",[r("strong",[t._v("第三")]),t._v("，还要有前端代码（通常用 JavaScript、HTML 和 CSS 编写），用于实现 UI 和交互；")]),t._v(" "),r("p",[t._v("这些代码都托管在集中式服务器上。")]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("视角来到 Web3.0 ，消除了中心化，没有集中式的数据库，没有存放后端代码的集中式 Web 服务器。采用了区块链技术，在互联网上的匿名节点维护的分布式 "),r("strong",[t._v("状态机")]),t._v(" 上构建应用程序。")]),t._v(" "),r("p",[t._v("“状态机”是指一台机器，它维护一些给定的程序状态、以及该机器上允许的未来状态，它具有非常严格的规则（即共识）来定义状态如何转换。")]),t._v(" "),r("p",[t._v("没有一个实体可以控制这个分布式的状态机 —— 它由网络中的每个人共同维护。")]),t._v(" "),r("p",[t._v("后端逻辑代码化身成状态机上的“智能合约”，这是开源的。")]),t._v(" "),r("p",[t._v("前端部分呢？暂按下不表，先看此时数据库、后端代码演变后的架构图：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a1ee8f668284831989e631ddc8e4ca7~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("再进一步看看这些新颖的概念：")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("ethereum blockchain，以太坊区块链，被认为是“世界计算器”，一个可全局访问的状态机，对等节点网络维护，状态的更改遵循共识规则的约束；只要是写入了数据，就会被记录，数据不能再更新回去；")])]),t._v(" "),r("li",[r("p",[t._v("智能合约：以太坊上运行的程序，由高级编程语言编写，例如 Solidity 或 Vyper；")])])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5c6b4ad75904017b6dd6e3296b8a23a~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("任何人都能检查智能合约是否合理；")]),t._v(" "),r("ul",[r("li",[t._v("EVM 虚拟机，用于执行合约的环境，相当于执行引擎；")])]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("OK，视野来到了前端代码部分。按道理将，前端代码应该也是用智能合约的方式实现，实际上，它也确实如此，不过要更为复杂一点。")]),t._v(" "),r("p",[t._v("当我们想要与区块链上的数据和代码进行交互时，我们需要与这些节点中的一个进行交互。任何节点都可以广播在 EVM 上执行交易的请求，然后矿工将执行交易并将结果状态更改传播到网络的其余部分。")]),t._v(" "),r("p",[t._v("广播新交易有两种方式：")]),t._v(" "),r("ol",[r("li",[t._v("设置自己运行以太坊区块链软件的节点；")]),t._v(" "),r("li",[t._v("使用"),r("a",{attrs:{href:"https://infura.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Infura"),r("OutboundLink")],1),t._v("、 "),r("a",{attrs:{href:"https://www.alchemy.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alchemy"),r("OutboundLink")],1),t._v("和"),r("a",{attrs:{href:"https://www.quicknode.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Quicknode"),r("OutboundLink")],1),t._v("等第三方服务提供的节点；")])]),t._v(" "),r("p",[t._v("借助第三方节点可能会更轻松一点，它的逻辑是这样的：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bf03af7821e4f3eb2457c8838758e48~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("每个以太坊客户端（即提供者）都实现了 JSON-RPC 规范。这确保了当前端应用程序想要与区块链交互时，有一组统一的方法。JSON-RPC 是一种无状态、轻量级的远程过程调用 (RPC) 协议，定义了多个数据结构及其处理规则。它与传输无关，可以通过多种方式传输，比如 HTTP、套接字、其它传输环境，JSON (RFC 4627) 作为一种数据格式。")]),t._v(" "),r("p",[t._v("还有一个很重要的东西，进行身份验证，鉴权。通常借助 "),r("a",{attrs:{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Metamask"),r("OutboundLink")],1),t._v(" 实现；")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/48f9d332290147a4a509db3a05507b46~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("Metamask 将用户的私钥存储在浏览器中，每当前端需要用户签署交易时，它就会调用 Metamask。")]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("将所有内容都存储在区块链上是很昂贵的，更新数据都需要收费，所以还有一个 "),r("strong",[t._v("去中心化的链下存储解决方案")]),t._v(" —— "),r("a",{attrs:{href:"https://ipfs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPFS"),r("OutboundLink")],1),t._v("/"),r("a",{attrs:{href:"https://www.ethswarm.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swarm"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("架构图如下：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab0f498345f9424381f5c24ac6a0c68e~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("IPFS/Swarm 是用于存储和访问数据的分布式文件系统，你可以轻松去检验它。")]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("到目前为止，我们已经讨论了如何写入，那如何读取数据呢？")]),t._v(" "),r("p",[t._v("答案是借助 "),r("a",{attrs:{href:"https://thegraph.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Graph"),r("OutboundLink")],1),t._v("，The Graph 是一种链下索引解决方案，可以更轻松地查询以太坊区块链上的数据。前端工程师可以直接调用，这比传统的 REST API 更具有吸引力。")]),t._v(" "),r("p",[t._v("现在，Dapp 架构如下：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a32bd513b2ad4000af000cdf729690fb~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("截至目前，架构图已初成雏形。")]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("引申补充，完整的实现上图这一架构，成本有点高昂。所以，有一种流行的扩展方案 —— L2 scaling 解决方案")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65db1150033642f9911769ae4c8cee94~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("在侧链操作，然后提交到主链。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/89af5f0137a843cfb64d0cd572e868f3~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),r("p",[t._v("这样既节约成本，又能达到目的，真是大聪明。")]),t._v(" "),r("p",[t._v("本瓜就把这个侧链执行，理解为代码的预编译吧，编译后再放到浏览器引擎上做真正的编译执行。")]),t._v(" "),r("ul",[r("li",[t._v("附：以上框架的开发工具是 "),r("a",{attrs:{href:"https://hardhat.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hardhat"),r("OutboundLink")],1),t._v("，有兴趣自行了解")])]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("本篇就是完整的“浅析 Web3.0 DApp（去中心化应用程序）设计架构”。")]),t._v(" "),r("p",[t._v("以上！作为入门级架构浅析，说的真的很通透了！三连了！👍👍👍")]),t._v(" "),r("p",[t._v("期待 Web 3.0 DApp 的开发~~ 欢迎留言评论。")]),t._v(" "),r("blockquote",[r("p",[t._v("我是掘金安东尼，输出暴露输入，技术洞见生活。")])])])}),[],!1,null,null,null);e.default=a.exports}}]);