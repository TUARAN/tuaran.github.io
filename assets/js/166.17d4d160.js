(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{662:function(a,s,e){"use strict";e.r(s);var n=e(2),t=Object(n.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("「这是我参与2022首次更文挑战的第22天，活动详情查看："),e("a",{attrs:{href:"https://juejin.cn/post/7052884569032392740",target:"_blank",rel:"noopener noreferrer"}},[a._v("2022首次更文挑战"),e("OutboundLink")],1),a._v("」")]),a._v(" "),e("hr"),a._v(" "),e("p",[a._v("ECMAScript 2022 将于今年 6 月发布，本篇带来 ES2022 "),e("strong",[a._v("肯定")]),a._v("会出现的最重要的 4 个变化！因为这些特性已经进入了 TC39 标准化发布的 "),e("a",{attrs:{href:"https://tc39.es/process-document/",target:"_blank",rel:"noopener noreferrer"}},[a._v("第 4 个阶段"),e("OutboundLink")],1),a._v(" 了。")]),a._v(" "),e("blockquote",[e("p",[a._v("TC39 所属于 Ecma International，是一个由 JavaScript 开发者、实现者、学者等组成的团体，与 JavaScript 社区合作维护和发展 JavaScript 的标准。")])]),a._v(" "),e("p",[a._v("闲言少叙，冲鸭~~")]),a._v(" "),e("h2",{attrs:{id:"at-方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#at-方法"}},[a._v("#")]),a._v(" at() 方法")]),a._v(" "),e("p",[a._v("终于！ES2022 数组新增一个 at() 方法，用于根据索引去取值；")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("var a = [1, 2, 3]; \n\na.at(1) // 2 \n\na.at(-1) // 3\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("我们可以通过 "),e("code",[a._v("a.at(-1)")]),a._v(" 拿到倒数第一项；")]),a._v(" "),e("p",[a._v("而在这之前，拿数组/字符串最后一项是这样的：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("const arr = [1,2,3,4]\narr[arr.length - 2] // 3\narr.slice(-2)[0]    // 3\n\nconst str = \"1234\"\nstr[str.length - 2] // '3'\nstr.slice(-2)[0]    // '3'\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("p",[a._v("虽然这是一个小的功能改动，但是很大的提高了 数组/字符串 核心操作的可读性；")]),a._v(" "),e("h2",{attrs:{id:"error-cause"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-cause"}},[a._v("#")]),a._v(" Error cause")]),a._v(" "),e("p",[a._v("🎉Error cause 是第一个由中国公司（阿里巴巴 TC39 代表 "),e("a",{attrs:{href:"https://github.com/legendecas",target:"_blank",rel:"noopener noreferrer"}},[a._v("legendecas"),e("OutboundLink")],1),a._v("）代表主导推动的 JavaScript 达到 stage 4 的新特性提案！")]),a._v(" "),e("p",[a._v("这个提案简单理解就是：对 Error 的来源进行一次再包装；")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("try {\n  doSomeComputationThatThrowAnError() \n} catch (error) {\n  throw new Error('I am the result of another error', { cause: error })\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("Error Constructor 新增了一个可选的参数 options，其中可以设置 "),e("code",[a._v("cause")]),a._v(" 并且接受任意 JavaScript 值，把这个值赋值到新创建的 "),e("code",[a._v("error.cause")]),a._v(" 上。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("try {\n  return await fetch('//unintelligible-url-a') // 抛出一个 low level 错误\n    .catch(err => {\n      throw new Error('Download raw resource failed', { cause: err }) // 将 low level 错误包装成一个 high level、易懂的错误\n    })\n} catch (err) {\n  console.log(err)\n  console.log('Caused by', err.cause)\n  // Error: Download raw resource failed\n  // Caused by TypeError: Failed to fetch\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br")])]),e("h2",{attrs:{id:"顶层-await"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#顶层-await"}},[a._v("#")]),a._v(" 顶层 await")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/tc39/proposal-top-level-await",target:"_blank",rel:"noopener noreferrer"}},[a._v("顶层 await"),e("OutboundLink")],1),a._v(" 允许开发者在 "),e("code",[a._v("async")]),a._v(" 函数外部使用 "),e("code",[a._v("await")]),a._v(" 字段。")]),a._v(" "),e("p",[a._v("以前：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("await Promise.resolve(console.log('🎉'));\n// → SyntaxError: await is only valid in async function\n\n(async function () {\n  await Promise.resolve(console.log('🎉'));\n  // → 🎉\n})();\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("p",[a._v("ES2022:")]),a._v(" "),e("p",[a._v("顶层 "),e("code",[a._v("await")]),a._v(" 能在模块 "),e("a",{attrs:{href:"https://v8.dev/features/modules",target:"_blank",rel:"noopener noreferrer"}},[a._v("modules"),e("OutboundLink")],1),a._v(" 的顶层正常工作。（在 class 代码块或非 "),e("code",[a._v("async")]),a._v(" 函数仍不支持。）")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("const serviceName = await fetch(\"https://example.com/what-service-should-i-use\")\nconst service = await import(`/services/${serviceName}.js`)\n\n// OR\n\nconst params = new URLSearchParams(location.search);\nconst theme = params.get('theme');\nconst stylingFunctions = await import(`/styling-functions-${theme}.js`);\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("也支持条件导入：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("const date = new Date()\n\nif(date.getFullYear() === 2023) {\n  await require('/special-code-for-2023-year.js')\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[e("a",{attrs:{href:"https://tie.pub/2019/11/top-level-await/",target:"_blank",rel:"noopener noreferrer"}},[a._v("了解更多"),e("OutboundLink")],1)]),a._v(" "),e("h2",{attrs:{id:"私有属性和方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#私有属性和方法"}},[a._v("#")]),a._v(" 私有属性和方法")]),a._v(" "),e("p",[e("strong",[a._v("类")]),a._v(" 的概念虽然在 ES6 就被提出，但是它的开发程度远低于面向对象语言，有些新的特性将加入 JS，比如 —— 私有属性和方法；")]),a._v(" "),e("p",[a._v("它们用 "),e("code",[a._v("#")]),a._v(" 进行标记，在类外部访问时，会报错；")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("class Human {\n  #name = \"John\";\n  \n  setName(name) {\n    this.#name = name;\n  }\n}\n\nconst human = new Human()\nhuman.#name = 'Amy'  // ERROR!\nhuman.setName('Amy') // OK\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("class Human {\n  name = \"John\";\n  \n  constructor(name) {\n    this.#setName('Amy') // OK\n  }\n  \n  #setName(name) {\n    this.name = name;\n  }\n}\n\nconst human = new Human()\nhuman.#setName('Amy') // ERROR!\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br")])]),e("hr"),a._v(" "),e("p",[a._v("OK，以上，便是本篇分享~~ 足够简明扼要吧~~")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9fe30a9be984fd88c1b1ca11014936f~tplv-k3u1fbpfcp-watermark.image?",alt:"a930a5381a110a0d09118ea234439f40.gif"}})]),a._v(" "),e("blockquote",[e("p",[a._v("我是掘金安东尼，输出暴露输入，技术洞见生活，再会~")])])])}),[],!1,null,null,null);s.default=t.exports}}]);