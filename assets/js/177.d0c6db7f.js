(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{676:function(t,s,a){"use strict";a.r(s);var n=a(2),o=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("「这是我参与2022首次更文挑战的第20天，活动详情查看："),a("a",{attrs:{href:"https://juejin.cn/post/7052884569032392740",target:"_blank",rel:"noopener noreferrer"}},[t._v("2022首次更文挑战"),a("OutboundLink")],1),t._v("」")]),t._v(" "),a("hr"),t._v(" "),a("blockquote",[a("p",[t._v("本篇主体译自："),a("a",{attrs:{href:"https://css-tricks.com/what-hooks-mean-for-vue/",target:"_blank",rel:"noopener noreferrer"}},[t._v("what-hooks-mean-for-vue"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("作者："),a("a",{attrs:{href:"https://css-tricks.com/author/sdrasner/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sarah Drasner"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("OS：虽然这是一篇 19 年 4 月的文章，但是对于 Hooks 说的非常清晰，作者也是请到尤大进行了原文的订正，对于了解 Vue Hooks 的设计及发展，还是有很好的阅读性的。")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("本文要谈到的 Hooks，不同于 "),a("a",{attrs:{href:"https://css-tricks.com/intro-to-vue-3-vue-cli-lifecycle-hooks/#article-header-id-1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lifecycle Hooks"),a("OutboundLink")],1),t._v("（生命周期钩子），它是在 v16.7.0-alpha 中引入 React 的；尽管 Hooks 是由 React 提出，但是它的本质是一种重要的代码组合机制，对于整个 JavaScript 的框架系统都大有好处；今天花点时间具体来谈谈："),a("strong",[t._v("Hooks 对于 Vue 意义着什么？")])]),t._v(" "),a("p",[t._v("Hooks 提供了一种更明确的方式来组织代码，使得代码能重用，更重要的是，它允许不同的逻辑部分进行通信、协同工作。")]),t._v(" "),a("h2",{attrs:{id:"问题背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题背景"}},[t._v("#")]),t._v(" 问题背景")]),t._v(" "),a("p",[t._v("Hooks 为什么被提出？就 React 而言，最初的问题背景是这样的：")]),t._v(" "),a("p",[t._v("在表达状态概念时，"),a("strong",[t._v("类")]),t._v(" 是最常见的组织形式。类本身存在一些问题，比如绑定关系冗长、复杂，导致不易读，This 的指向总会让人摸不清头脑；")]),t._v(" "),a("p",[t._v("不仅如此，在重用方面，使用渲染工具或高阶组件类的模式很常见，但这样容易陷入 “"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Pyramid_of_doom_(programming)",target:"_blank",rel:"noopener noreferrer"}},[t._v("pyramid of doom"),a("OutboundLink")],1),t._v("” （末日金字塔），可以将它理解为过度的嵌套关系；")]),t._v(" "),a("p",[t._v("Hooks 就是来解决这些问题的；Hooks 允许我们使用函数调用来定义组件的状态逻辑，这些函数有更强的组合性、重用性；同时，仍然可以进行状态的访问和维护；")]),t._v(" "),a("p",[t._v("示例："),a("a",{attrs:{href:"https://twitter.com/i/status/1056960391543062528",target:"_blank",rel:"noopener noreferrer"}},[t._v("@dan_abramov's code from #ReactConf2018"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("图①")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dfe24f49459644f6a1fa6f848d339a3d~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),a("ul",[a("li",[t._v("图②")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9ddb1f2a0db48f58dc3a2c972d761fe~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),a("p",[t._v("有图①到图②的转变，对组件代码进行了再次组合，然后以函数的的方式进行导出，供外部重用；")]),t._v(" "),a("p",[t._v("在维护方面，Hooks 提供了一种单一的、功能性的方式来处理共享逻辑，并有可能减少代码量。")]),t._v(" "),a("h2",{attrs:{id:"vue-hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-hooks"}},[t._v("#")]),t._v(" Vue Hooks")]),t._v(" "),a("p",[t._v("那 Vue 中为什么要用 Hooks 呢？毕竟 Vue 中没有很频繁的使用类；在 Vue 中我们使用 mixin 来解决组件相同的重用逻辑；")]),t._v(" "),a("p",[t._v("mixin 的问题在哪？Hooks 能解决吗？")]),t._v(" "),a("p",[t._v("问题主要有两点：")]),t._v(" "),a("ol",[a("li",[t._v("mixin 之间不能传递状态；")]),t._v(" "),a("li",[t._v("逻辑来源并没有清晰的说明；")])]),t._v(" "),a("p",[t._v("而这两点，Hooks 能很好地解决；")]),t._v(" "),a("p",[t._v("举个例子：")]),t._v(" "),a("h3",{attrs:{id:"传递状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传递状态"}},[t._v("#")]),t._v(" 传递状态")]),t._v(" "),a("p",[t._v("Hooks1")]),t._v(" "),a("pre",{staticClass:" language-javascript",attrs:{rel:"JavaScript"}},[a("code",{staticClass:" language-javascript"},[a("span",{staticClass:"token keyword"},[t._v("import")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" useData"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" useMounted "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("from")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'vue-hooks'")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("export")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("windowwidth")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n  "),a("span",{staticClass:"token keyword"},[t._v("const")]),t._v(" data "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("useData")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    width"),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("0")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("font"),t._v("\n"),a("font"),t._v("\n  "),a("span",{staticClass:"token function"},[t._v("useMounted")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    data"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("width "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("innerWidth\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("font"),t._v("\n"),a("font"),t._v("\n  "),a("span",{staticClass:"token comment"},[t._v("// this is something we can consume with the other hook")]),t._v("\n  "),a("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),a("font"),t._v("\n    data"),a("font"),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),a("span",{staticClass:"token punctuation"},[t._v("}")])],1)]),t._v(" "),a("ul",[a("li",[t._v("Hooks2")])]),t._v(" "),a("pre",{staticClass:" language-javascript",attrs:{rel:"JavaScript"}},[a("code",{staticClass:" language-javascript"},[a("span",{staticClass:"token comment"},[t._v("// the data comes from the other hook")]),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("export")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("logolettering")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token parameter"},[t._v("data")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n  "),a("span",{staticClass:"token function"},[t._v("useMounted")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token comment"},[t._v("// this is the width that we stored in data from the previous hook")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("data"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("data"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("width "),a("span",{staticClass:"token operator"},[t._v(">")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1200")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n      "),a("span",{staticClass:"token comment"},[t._v("// we can use refs if they are called in the useMounted hook")]),t._v("\n      "),a("span",{staticClass:"token keyword"},[t._v("const")]),t._v(" logoname "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$refs"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("logoname"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n      "),a("span",{staticClass:"token function"},[t._v("Splitting")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" target"),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" logoname"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" by"),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"chars"')]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n      TweenMax"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("staggerFromTo")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v('".char"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("5")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n        "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n          opacity"),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("0")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n          transformOrigin"),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"50% 50% -30px"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n          cycle"),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            color"),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v('"red"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"purple"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"teal"')]),a("span",{staticClass:"token punctuation"},[t._v("]")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n            "),a("span",{staticClass:"token function"},[t._v("rotationY")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token parameter"},[t._v("i")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n              "),a("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" i "),a("span",{staticClass:"token operator"},[t._v("*")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("50")]),t._v("\n            "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n          "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n        "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n        "),a("span",{staticClass:"token operator"},[t._v("...")])],1)]),t._v(" "),a("p",[t._v("两个钩子之间传值：")]),t._v(" "),a("pre",{staticClass:" language-javascript",attrs:{rel:"JavaScript"}},[a("code",{staticClass:" language-javascript"},[a("span",{staticClass:"token operator"},[t._v("<")]),t._v("script"),a("span",{staticClass:"token operator"},[t._v(">")]),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("import")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" logolettering "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("from")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"./../hooks/logolettering.js"')]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("import")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" windowwidth "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("from")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"./../hooks/windowwidth.js"')]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("export")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("default")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n  "),a("span",{staticClass:"token function"},[t._v("hooks")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token function"},[t._v("logolettering")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token function"},[t._v("windowwidth")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),a("span",{staticClass:"token operator"},[t._v("<")]),a("span",{staticClass:"token operator"},[t._v("/")]),t._v("script"),a("span",{staticClass:"token operator"},[t._v(">")])],1)]),t._v(" "),a("p",[t._v("我们可以在整个应用程序中使用 Hooks 组合逻辑；")]),t._v(" "),a("h3",{attrs:{id:"来源清晰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#来源清晰"}},[t._v("#")]),t._v(" 来源清晰")]),t._v(" "),a("p",[t._v("在 src/hooks 文件夹中，创建了一个 Hooks，用于实现：打开对话框查看内容时，暂停页面，并在查看完对话框后，允许再次滚动。")]),t._v(" "),a("p",[t._v("它很有可能在应用程序中被多次使用；")]),t._v(" "),a("pre",{staticClass:" language-javascript",attrs:{rel:"JavaScript"}},[a("code",{staticClass:" language-javascript"},[a("span",{staticClass:"token keyword"},[t._v("import")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" useDestroyed"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" useMounted "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("from")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"vue-hooks"')]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("export")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("preventscroll")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n  "),a("span",{staticClass:"token keyword"},[t._v("const")]),t._v(" "),a("span",{staticClass:"token function-variable function"},[t._v("preventDefault")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token parameter"},[t._v("e")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    e "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" e "),a("span",{staticClass:"token operator"},[t._v("||")]),t._v(" window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("event"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("e"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("preventDefault"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n      e"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("preventDefault")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    e"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("returnValue "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token boolean"},[t._v("false")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("font"),t._v("\n"),a("font"),t._v("\n  "),a("span",{staticClass:"token comment"},[t._v("// keycodes for left, up, right, down")]),t._v("\n  "),a("span",{staticClass:"token keyword"},[t._v("const")]),t._v(" keys "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("37")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("38")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("39")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("40")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n  "),a("span",{staticClass:"token keyword"},[t._v("const")]),t._v(" "),a("span",{staticClass:"token function-variable function"},[t._v("preventDefaultForScrollKeys")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token parameter"},[t._v("e")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("keys"),a("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("e"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("keyCode"),a("span",{staticClass:"token punctuation"},[t._v("]")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n      "),a("span",{staticClass:"token function"},[t._v("preventDefault")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("e"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n      "),a("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" "),a("span",{staticClass:"token boolean"},[t._v("false")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("font"),t._v("\n"),a("font"),t._v("\n  "),a("span",{staticClass:"token function"},[t._v("useMounted")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("addEventListener"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// older FF")]),t._v("\n      window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("addEventListener")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v("'DOMMouseScroll'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" preventDefault"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token boolean"},[t._v("false")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onwheel "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" preventDefault"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// modern standard")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onmousewheel "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" document"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onmousewheel "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" preventDefault"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// older browsers, IE")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("touchmove "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" preventDefault"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// mobile")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("touchstart "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" preventDefault"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// mobile")]),t._v("\n    document"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onkeydown "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" preventDefaultForScrollKeys"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n  "),a("span",{staticClass:"token function"},[t._v("useDestroyed")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("removeEventListener"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n      window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("removeEventListener")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v("'DOMMouseScroll'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" preventDefault"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token boolean"},[t._v("false")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n    "),a("span",{staticClass:"token comment"},[t._v("//firefox")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("addEventListener")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v("'DOMMouseScroll'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token parameter"},[t._v("e")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n      e"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("stopPropagation")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token boolean"},[t._v("true")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),a("font"),t._v("\n"),a("font"),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onmousewheel "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" document"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onmousewheel "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("null")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onwheel "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("null")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("touchmove "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("null")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    window"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("touchstart "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("null")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    document"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("onkeydown "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("null")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" ")],1)]),t._v(" "),a("p",[t._v("在 AppDetails.vue 组件中调用它：")]),t._v(" "),a("pre",{staticClass:" language-javascript",attrs:{rel:"JavaScript"}},[a("code",{staticClass:" language-javascript"},[a("span",{staticClass:"token operator"},[t._v("<")]),t._v("script"),a("span",{staticClass:"token operator"},[t._v(">")]),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("import")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" preventscroll "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("from")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"./../hooks/preventscroll.js"')]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),a("span",{staticClass:"token operator"},[t._v("...")]),a("font"),t._v("\n"),a("font"),t._v("\n"),a("span",{staticClass:"token keyword"},[t._v("export")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("default")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n  "),a("span",{staticClass:"token operator"},[t._v("...")]),t._v("\n  "),a("span",{staticClass:"token function"},[t._v("hooks")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token function"},[t._v("preventscroll")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),a("span",{staticClass:"token operator"},[t._v("<")]),a("span",{staticClass:"token operator"},[t._v("/")]),t._v("script"),a("span",{staticClass:"token operator"},[t._v(">")])],1)]),t._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("ul",[a("li",[t._v("原文小结")])]),t._v(" "),a("p",[t._v("Vue Hooks 已经可以与 Vue 2.x 一起使用，但仍处于试验阶段。我们计划将 Hooks 集成到 Vue 3 中，但是它跟 React Hooks 还是会有所差异；")]),t._v(" "),a("ul",[a("li",[t._v("本瓜小结")])]),t._v(" "),a("p",[t._v("Hooks 已经应用到 Vue3 了，也就是 setup 那一坨，但是它确实有一些不同于 React 的 Hooks 的地方；推荐阅读 "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/133819602",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue3 究竟好在哪里？（和 React Hook 的详细对比）"),a("OutboundLink")],1),t._v("；")]),t._v(" "),a("p",[t._v("其实理解到它的设计意图了，即使不原原本本的挪用框架，自己用 JS 原生，也能整一个类似的复用逻辑吧。把实现一个完整功能的逻辑，封装进一个函数中，就看函数名称，就知道它是干嘛的了，不用知道其内部实现，如果想知道，再到对应的 hooks 里面去找，至少就这一点来说，和函数式编程设计思路是一致的；")]),t._v(" "),a("blockquote",[a("p",[t._v("我是掘金安东尼，输出暴露输入，技术洞见生活，再会~")])])])}),[],!1,null,null,null);s.default=o.exports}}]);