(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{603:function(s,n,a){"use strict";a.r(n);var e=a(2),r=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"楔子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#楔子"}},[s._v("#")]),s._v(" 楔子")]),s._v(" "),a("p",[s._v("在 JavaScript 中，由于 Function 本质也是对象（这与 Haskell 中【函数的本质是值】思路一致），所以我们可以"),a("strong",[s._v("把 Function 作为参数来进行传递")]),s._v("！")]),s._v(" "),a("p",[s._v("例🌰：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('function sayHi() {\n  console.log("Hi");\n}\nfunction sayBye() {\n  console.log("Bye");\n}\n\nfunction greet(type, sayHi, sayBye) {\n    type === 1 ? sayHi() : sayBye()\n}\n\ngreet(1, sayHi, sayBye); // Hi\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("又得讲这个老生常谈的定义："),a("strong",[s._v("如果一个函数“接收函数作为参数”或“返回函数作为输出”，那么这个函数被称作“高阶函数”")]),s._v("；")]),s._v(" "),a("p",[s._v("本篇要谈的是：高阶函数中的 "),a("code",[s._v("map")]),s._v("、"),a("code",[s._v("filter")]),s._v("、"),a("code",[s._v("reduce")]),s._v(" 是【如何实践】的，我愿称之为："),a("strong",[s._v("高阶映射")]),s._v("！！")]),s._v(" "),a("p",[s._v("先别觉得这东西陌生，其实咱们天天都见！！")]),s._v(" "),a("p",[s._v("例🌰：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[1,2,3].map(item => item*2)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[s._v("#")]),s._v(" 实践")]),s._v(" "),a("blockquote",[a("p",[s._v("Talk is cheap. Show me the code.")])]),s._v(" "),a("p",[s._v("以下有 4 组代码，每组的 2 个代码片段"),a("strong",[s._v("实现目标一致，但实现方式有异")]),s._v("，感受感受，你更喜欢哪个？💖")]),s._v(" "),a("p",[a("strong",[s._v("第 1 组：")])]),s._v(" "),a("p",[s._v("1️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const arr1 = [1, 2, 3];\nconst arr2 = [];\nfor(let i = 0; i < arr1.length; i++) {\n  arr2.push(arr1[i] * 2);\n}\nconsole.log(arr2); // [ 2, 4, 6 ]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("2️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const arr1 = [1, 2, 3];\nconst arr2 = arr1.map(item => item * 2);\nconsole.log(arr2);  // [ 2, 4, 6 ]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("第 2 组：")])]),s._v(" "),a("p",[s._v("1️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const birthYear = [1975, 1997, 2002, 1995, 1985];\nconst ages = [];\nfor(let i = 0; i < birthYear.length; i++) {\n  let age = 2018 - birthYear[i];\n  ages.push(age);\n}\nconsole.log(ages); // [ 43, 21, 16, 23, 33 ]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("2️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const birthYear = [1975, 1997, 2002, 1995, 1985];\nconst ages = birthYear.map(year => 2018 - year);\nconsole.log(ages); // [ 43, 21, 16, 23, 33 ]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("第 3 组：")])]),s._v(" "),a("p",[s._v("1️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const persons = [\n  { name: 'Peter', age: 16 },\n  { name: 'Mark', age: 18 },\n  { name: 'John', age: 27 },\n  { name: 'Jane', age: 14 },\n  { name: 'Tony', age: 24},\n];\nconst fullAge = [];\nfor(let i = 0; i < persons.length; i++) {\n  if(persons[i].age >= 18) {\n    fullAge.push(persons[i]);\n  }\n}\nconsole.log(fullAge);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("2️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const persons = [\n  { name: 'Peter', age: 16 },\n  { name: 'Mark', age: 18 },\n  { name: 'John', age: 27 },\n  { name: 'Jane', age: 14 },\n  { name: 'Tony', age: 24},\n];\nconst fullAge = persons.filter(person => person.age >= 18);\nconsole.log(fullAge);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("strong",[s._v("第 4 组：")])]),s._v(" "),a("p",[s._v("1️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const arr = [5, 7, 1, 8, 4];\nlet sum = 0;\nfor(let i = 0; i < arr.length; i++) {\n  sum = sum + arr[i];\n}\nconsole.log(sum); // 25\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("2️⃣")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const arr = [5, 7, 1, 8, 4];\nconst sum = arr.reduce(function(accumulator, currentValue) {\n  return accumulator + currentValue;\n});\nconsole.log(sum); // 25\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("更喜欢哪个？有答案了吗？")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/816c6d415047468f83f9e8389ea02a87~tplv-k3u1fbpfcp-watermark.image",alt:"image.png"}})]),s._v(" "),a("p",[s._v("每组的代码片段 2️⃣ 就是"),a("code",[s._v("map")]),s._v("/"),a("code",[s._v("filter")]),s._v("/"),a("code",[s._v("reduce")]),s._v("高阶函数的应用，没有别的说的，就是更加"),a("strong",[s._v("简洁易读")]),s._v("！")]),s._v(" "),a("h2",{attrs:{id:"手写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手写"}},[s._v("#")]),s._v(" 手写")]),s._v(" "),a("p",[s._v("实际上，"),a("code",[s._v("map")]),s._v("/"),a("code",[s._v("filter")]),s._v("/"),a("code",[s._v("reduce")]),s._v(" 也是基于 for 循环封装来的，所以我们也能自己实现一套相同的 "),a("strong",[s._v("高阶映射")]),s._v(" 🚀；")]),s._v(" "),a("ul",[a("li",[s._v("map1")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Array.prototype.map1 = function(fn) {\n    let newArr = [];\n    for (let i = 0; i < this.length; i++) {\n        newArr.push(fn(this[i]))\n    };\n    return newArr;\n}\n\nconsole.log([1,2,3].map1(item => item*2)) // [2,4,6]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("filter1")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Array.prototype.filter1 = function (fn) {\n  let newArr=[];\n  for(let i=0;i<this.length;i++){\n      fn(this[i]) && newArr.push(this[i]);\n  }\n  return newArr;\n};\n\nconsole.log([1,2,3].filter1(item => item>2)) // [3]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("reduce1")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Array.prototype.reduce1 = function (reducer,initVal) {\n    for(let i=0;i<this.length;i++){\n        initVal =reducer(initVal,this[i],i,this);\n    }\n    return initVal\n};\n\nconsole.log([1,2,3].reduce1((a,b)=>a+b,0)) // 6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("如果你不想直接挂在原型链上🛸：")]),s._v(" "),a("ul",[a("li",[s._v("mapForEach")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function mapForEach(arr, fn) {\n  const newArray = [];\n  for(let i = 0; i < arr.length; i++) {\n    newArray.push(\n      fn(arr[i])\n    );\n  }\n  return newArray;\n}\n\nmapForEach([1,2,3],item=>item*2) // [2,4,6]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("filterForEach")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function filterForEach(arr, fn) {\n  const newArray = [];\n  for(let i = 0; i < arr.length; i++) {\n     fn(arr[i]) && newArray.push(arr[i]);\n  }\n  return newArray;\n}\n\nfilterForEach([1,2,3],item=>item>2) // [3]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("reduceForEach")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function reduceForEach(arr,reducer,initVal) {\n  const newArray = [];\n  for(let i = 0; i < arr.length; i++) {\n      initVal =reducer(initVal,arr[i],i,arr);\n  }\n  return initVal;\n}\n\nreduceForEach([1,2,3],(a,b)=>a+b,0) // 6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("这里本瓜有个小疑惑，在 ES6 之前，有没有一个库做过这样的封装❓")]),s._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),a("p",[s._v("本篇虽基础，但"),a("strong",[s._v("很重要")]),s._v("！")]),s._v(" "),a("p",[s._v("对一些惯用写法的审视、改变，会产生一些奇妙的思路~ 稀松平常的 "),a("code",[s._v("map")]),s._v(" 映射能做的比想象中的要多得多！")]),s._v(" "),a("p",[a("code",[s._v("for")]),s._v(" 循环遍历只是操作性的手段，不是目的！而封装过后的 "),a("code",[s._v("map")]),s._v(" 映射有了"),a("strong",[s._v("更易读")]),s._v("的意义，映射关系（输入、输出）也是函数式编程之核心！")]),s._v(" "),a("p",[s._v("YY一下：既然 "),a("code",[s._v("map")]),s._v(" 这类函数都是从 for 循环封装来的，如果你能封装一个基于 for 循环的另一种特别实用的高阶映射或者其它高阶函数，是不是意味着：有朝一日有可能被纳入 JS 版本标准 API 中？🐶🐶🐶")]),s._v(" "),a("p",[s._v("或许：先意识到我们每天都在使用的高阶函数，刻意的去使用、训练，然后能举一反三，才能做上面的想象吧~~~")]),s._v(" "),a("p",[s._v("以上。")]),s._v(" "),a("p",[s._v("您的点赞、评论、关注是本瓜最大的鼓励 O(∩_∩)O👍👍👍")]),s._v(" "),a("blockquote",[a("p",[s._v("我是掘金安东尼，公众号同名，输出暴露输入，技术洞见生活，再会~")])])])}),[],!1,null,null,null);n.default=r.exports}}]);