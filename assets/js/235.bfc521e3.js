(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{737:function(e,t,s){"use strict";s.r(t);var n=s(2),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("携手创作，共同成长！这是我参与「掘金日新计划 · 8 月更文挑战」的第12天，"),s("a",{attrs:{href:"https://juejin.cn/post/7123120819437322247",title:"https://juejin.cn/post/7123120819437322247",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击查看活动详情"),s("OutboundLink")],1)]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("新系列《这些前端新技术你很难再忽视了》，包括：SolidJS、Svelte、Tauri、Bun、Schema等。每一个都引领前端技术演变趋势，很有必要了解。")]),e._v(" "),s("p",[e._v("本篇带来 —— JSON Schema")]),e._v(" "),s("p",[e._v("闲话少说，冲了~")]),e._v(" "),s("ul",[s("li",[e._v("点赞收藏关注，今晚一夜暴富 👍👍👍")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b18fbe2526b4a06acc6b5e8105c5773~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),s("blockquote",[s("p",[e._v("什么是 JSON Schema？")])]),e._v(" "),s("blockquote",[s("p",[e._v("答：一言以蔽之：JSON Schema 之于 JSON ，就像 TypeScript 之于 JavaScript")])]),e._v(" "),s("p",[e._v("我们知道，JSON 作为主要的前后端交互格式，已经称霸多年了，json 的本质就是对象，它足够轻量、简单、易读，但是它也存在它的问题。")]),e._v(" "),s("p",[e._v("即："),s("strong",[e._v("没有格式校验")])]),e._v(" "),s("p",[e._v("比方说：一段 JSON 代码如下")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n    number:10,\n    street_name:"唐宁街",\n    street_type:"Avenue"\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[e._v("尽管这段 json 对开发的人来说简单明了，我们很容易就知道它是表示一个街道信息的对象，但仍然存在一些问题，比如：")]),e._v(" "),s("ul",[s("li",[e._v("number 可以是字符串吗？有最大值、最小值的限制吗？")]),e._v(" "),s("li",[e._v("street_name 可以是是数字吗？字符长度有限制吗？")]),e._v(" "),s("li",[e._v("street_type 可以是任意值？还是有哪些固定可选项可供选择？")])]),e._v(" "),s("p",[e._v("好了，JSON Schema 可以解决这一点。")]),e._v(" "),s("p",[e._v("JSON Scheme 表示如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n        "$schema": "http://json-schema.org/schema#",\n        "$id": "http://yourdomain.com/schemas/myschema.json",\n        "title": "Street",\n        "description": "it is a Street object",\n\t"type": "object",\n\t"properties": {\n\t\t"number": {\n\t\t\t"type": "number"\n\t\t},\n\t\t"street_name": {\n\t\t\t"type": "string"\n\t\t},\n\t\t"street_type": {\n\t\t\t"type": "string",\n\t\t\t"enum": ["Street", "Avenue", "Boulevard"]\n\t\t}\n\t},\n\t"required": ["number", "street_name"]\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br")])]),s("p",[s("code",[e._v('"$schema"')]),e._v("、"),s("code",[e._v("$id")]),e._v("、"),s("code",[e._v("title")]),e._v("、"),s("code",[e._v("description")]),e._v(" 这 4 个字段先不看。")]),e._v(" "),s("ul",[s("li",[e._v('"type": "object"，说明这个 JSON 的类型，通常为 object 或 array')]),e._v(" "),s("li",[e._v("properties 关键字指定这个object有三个属性 number,street_name,street_type")]),e._v(" "),s("li",[e._v("每个属性的 type 表示这个属性的数据类型")]),e._v(" "),s("li",[e._v('enum 关键字表示这个 street_type 的数据只能是"Street", "Avenue", "Boulevard"这三个值')]),e._v(" "),s("li",[e._v("required 表示number,street_name是必须有的属性，所有字段默认是非必须")])]),e._v(" "),s("p",[e._v("这样一来，普通的 json 就被描述了，被规定格式了，被校验了！")]),e._v(" "),s("p",[e._v("合法的：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n\t"number": 1600,\n\t"street_name": "Pennsylvania",\n\t"street_type": "Avenue",\n\t"direction": "NW"\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("p",[e._v("不合法的：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n\t"number": 1600,\n\t"street_name": "Pennsylvania",\n\t"street_type": "super-speed"\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[e._v("因为：street_type 的值不属于限定中的枚举值")]),e._v(" "),s("p",[e._v("好了，再来看 "),s("code",[e._v('"$schema"')]),e._v("、"),s("code",[e._v("$id")]),e._v("、"),s("code",[e._v("title")]),e._v("、"),s("code",[e._v("description")]),e._v(" 这 4 个字段：")]),e._v(" "),s("ul",[s("li",[s("code",[e._v('"$schema"')]),e._v("：因为 JSON Schema 本身就是JSON，所以很难判断什么是JSON Schema，什么只是JSON 数据。 "),s("code",[e._v("$schema")]),e._v(" 关键字用于声明 JSON Schema。")]),e._v(" "),s("li",[s("code",[e._v("$id")]),e._v("：作为每个模式的惟一标识符，类似于 $ref 作标记用，可被引用。")]),e._v(" "),s("li",[s("code",[e._v("title")]),e._v("：标题")]),e._v(" "),s("li",[s("code",[e._v("description")]),e._v("：描述")])]),e._v(" "),s("p",[e._v("除了上面所说属性以外，JSON Schema 还规定了很多其它属性，比如："),s("code",[e._v("maximum")]),e._v("、"),s("code",[e._v("minimum")]),e._v(" 大于小于，"),s("code",[e._v("pattern")]),e._v(" 正则校验，"),s("code",[e._v("items")]),e._v(" 限定数组中的每一项的类型 等等。")]),e._v(" "),s("p",[e._v("例：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('    ···\n     "phone": {\n        "description": "The contact for a person",\n        "type": "string",\n        "pattern": "^[13|14|15|16|17|18|19][0-9]{9}$"\n    },\n    ···\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br")])]),s("p",[e._v("更多高阶用法，比如对象之间的引用、生成递归结构、dependencies，additionalItems，consts, allOf, anyOf, oneOf, not, if……then……else 等等等，了解更多在官网："),s("a",{attrs:{href:"https://json-schema.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("json-schema.org"),s("OutboundLink")],1),e._v(" 或者 "),s("a",{attrs:{href:"https://json-schema.org/understanding-json-schema/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("understanding-json-schema"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("所以，综上，说：JSON Schema 之于 JSON ，就像 TypeScript 之于 JavaScript，非常准确。")]),e._v(" "),s("p",[e._v("另外：提供一些辅助工具在线地址，拿去玩(●'◡'●)：")]),e._v(" "),s("ul",[s("li",[e._v("根据JSON和对应的JSON Schema校验数据的正确性：http://json-schema-validator.herokuapp.com/")]),e._v(" "),s("li",[e._v("根据JSON数据，生成对应的JSON Schema数据：\nhttps://jsonschema.net/#/editor 或http://schemaguru.snowplowanalytics.com/#")])]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("你学废了吗？")]),e._v(" "),s("blockquote",[s("p",[e._v("OK，以上便是本篇分享。点赞关注评论，为好文助力👍")]),e._v(" "),s("p",[e._v("我是掘金安东尼 🤠 100 万人气前端技术博主 💥 INFP 写作人格坚持 1000 日更文 ✍ 关注我，安东尼陪你一起度过漫长编程岁月 🌏")])])])}),[],!1,null,null,null);t.default=a.exports}}]);