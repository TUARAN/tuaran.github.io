(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{586:function(n,s,t){"use strict";t.r(s);var a=t(2),e=Object(a.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("blockquote",[t("p",[n._v("「本文已参与好文召集令活动，点击查看："),t("a",{attrs:{href:"https://juejin.cn/post/6978685539985653767",target:"_blank"}},[n._v("后端、大前端双赛道投稿，2万元奖池等你挑战！")]),n._v("」")])]),n._v(" "),t("h2",{attrs:{id:"前言小叙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言小叙"}},[n._v("#")]),n._v(" 前言小叙")]),n._v(" "),t("p",[n._v("FPS 全称："),t("strong",[n._v("Frames per second")]),n._v("，即 "),t("strong",[n._v("【每秒帧数】")]),n._v(" 的意思。")]),n._v(" "),t("p",[n._v("通常来讲，当动画的每秒帧数低于 12 （即 "),t("strong",[n._v("12 FPS")]),n._v(" 以下）时，我们的大脑就能快速从动画中区分出一些静止的图片，所以此时的动画"),t("strong",[n._v("并不是")]),n._v("无缝动画。")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9739876a7e414499ada77df939e08817~tplv-k3u1fbpfcp-watermark.image",alt:"vertical-syn-dh02.gif"}})]),n._v(" "),t("p",[n._v("一旦播放速率（每秒帧数）达到 "),t("strong",[n._v("16-24 FPS")]),n._v(" 时，大脑就会认为这些画面是连续移动的场景，看起来就是影片的效果了（大部分数字电影拍摄是每秒 24 帧）。")]),n._v(" "),t("p",[n._v("所以，我们可以大致了解到："),t("strong",[n._v("FPS 越高，画面越流畅！")])]),n._v(" "),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/724a85b2880a4ff6bbc1d039961c55ba~tplv-k3u1fbpfcp-watermark.image",alt:"40255c644548a1c4240b2d6ed32101f3.gif"}})]),n._v(" "),t("p",[n._v("明白这些后，我们可以便可开始本篇正题了："),t("strong",[t("em",[n._v("CSS3 实现 60 FPS 的动画效果！")])])]),n._v(" "),t("h2",{attrs:{id:"常规操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常规操作"}},[n._v("#")]),n._v(" 常规操作")]),n._v(" "),t("p",[t("strong",[n._v("本瓜知道你会说：“CSS3 动画，有手就行！”")])]),n._v(" "),t("p",[n._v("知道我们的目标是实现下图动画效果时，")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dacbe0ad7bc84aa4bbcccb2e565ebc27~tplv-k3u1fbpfcp-watermark.image",alt:"0_rXGvLKSlZGRmz4Jd_.gif"}})]),n._v(" "),t("p",[n._v("你信手拈来，一顿操作！")]),n._v(" "),t("p",[n._v("很棒，恭喜你能轻松写出以下这段"),t("strong",[n._v("超级常规的")]),n._v(" CSS3 动画~")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('<div class="layout">\n\t<div class="app-menu"></div>\n\t<div class="header">\n\t\t<div class="menu-icon"></div>\n\t</div>\n</div>\n\n.app-menu {\n\tleft: -300px;\n\ttransition: left 300ms linear;\n}\n\n.app-menu-open .app-menu {\n\tleft: 0px;\n\ttransition: left 300ms linear;\n}\n')])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br")])]),t("p",[n._v("它的实现效果：")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8fddb2619934855ad5d88be994de229~tplv-k3u1fbpfcp-watermark.image",alt:"0_ZWyuzfeBSbFbQjOy_.gif"}})]),n._v(" "),t("p",[n._v("你确实做到了，"),t("strong",[n._v("但，到此为止吗？")])]),n._v(" "),t("p",[n._v("这次我们选择："),t("strong",[n._v("不止于此！")])]),n._v(" "),t("p",[n._v("于是，打开控制台 "),t("strong",[n._v("Performance Ctrl+E")]),n._v(" 进行录制这段动画来"),t("strong",[n._v("进一步分析分析")]),n._v("。")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://imagelol.com/image/InlDJh",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://s3.jpg.cm/2021/07/02/InlDJh.md.png",alt:"InlDJh.md.png"}}),t("OutboundLink")],1)]),n._v(" "),t("p",[n._v("我们可以看到它的 "),t("strong",[n._v("Timeline")]),n._v(" 中 FPS 指标（绿色部分）")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://imagelol.com/image/InlZIW",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://s3.jpg.cm/2021/07/02/InlZIW.md.png",alt:"InlZIW.md.png"}}),t("OutboundLink")],1)]),n._v(" "),t("blockquote",[t("ul",[t("li",[t("p",[n._v("绿色部分的高点表示以 60 FPS 进行渲染，低点则表示以低于 60 FPS 进行渲染；")])]),n._v(" "),t("li",[t("p",[n._v("红色条表示卡顿；")])])])]),n._v(" "),t("p",[n._v("我们发现了它存在问题：")]),n._v(" "),t("p",[t("strong",[n._v("1. 绿色部分的高度并不一致，说明 FPS 不稳定；")])]),n._v(" "),t("p",[t("strong",[n._v("2. 绿色部分有相当一部分处在低点，说明 FPS 不流畅；")])]),n._v(" "),t("p",[t("strong",[n._v("3. 存在很多红色条，说明动画很卡；")])]),n._v(" "),t("p",[n._v("所以，结论是：我们这种方法实现的 CSS3 动画，并不流畅！！")]),n._v(" "),t("p",[t("strong",[n._v("我们期望的是：高度齐平，绿色都处于高点，红色条越少越好。")]),n._v(" 别方，带着期望，继续往下看！")]),n._v(" "),t("h2",{attrs:{id:"进阶操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进阶操作"}},[n._v("#")]),n._v(" 进阶操作")]),n._v(" "),t("p",[n._v("你非常棒，并且异于常人！！你想到了使用 "),t("strong",[n._v("Transform")]),n._v(" 来实现！！")]),n._v(" "),t("p",[n._v("CSS 代码：")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v(".app-menu {\n\t-webkit-transform: translateX(-100%);\n\t\t\ttransform: translateX(-100%);\n\ttransition: transform 300ms linear;\n}\n.app-menu-open .app-menu {\n\t-webkit-transform: none;\n\t\t\ttransform: none;\n\ttransition: transform 300ms linear;\n}\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br")])]),t("p",[n._v("实现效果：")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/55ea90b1aacb46e3862d5ec3008ae56f~tplv-k3u1fbpfcp-watermark.image",alt:"2222.gif"}})]),n._v(" "),t("p",[n._v("控制台看下 Timeline：")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://imagelol.com/image/In8fhU",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://s3.jpg.cm/2021/07/02/In8fhU.png",alt:"In8fhU.png"}}),t("OutboundLink")],1)]),n._v(" "),t("p",[n._v("的确不一样了，"),t("strong",[n._v("跟【常规操作】中的 Timeline 图作比，高度都更加齐平了！更多绿色部分处于高点了！红色条也减少了！")])]),n._v(" "),t("p",[t("strong",[n._v("这表示我们的动画效果，更流畅了！")])]),n._v(" "),t("ul",[t("li",[n._v("这里动画效果为什么更流畅了呢？暂时按下不表，后文解释。")])]),n._v(" "),t("h2",{attrs:{id:"高级操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高级操作"}},[n._v("#")]),n._v(" 高级操作")]),n._v(" "),t("p",[n._v("噢噢噢，原来你是位高级前端，你还会这样 "),t("strong",[n._v("will-change")]),n._v(" 这样高级的操作！")]),n._v(" "),t("p",[n._v("CSS 代码：")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v(".app-menu {\n\t-webkit-transform: translateX(-100%);\n\t\t\ttransform: translateX(-100%);\n\ttransition: transform 300ms linear;\n\twill-change: transform;\n}\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br")])]),t("p",[n._v("实现效果：")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebe1b0f1681044c88181ff10edc3e6e3~tplv-k3u1fbpfcp-watermark.image",alt:"333_.gif"}})]),n._v(" "),t("p",[n._v("控制台看下 Timeline：")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://imagelol.com/image/In8CGi",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://s3.jpg.cm/2021/07/02/In8CGi.png",alt:"In8CGi.png"}}),t("OutboundLink")],1)]),n._v(" "),t("p",[t("strong",[n._v("天呐噜！")])]),n._v(" "),t("p",[t("strong",[n._v("相较于【进阶操作】，我们更加接近目标：高度基本齐平了！绿色位置绝大部分都处在高位！红条减的更少了！")])]),n._v(" "),t("p",[n._v("这么厉害的嘛？不妨再往下看！")]),n._v(" "),t("h2",{attrs:{id:"顶级操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#顶级操作"}},[n._v("#")]),n._v(" 顶级操作")]),n._v(" "),t("p",[t("strong",[n._v("至此，你的手中还有牌吗？")])]),n._v(" "),t("p",[n._v("或许我们还能从 DOM 结构找找突破口！")]),n._v(" "),t("p",[n._v("将前文的 DOM 改造成：")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('<div class="menu">\n\t<div class="app-menu"></div>\n</div>\n<div class="layout">\n\t<div class="header">\n\t\t<div class="menu-icon"></div>\n\t</div>\n</div>\n')])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br")])]),t("p",[n._v("在 layout 区域之外创建 menu，然后使用 js 中的 "),t("strong",[n._v("transitionend 函数")]),n._v("来监听，使 menu--animatable 类在过渡时间结束时被移除。")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d2043f0b0794ef5af5859c6a4ca6cbe~tplv-k3u1fbpfcp-watermark.image",alt:"0_EFkarCSe2mQEYK0e_.gif"}})]),n._v(" "),t("p",[n._v("// js")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('function toggleClassMenu() {\n\tmyMenu.classList.add("menu--animatable");\t\n\tif(!myMenu.classList.contains("menu--visible")) {\t\t\n\t\tmyMenu.classList.add("menu--visible");\n\t} else {\n\t\tmyMenu.classList.remove(\'menu--visible\');\t\t\n\t}\t\n}\n\nfunction OnTransitionEnd() {\n\tmyMenu.classList.remove("menu--animatable");\n}\n\nvar myMenu = document.querySelector(".menu");\nvar oppMenu = document.querySelector(".menu-icon");\nmyMenu.addEventListener("transitionend", OnTransitionEnd, false);\noppMenu.addEventListener("click", toggleClassMenu, false);\nmyMenu.addEventListener("click", toggleClassMenu, false);\n')])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br")])]),t("p",[n._v("// 完整 css")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("menu {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    pointer-events: none;\n    z-index: 150;\n}\n\n.menu--visible {\n    pointer-events: auto;\n}\n\n.app-menu {\n    background-color: #fff;\n    color: #fff;\n    position: relative;\n    max-width: 400px;\n    width: 90%;\n    height: 100%;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);\n    -webkit-transform: translateX(-103%);\n            transform: translateX(-103%);\n    display: flex;\n    flex-direction: column;\n    will-change: transform;\n    z-index: 160;\n    pointer-events: auto;            \n}\n\n.menu--visible .app-menu {\n    -webkit-transform: none;\n            transform: none;\n}\n\n.menu--animatable .app-menu {\n    transition: all 130ms ease-in;\n}\n\n.menu--visible.menu--animatable  .app-menu {\n    transition: all 330ms ease-out;\n}\n\n.menu:after {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0,0,0,0.4);\n    opacity: 0;\n    will-change: opacity;\n    pointer-events: none;\n    transition: opacity 0.3s cubic-bezier(0,0,0.3,1);\n}\n\n.menu--visible.menu:after {\n    opacity: 1;\n    pointer-events: auto;\n}\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br"),t("span",{staticClass:"line-number"},[n._v("23")]),t("br"),t("span",{staticClass:"line-number"},[n._v("24")]),t("br"),t("span",{staticClass:"line-number"},[n._v("25")]),t("br"),t("span",{staticClass:"line-number"},[n._v("26")]),t("br"),t("span",{staticClass:"line-number"},[n._v("27")]),t("br"),t("span",{staticClass:"line-number"},[n._v("28")]),t("br"),t("span",{staticClass:"line-number"},[n._v("29")]),t("br"),t("span",{staticClass:"line-number"},[n._v("30")]),t("br"),t("span",{staticClass:"line-number"},[n._v("31")]),t("br"),t("span",{staticClass:"line-number"},[n._v("32")]),t("br"),t("span",{staticClass:"line-number"},[n._v("33")]),t("br"),t("span",{staticClass:"line-number"},[n._v("34")]),t("br"),t("span",{staticClass:"line-number"},[n._v("35")]),t("br"),t("span",{staticClass:"line-number"},[n._v("36")]),t("br"),t("span",{staticClass:"line-number"},[n._v("37")]),t("br"),t("span",{staticClass:"line-number"},[n._v("38")]),t("br"),t("span",{staticClass:"line-number"},[n._v("39")]),t("br"),t("span",{staticClass:"line-number"},[n._v("40")]),t("br"),t("span",{staticClass:"line-number"},[n._v("41")]),t("br"),t("span",{staticClass:"line-number"},[n._v("42")]),t("br"),t("span",{staticClass:"line-number"},[n._v("43")]),t("br"),t("span",{staticClass:"line-number"},[n._v("44")]),t("br"),t("span",{staticClass:"line-number"},[n._v("45")]),t("br"),t("span",{staticClass:"line-number"},[n._v("46")]),t("br"),t("span",{staticClass:"line-number"},[n._v("47")]),t("br"),t("span",{staticClass:"line-number"},[n._v("48")]),t("br"),t("span",{staticClass:"line-number"},[n._v("49")]),t("br"),t("span",{staticClass:"line-number"},[n._v("50")]),t("br"),t("span",{staticClass:"line-number"},[n._v("51")]),t("br"),t("span",{staticClass:"line-number"},[n._v("52")]),t("br"),t("span",{staticClass:"line-number"},[n._v("53")]),t("br"),t("span",{staticClass:"line-number"},[n._v("54")]),t("br"),t("span",{staticClass:"line-number"},[n._v("55")]),t("br"),t("span",{staticClass:"line-number"},[n._v("56")]),t("br"),t("span",{staticClass:"line-number"},[n._v("57")]),t("br"),t("span",{staticClass:"line-number"},[n._v("58")]),t("br"),t("span",{staticClass:"line-number"},[n._v("59")]),t("br"),t("span",{staticClass:"line-number"},[n._v("60")]),t("br"),t("span",{staticClass:"line-number"},[n._v("61")]),t("br"),t("span",{staticClass:"line-number"},[n._v("62")]),t("br"),t("span",{staticClass:"line-number"},[n._v("63")]),t("br"),t("span",{staticClass:"line-number"},[n._v("64")]),t("br")])]),t("p",[n._v("它的 Timeline：")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://imagelol.com/image/In89lr",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://s3.jpg.cm/2021/07/02/In89lr.md.png",alt:"In89lr.md.png"}}),t("OutboundLink")],1)]),n._v(" "),t("p",[t("strong",[n._v("这就是 CSS3 实现 60 FPS动画的顶级操作！")])]),n._v(" "),t("p",[t("strong",[n._v("高度全部齐平！！全部处在高位！！没有红条！！")])]),n._v(" "),t("p",[t("strong",[n._v("这是完美的 FPS 动画！如丝般顺滑！")])]),n._v(" "),t("p",[t("strong",[n._v("你做到了！(๑•̀ㅂ•́)و✧")])]),n._v(" "),t("h2",{attrs:{id:"原理探寻"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原理探寻"}},[n._v("#")]),n._v(" 原理探寻")]),n._v(" "),t("p",[n._v("我们在此做简单回顾：")]),n._v(" "),t("table",[t("thead",[t("tr",[t("th",[n._v("级别")]),n._v(" "),t("th",[n._v("实现核心方式")]),n._v(" "),t("th",[n._v("FPS 绿块效果")]),n._v(" "),t("th",[n._v("动画顺滑程度")])])]),n._v(" "),t("tbody",[t("tr",[t("td",[n._v("常规操作")]),n._v(" "),t("td",[t("code",[n._v("transition: left 300ms linear;")])]),n._v(" "),t("td",[n._v("高度不齐平、较多处于低点、很多红条")]),n._v(" "),t("td",[n._v("30% 顺滑")])]),n._v(" "),t("tr",[t("td",[n._v("进阶操作")]),n._v(" "),t("td",[t("code",[n._v("transition: transform 300ms linear;")])]),n._v(" "),t("td",[n._v("高度比较齐平、较少处于低点、较少红条")]),n._v(" "),t("td",[n._v("60% 顺滑")])]),n._v(" "),t("tr",[t("td",[n._v("高级操作")]),n._v(" "),t("td",[t("code",[n._v("will-change: transform;")])]),n._v(" "),t("td",[n._v("高度基本齐平、很少处于低点、很少红条")]),n._v(" "),t("td",[n._v("80% 顺滑")])]),n._v(" "),t("tr",[t("td",[n._v("顶级操作")]),n._v(" "),t("td",[t("code",[n._v("transitionend 函数")])]),n._v(" "),t("td",[n._v("高度完全齐平、全部处于高点、没有红条")]),n._v(" "),t("td",[n._v("100% 顺滑")])])])]),n._v(" "),t("p",[t("strong",[n._v("原理？原理还得回归底层，来看看浏览器的渲染机制！")])]),n._v(" "),t("p",[t("img",{attrs:{src:"https://s3.jpg.cm/2021/07/02/InXLPw.png",alt:"InXLPw.png"}})]),n._v(" "),t("p",[n._v("上图是浏览器渲染的关键步骤，相信大家都很熟悉：")]),n._v(" "),t("ol",[t("li",[n._v("Styles（样式）: 浏览器计算要应用于元素的样式；")]),n._v(" "),t("li",[n._v("Layout（布局）：浏览器计算每个元素生成形状和位置，比如 width、height、margin、left/top/right/bottom 这些；")]),n._v(" "),t("li",[n._v("Paint（渲染）：浏览器将每个元素的像素填充到图层中；")]),n._v(" "),t("li",[n._v("Composite（合成）：浏览器开始在屏幕上绘制所有图层的时候；")])]),n._v(" "),t("p",[n._v("第 4 步“合成”给了我们很多操作空间：")]),n._v(" "),t("p",[n._v("我们可以使用 "),t("strong",[n._v("transform")]),n._v(" 和 "),t("strong",[n._v("opacity")]),n._v(" 两个属性实现四种最常用的动画：")]),n._v(" "),t("ol",[t("li",[n._v("位置动画：translateX(n) translateY(n) translateZ(n);")]),n._v(" "),t("li",[n._v("大小动画：transform: scale(n);")]),n._v(" "),t("li",[n._v("旋转动画：transform: rotate(ndeg);")]),n._v(" "),t("li",[n._v("不透明度动画：opacity: n;")])]),n._v(" "),t("p",[t("strong",[n._v("在第 4 步操作为什么具有魔法呢？")])]),n._v(" "),t("p",[n._v("笨蛋，当然是避免重绘、回流增加渲染负担啦~")]),n._v(" "),t("p",[n._v("所以，我们的进阶操作控制 "),t("strong",[n._v("transform")]),n._v(" 比常规操作控制 "),t("strong",[n._v("left")]),n._v(" 属性更优！")]),n._v(" "),t("p",[n._v("而高级操作中的 "),t("strong",[n._v("will-change")]),n._v(" 能告知浏览器元素会有哪些变化，这样浏览器能在变化之前做好优化准备工作，将一部分复杂计算提前准备好，所以页面的反应更加快速灵敏。")]),n._v(" "),t("p",[n._v("顶级操作中改造分离 DOM，然后用 JS控制，手动添加 menu--animatable 类，然后用到 "),t("strong",[n._v("transitionend 事件")]),n._v(" 会在 CSS transition 结束后触发，移除 menu--animatable 类。实现完全体的 60FPS 动画！")]),n._v(" "),t("p",[t("strong",[n._v("通常来说，我们能做到进阶操作或高级操作中的实现应该就够了，如果在特殊情景下，如对 FPS 要求特别高，我们再开拓思路，启用顶级操作！（顶级操作是把宝刀，一般不拿出来~）")])]),n._v(" "),t("h2",{attrs:{id:"写在结尾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#写在结尾"}},[n._v("#")]),n._v(" 写在结尾")]),n._v(" "),t("p",[n._v("我们都知道编码习惯非常重要，但同时又一直苦于思考，如何将一些原理知识与实际编码结合？！")]),n._v(" "),t("p",[t("strong",[n._v("而本篇是基于浏览器渲染原理，对 CSS3 动画的一个很好结合实践！")])]),n._v(" "),t("p",[t("strong",[n._v("CodeReview 时，同事都直呼：细节！")])]),n._v(" "),t("p",[n._v("“秒啊~ 我理解的原理知识用来面试，你理解的原理知识用来工作中日常编码，细节！高级！”")]),n._v(" "),t("p",[n._v("ok，以上便是本次分享~ 都看到这儿了，点个赞鼓励鼓励吧~ b(￣▽￣)d")]),n._v(" "),t("blockquote",[t("p",[n._v("我是掘金安东尼，输出暴露输入，技术洞见生活，下期再会~")])]),n._v(" "),t("p",[n._v("参考：")]),n._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/48674410",target:"_blank",rel:"noopener noreferrer"}},[n._v("为什么电影24帧就算流畅，主机30帧就算流畅，而电脑游戏需要60帧流畅？"),t("OutboundLink")],1)]),n._v(" "),t("li",[t("a",{attrs:{href:"https://www.reneelab.net/frames-per-second.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("FPS幀數是什麼？24fps、30fps、60fps有什麼區別？"),t("OutboundLink")],1)]),n._v(" "),t("li",[t("a",{attrs:{href:"https://medium.com/outsystems-experts/how-to-achieve-60-fps-animations-with-CSS3-db7b98610108",target:"_blank",rel:"noopener noreferrer"}},[n._v("how-to-achieve-60-fps-animations-with-CSS3"),t("OutboundLink")],1)]),n._v(" "),t("li",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/transitionend_event",target:"_blank",rel:"noopener noreferrer"}},[n._v("transitionend_event"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);