(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{569:function(n,e,s){"use strict";s.r(e);var r=s(2),a=Object(r.a)({},(function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("p",[n._v("这是我参与11月更文挑战的第22天，活动详情查看：2021最后一次更文挑战")]),n._v(" "),s("hr"),n._v(" "),s("p",[n._v("本篇译自："),s("a",{attrs:{href:"https://medium.com/@abdelmatyne5/uuid-vs-crypto-randomuuid-vs-nanoid-313e18144d8c",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://medium.com/@abdelmatyne5/uuid-vs-crypto-randomuuid-vs-nanoid"),s("OutboundLink")],1)]),n._v(" "),s("p",[n._v("通用唯一识别码（英语：Universally Unique Identifier，缩写：UUID）是用于计算机体系中以识别信息的一个 128 位标识符，表现为一串 32 位十六进制数字。")]),n._v(" "),s("p",[n._v("UUID 用于解决 ID 唯一的问题!")]),n._v(" "),s("p",[n._v("然后，"),s("strong",[n._v("如何确保唯一，这本身就是一项挑战！")])]),n._v(" "),s("p",[n._v("如何保证所生成 ID 只有一个副本？如何保证两个 ID 之间没有相关性？唯一性和随机性之间怎么取舍......")]),n._v(" "),s("p",[n._v("OS：看过本瓜之前写的"),s("a",{attrs:{href:"https://juejin.cn/post/6980925339358724104",target:"_blank",rel:"noopener noreferrer"}},[n._v("《理解 P/NP 问题时，我产生了一种已经触碰到人类认知天花板的错觉？！》"),s("OutboundLink")],1),n._v("这篇文章的朋友，应该知道：或许这个世界上没有"),s("strong",[n._v("随机")]),n._v("这个东西？任何随机都能被量子计算算清楚，上帝到底掷骰子吗？没人知道......")]),n._v(" "),s("p",[n._v("是否有真正的随机，先按下不表，")]),n._v(" "),s("p",[n._v("基于目前的算力精度，现在各种 UUID 生成器和不同版本的处理方式能最大限度的确保 ID 不重复，重复 UUID 码概率接近零，可以忽略不计。")]),n._v(" "),s("p",[n._v("本篇带来 3 种 UUID 生成器！")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://miro.medium.com/max/2000/1*tCx9NZsofAb-a0eRMyKXIw.png",alt:"img"}})]),n._v(" "),s("h2",{attrs:{id:"uuid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uuid"}},[n._v("#")]),n._v(" UUID")]),n._v(" "),s("p",[n._v("基于  "),s("a",{attrs:{href:"https://www.ietf.org/rfc/rfc4122.txt",target:"_blank",rel:"noopener noreferrer"}},[n._v("RFC4122"),s("OutboundLink")],1),n._v(" 标准创建的 UUID，它有很多版本：v1,v2..v5；")]),n._v(" "),s("p",[s("code",[n._v("uuid v1")]),n._v("是使用主机 MAC 地址和当前日期和时间的组合生成的，这种方式意味着 uuid 是匿名的。")]),n._v(" "),s("p",[s("code",[n._v("uuid v4")]),n._v(" 是随机生成的，没有内在逻辑，组合方式非常多（2¹²⁸），除非每秒生成数以万亿计的 ID，否则几乎不可能产生重复，如果你的应用程序是关键型任务，仍然应该添加唯一性约束，以避免 v4 冲突。")]),n._v(" "),s("p",[s("code",[n._v("uuid v5")]),n._v("与 v1 v4不同，它通过提供两条输入信息（输入字符串和命名空间）生成的，这两条信息被转换为 "),s("code",[n._v("uuid")]),n._v("；")]),n._v(" "),s("p",[s("strong",[n._v("特性：")])]),n._v(" "),s("ul",[s("li",[n._v("完善；")]),n._v(" "),s("li",[n._v("跨平台;")]),n._v(" "),s("li",[n._v("安全：加密、强随机性;")]),n._v(" "),s("li",[n._v("体积小：零依赖，占用空间小;")]),n._v(" "),s("li",[n._v("开源库支持："),s("code",[n._v("uuid")]),n._v(" "),s("a",{attrs:{href:"https://github.com/uuidjs/uuid#command-line",target:"_blank",rel:"noopener noreferrer"}},[n._v("command line"),s("OutboundLink")],1),n._v("；")])]),n._v(" "),s("p",[s("strong",[n._v("上手：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import { v4 as uuidv4 } from 'uuid';\n\nlet uuid = uuidv4(); \n\nconsole.log(uuid) // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("h2",{attrs:{id:"crypto-randomuuid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crypto-randomuuid"}},[n._v("#")]),n._v(" Crypto.randomUUID")]),n._v(" "),s("p",[n._v("Node.js API "),s("code",[n._v("Crypto")]),n._v(" 提供 "),s("code",[n._v("**randomUUID()**")]),n._v(" 方法，基于 "),s("a",{attrs:{href:"https://www.rfc-editor.org/rfc/rfc4122.txt",target:"_blank",rel:"noopener noreferrer"}},[n._v("RFC 4122"),s("OutboundLink")],1),n._v(" V4 生成随机数；")]),n._v(" "),s("p",[s("strong",[n._v("上手：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('let uuid = crypto.randomUUID();\n\nconsole.log(uuid); // ⇨ "36b8f84d-df4e-4d49-b662-bcde71a8764f"\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("h2",{attrs:{id:"nano-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nano-id"}},[n._v("#")]),n._v(" Nano ID")]),n._v(" "),s("p",[n._v("Nano ID 有 3 个 api：")]),n._v(" "),s("ol",[s("li",[n._v("normal (blocking)； 普通")]),n._v(" "),s("li",[n._v("asynchronous；异步")]),n._v(" "),s("li",[n._v("non-secure；非安全")])]),n._v(" "),s("p",[n._v("默认情况下，Nano ID 使用符号（"),s("code",[n._v("A-Za-z0-9-")]),n._v("），并返回一个包含 21 个字符的 ID（具有类似于UUID v4的重复概率）。")]),n._v(" "),s("p",[s("strong",[n._v("特性：")])]),n._v(" "),s("ul",[s("li",[n._v("体积小：130 bytes (压缩后)；")]),n._v(" "),s("li",[n._v("零依赖；")]),n._v(" "),s("li",[n._v("生成更快；")]),n._v(" "),s("li",[n._v("安全：")]),n._v(" "),s("li",[n._v("更短，只要 21 位；")]),n._v(" "),s("li",[n._v("方便移植，支持 "),s("a",{attrs:{href:"https://github.com/ai/nanoid#other-programming-languages",target:"_blank",rel:"noopener noreferrer"}},[n._v("20 种编程语言"),s("OutboundLink")],1),n._v(".")])]),n._v(" "),s("p",[s("strong",[n._v("上手：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import { nanoid } from 'nanoid'\n\nlet uuid = nanoid();\n\nconsole.log(uuid) // ⇨ \"V1StGXR8_Z5jdHi6B-myT\"\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[s("strong",[n._v("npm 下载趋势：")])]),n._v(" "),s("p",[s("img",{attrs:{src:"https://miro.medium.com/max/1500/1*ve1HpCinZri43z1oboXQ2w.png",alt:"img"}})]),n._v(" "),s("h2",{attrs:{id:"测速"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测速"}},[n._v("#")]),n._v(" 测速")]),n._v(" "),s("p",[n._v("我们不妨来对比以上所提 3 种生成 UUID 的方式：")]),n._v(" "),s("ol",[s("li",[n._v("require(‘uuid’).v4()")]),n._v(" "),s("li",[n._v("require(‘crypto’).randomUUID()")]),n._v(" "),s("li",[n._v("require(‘nanoid’).nanoid()")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("// test-uuid-gen.js\nconst { v4 as uuidv4 } = require('uuid');\n\nfor (let i = 0; i < 10_000_000; i++) {\n  uuidv4();\n}\n\n// test-crypto-gen.js\nconst { randomUUID } = require('crypto');\n\nfor (let i = 0; i < 10_000_000; i++) {\n  randomUUID();\n}\n\n// test-nanoid-gen.js\nconst { nanoid } = require('nanoid');\n\nfor (let i = 0; i < 10_000_000; i++) {\n  nanoid();\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br")])]),s("p",[n._v("借助 "),s("a",{attrs:{href:"https://github.com/sharkdp/hyperfine",target:"_blank",rel:"noopener noreferrer"}},[n._v("hyperfine"),s("OutboundLink")],1),n._v(" ；")]),n._v(" "),s("p",[n._v("调用测试："),s("code",[n._v("hyperfine ‘node test-uuid-gen.js’ ‘node test-crypto-gen.js’ ‘node test-nanoid-gen.js’")])]),n._v(" "),s("p",[n._v("运行结果：")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://miro.medium.com/max/1500/1*_M7spX4tgp75j68jfE4Mlw.png",alt:"img"}})]),n._v(" "),s("p",[n._v("我们可以看到, 第二种 "),s("code",[n._v("**randomUUID()**")]),n._v(" 比第三种 "),s("code",[n._v("nanoid")]),n._v(" 快 4 倍左右，比第一种 "),s("code",[n._v("uuid")]),n._v(" 快 12 倍左右~")]),n._v(" "),s("hr"),n._v(" "),s("p",[s("code",[n._v("**randomUUID()**")]),n._v(" 或许是未来生成 UUID 的趋势~~")]),n._v(" "),s("p",[n._v("OK，以上就是本篇分享~ 撰文不易，点赞鼓励👍👍👍")]),n._v(" "),s("p",[n._v("我是掘金安东尼，公众号同名，日拱一卒、日掘一金，再会~")])])}),[],!1,null,null,null);e.default=a.exports}}]);