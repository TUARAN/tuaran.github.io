(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{646:function(e,s,t){"use strict";t.r(s);var r=t(2),a=Object(r.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("「这是我参与2022首次更文挑战的第10天，活动详情查看："),t("a",{attrs:{href:"https://juejin.cn/post/7052884569032392740",title:"https://juejin.cn/post/7052884569032392740",target:"_blank",rel:"noopener noreferrer"}},[e._v("2022首次更文挑战"),t("OutboundLink")],1),e._v("」")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("我们都知道 "),t("code",[e._v("require()")]),e._v(" 和 "),t("code",[e._v("import()")]),e._v(" 都是用于导入模块的，但是它们差别大有不同，本篇 5 分钟带你进行比较理解~ 轻松易读，温故知新。")]),e._v(" "),t("blockquote",[t("p",[e._v("惟书有色，艳于西子；惟文有华，秀于百卉。—— 皮日休")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("require()")])])]),e._v(" "),t("p",[e._v("在 Node.js 中，require() 是一个内置函数，用于导入单独文件的外部模块；require() 可以读取 JavaScript 文件，执行它，并返回导出的对象。Require 不仅可以添加内置的核心 NodeJS 模块，还允许添加本地模块；")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var myVar = require('http'); //to use built-in modules\n\nvar myVar2 = require('./myLocaModule'); //to use local modules\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("ul",[t("li",[t("strong",[e._v("import()")])])]),e._v(" "),t("p",[e._v("import() 通常与 export() 成对出现，用于引入 ES 模块，属于 ES6 规范。它们只允许在 ES 模块中使用，无法使用它们导入具有其它文件类型（如 .json）的其它模块。可以用于导入以路径 URL 形式的资源或包名；如果 Script 脚本没有设置 type='module'，则不能使用 import 语句；")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('var myVac = import("module-name");\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("ul",[t("li",[t("strong",[e._v("require() vs import()")])])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/733a90dcea434d8785c2e3ee7f42c643~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),t("ol",[t("li",[t("strong",[e._v("require()")]),e._v(" 可以在任何地方被调用")])]),e._v(" "),t("p",[e._v("通常，我们在文件开头调用 import() 或 require() 语句。但实际上，你可以在代码中的任何位置调用 require()，而 import() 语句只能在文件开头定义。在别处使用 import() 语句，会报错：要求移动到文件的开头。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// 报错\nif (x > 2) {\n  import a from \"./a\";\n}\n///repl: 'import' and 'export' may only appear at the top level (2:2)\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("import 命令会被 JS 引擎静态分析(编译阶段)，先于其他模块执行，所以报错；")]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("strong",[e._v("require()")]),e._v(" 可以放在条件判断里面")])]),e._v(" "),t("p",[e._v("代码如下：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("//require\nif(user.id == 1){\n   const getBlogTitle = require(‘./blogDetails.js’);\n}\n\n//import\nif(...) {   \n  import ...; // Error, not allowed! \n}  \n{   \n  import ...; // Error, we can't put import in any block \n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[t("strong",[e._v("ES 模块也可以动态调用")])])]),e._v(" "),t("p",[e._v("虽然上面说 import 写法不能放在条件判断里，但是 ES 模块也是支持动态调用的：")]),e._v(" "),t("p",[e._v("它的写法是 "),t("code",[e._v("import (./xxx)")]),e._v("，而非 "),t("code",[e._v("import x from './xxx'")])]),e._v(" "),t("p",[e._v("此点非常重要，注意区分！")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" //dynamic import\nlet {hi, bye} = await import('./say.js');  \nhi(); // Hello!\nbye(); // Bye!\n\n//OR\n\nlet say = await import('./say.js');     \nsay.hi(); // Hello!     \nsay.bye(); // Bye!\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br")])]),t("p",[e._v("import() 加载模块成功以后，这个模块会作为一个对象，当作 then 方法的参数。因此，可以使用对象解构赋值的语法，获取输出接口。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('import("./myModule.js").then(({ export1, export2 }) => {\n  // ...·\n});\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[e._v("import() 是异步的；")])]),e._v(" "),t("p",[e._v("在使用 require 命令加载模块时，就会运行整个模块的代码；")]),e._v(" "),t("p",[e._v("import 虽然写在文件顶部，但是脚本执行时，只有在碰到这个只读变量的时候，才执行被加载的模块（"),t("strong",[e._v("异步加载")]),e._v("）")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d817e8998764b369769a0f206db7748~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("小结：不仅要注意区分 "),t("code",[e._v("require() vs import()")]),e._v("，也要注意区分 "),t("code",[e._v("import x from './xxx'")]),e._v(" 和  "),t("code",[e._v("import (./xxx)")]),e._v(" 的差异；")]),e._v(" "),t("blockquote",[t("p",[e._v("我是掘金安东尼，输出暴露输入，技术洞见生活，再会~")])])])}),[],!1,null,null,null);s.default=a.exports}}]);