(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{738:function(n,s,e){"use strict";e.r(s);var a=e(2),t=Object(a.a)({},(function(){var n=this,s=n.$createElement,e=n._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[n._v("æºæ‰‹åˆ›ä½œï¼Œå…±åŒæˆé•¿ï¼è¿™æ˜¯æˆ‘å‚ä¸ã€Œæ˜é‡‘æ—¥æ–°è®¡åˆ’ Â· 8 æœˆæ›´æ–‡æŒ‘æˆ˜ã€çš„ç¬¬18å¤©ï¼Œ"),e("a",{attrs:{href:"https://juejin.cn/post/7123120819437322247",title:"https://juejin.cn/post/7123120819437322247",target:"_blank",rel:"noopener noreferrer"}},[n._v("ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…"),e("OutboundLink")],1)]),n._v(" "),e("hr"),n._v(" "),e("p",[n._v("é™ä½é˜…è¯»è´Ÿæ‹…ï¼Œå¯å‘åˆ›ä½œå¿ƒæ™ºï¼Œè½»æ¾å­¦ä¹  JavaScript æŠ€å·§ï¼Œæ—¥æ‹±ä¸€å’ï¼Œjymï¼Œå†²~")]),n._v(" "),e("p",[e("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5baeb2f877364de68cd24b2c62fdca1f~tplv-k3u1fbpfcp-watermark.image?",alt:"take-it-easy-relax.gif"}})]),n._v(" "),e("p",[e("strong",[n._v("æœ¬ç¯‡å¸¦æ¥ Thunk ç†è§£ï¼Œè¿™ä¹Ÿæ˜¯æœ¬ç“œæœ€æ´¥æ´¥ä¹é“çš„ JS å‡½æ•°å¼ç¼–ç¨‹ä¸­å»¶è¿Ÿå¤„ç†çš„æ€æƒ³æ ¸å¿ƒä¹‹ä¸€ï¼")])]),n._v(" "),e("hr"),n._v(" "),e("p",[n._v("ä»€ä¹ˆæ˜¯ Thunk ï¼Ÿ")]),n._v(" "),e("p",[n._v("ç®€å•ç†è§£ï¼šåœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼ŒThunk å°±æ˜¯ä¸€ç§å®ç°å»¶è¿Ÿæ‰§è¡Œçš„æ‰‹æ®µã€‚")]),n._v(" "),e("p",[n._v("ä¸¾ä¸ªæ —å­ğŸŒ°ğŸŒ°ğŸŒ°")]),n._v(" "),e("p",[n._v("æˆ‘è¦è®¡ç®— 99 çš„ 9 æ¬¡æ–¹ï¼Œç„¶åå†æŠŠå®ƒæ‰“å°å‡ºæ¥ï¼Œä½ ä¼šæ€ä¹ˆå†™ï¼Ÿ")]),n._v(" "),e("p",[n._v("å¤§èªæ˜è‚¯å®šæ˜¯ç›´æ¥ä¸€å¥è¯ï¼š")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("console.log(Math.pow(99, 9)) // 913517247483640800\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[n._v("æœ‰ç‚¹æƒ³æ³•çš„åŒå­¦è‚¯å®šæƒ³å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸ºåç»­è¿˜å¯èƒ½è¦ 88 çš„ 8 æ¬¡æ–¹ã€77 çš„ 7 æ¬¡æ–¹ç­‰ç­‰ï¼š")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("const power = (base, exponent) => {\n  return Math.pow(base, exponent);\n};\n\nconsole.log(power(99, 9)); // 913517247483640800\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br")])]),e("p",[n._v("å¦‚æœè¿˜æœ‰æ›´å¤šæƒ³æ³•ï¼Œå¯èƒ½ä¼šè€ƒè™‘ï¼š")]),n._v(" "),e("p",[n._v("ä»Šå¤©ä½ è®©æˆ‘ console æ‰“å°ç»“æœï¼Œæ˜å¤©å¦‚æœè®©æˆ‘ alert å¼¹çª—æé†’ç»“æœæ€ä¹ˆåŠï¼Ÿåå¤©åˆè®©æˆ‘  handleXXX å¤„ç†ç»“æœï¼Œåˆè¯¥æ€ä¹ˆåŠï¼Ÿ")]),n._v(" "),e("p",[n._v("æ‰€ä»¥ï¼Œè¿™é‡Œå¯ä»¥è®¾è®¡ä¸€ä¸ªï¼ˆå¯è‡ªå®šä¹‰çš„ï¼‰å›è°ƒå‡½æ•°æ¥å¤„ç†è¿™ä¸ªè¿ç®—ç»“æœï¼š")]),n._v(" "),e("p",[n._v("äºæ˜¯ä»£ç æ¼”è¿›ä¸ºï¼š")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("const power = (base, exponent,callback) => {\n  return callback(Math.pow(base, exponent))\n};\n\nconst powerThunk = (callback) => {\n  return function () {\n    power(99, 9, callback);\n  };\n};\n\nconst calculatePower = powerThunk((result) => console.log(result));\n\ncalculatePower(); // 913517247483640800\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br")])]),e("p",[n._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè°ƒç”¨"),e("code",[n._v("powerThunk()")]),n._v(" å¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œ "),e("code",[n._v("power()")]),n._v(" è¿ç®—ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å»¶è¿Ÿæ‰§è¡Œã€‚")]),n._v(" "),e("p",[n._v("å¹¶ä¸” "),e("code",[n._v("powerThunk()")]),n._v(" åªç”¨å†ä¼ ä¸€ä¸ªå›è°ƒå‡½æ•°è¿›å»å°±è¡Œäº†ï¼Œä¸ç”¨å†ä¼  base 99 å’Œ exponent 9 è¿™ä¸¤ä¸ªå‚æ•°äº†ã€‚")]),n._v(" "),e("p",[n._v("åœ¨æŸç§æ„ä¹‰ä¸Šæ¥è®²ï¼Œthunk ä¹Ÿæ˜¯ä¸€ä¸ªå·²ç»å›ºå®šæŸäº›å‚æ•°çš„ä¸€ä¸ªå‡½æ•°ï¼Œä¸Šä¾‹ä¸­ power è¦ä¼  3 ä¸ªå‚æ•°ï¼Œè€Œ powerThunk åªç”¨ä¼ ä¸€ä¸ªå‚æ•°å°±è¡Œäº†ã€‚è¿™æ„Ÿè§‰å°±æœ‰ç‚¹åƒæŸ¯é‡ŒåŒ–ã€‚")]),n._v(" "),e("p",[n._v("å¯èƒ½æœ‰åŒå­¦é—®äº†ï¼š")]),n._v(" "),e("blockquote",[e("p",[n._v("â€œæˆ‘å°±å–œæ¬¢ç›´æ¥ä¿®æ”¹ï¼Œä¸å–œæ¬¢å°è£…ï¼Œè¡Œå—ï¼Ÿâ€")])]),n._v(" "),e("blockquote",[e("p",[n._v("â€œè¡Œå‘€ï¼Œå’‹ä¸è¡Œï¼Œå³ä½¿è‡ªå·±ä¸åšå°è£…ï¼Œä½ ä¹Ÿåœ¨æ— æ—¶æ— åˆ»åœ°ç”¨è¿™ç§å°è£…ã€‚Promise å°±æ˜¯åŸºäº Thunkã€‚â€")])]),n._v(" "),e("p",[n._v("ç»§ç»­ä¸Šé¢çš„ä¾‹å­è®²ï¼š")]),n._v(" "),e("p",[n._v("ä¸Šé¢çš„ä¾‹å­æ˜¯åŒæ­¥çš„ï¼Œæˆ‘ä»¬æ”¹é€ æˆå¼‚æ­¥çš„ï¼š")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('const fetchCurrenciesData = (callback) => {\n  fetch("https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies.json")\n  .then(res => res.json())\n  .then(res => callback(res));\n}\n\n// This is an async thunk\nconst asyncThunk = (callback) => {\n  return function () {\n    fetchCurrenciesData(callback);\n  }\n}\n\n// This async thunk now returns a function that \n// can be called later on to fetch data from the API.\nconst fetchCurrencies = asyncThunk((res) => console.log(res));\nfetchCurrencies();\n')])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br")])]),e("p",[n._v("å½“æˆ‘ä»¬è°ƒç”¨"),e("code",[n._v("fetchCurrencies()")]),n._v(" æ—¶ï¼Œä¼šæ‰§è¡Œ "),e("code",[n._v("fetchCurrenciesData((res) => console.log(res))()")])]),n._v(" "),e("p",[n._v("å°±ä¼šæŒ‰åºæ‰§è¡Œ fetch æ–¹æ³•ï¼Œç„¶åèµ° .then å¤„ç†æˆ jsonï¼Œç„¶åæ‰“å°ã€‚")]),n._v(" "),e("p",[n._v("ä¸€å¥—åµŒä¸€å¥—ï¼Œæ¯çŒªå¸¦ç†Šç½©ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸€ä¸ª toThunk å·¥å…·å‡½æ•°ï¼š")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("function toThunk(asyncFn) {\n  return (...args) => {\n    return (callback) => {\n      asyncFn(...args, callback);\n    };\n  };\n}\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br")])]),e("p",[n._v("å¯ä»¥å°†ä»»ä½•å‡½æ•°å¤„ç†åšæˆä¸Šè¿°çš„é€»è¾‘ï¼š")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("let thunk = toThunk(readFile); // readFile æ˜¯å¼‚æ­¥å‡½æ•°\nthunk = thunk('./foo');\nthunk((err, data) => /* do sth. */))\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br")])]),e("p",[n._v("thunk çš„ä¸¤æ­¥æ‰§è¡Œï¼Œç¬¬ä¸€æ­¥ä¼ å…¥å‚æ•°ï¼Œç¬¬äºŒæ­¥æ˜¯ä¼ å…¥å›è°ƒå‡½æ•°ï¼Œè¿™å°±æ˜¯ Promise çš„ then çš„æ–¹æ³•æ€è·¯ï¼ï¼")]),n._v(" "),e("p",[n._v("thunk è¿˜å¯ä»¥æ­é… es6 ç”Ÿæˆå™¨ä½¿ç”¨ï¼Œæœ¬ç¯‡å°±ä¸ä½œå±•å¼€ã€‚")]),n._v(" "),e("p",[n._v("JavaScript ä¸­ã€ŒThunkã€æ€ä¹ˆç†è§£ï¼Œä½  get åˆ°äº†å—ï¼Ÿ\n")]),e("hr"),e("p"),n._v(" "),e("blockquote",[e("p",[n._v("OKï¼Œä»¥ä¸Šä¾¿æ˜¯æœ¬ç¯‡åˆ†äº«ã€‚ç‚¹èµå…³æ³¨è¯„è®ºï¼Œä¸ºå¥½æ–‡åŠ©åŠ›ğŸ‘")]),n._v(" "),e("p",[n._v("æˆ‘æ˜¯æ˜é‡‘å®‰ä¸œå°¼ ğŸ¤  100 ä¸‡äººæ°”å‰ç«¯æŠ€æœ¯åšä¸» ğŸ’¥ INFP å†™ä½œäººæ ¼åšæŒ 1000 æ—¥æ›´æ–‡ âœ å…³æ³¨æˆ‘ï¼Œå®‰ä¸œå°¼é™ªä½ ä¸€èµ·åº¦è¿‡æ¼«é•¿ç¼–ç¨‹å²æœˆ ğŸŒ")])])])}),[],!1,null,null,null);s.default=t.exports}}]);