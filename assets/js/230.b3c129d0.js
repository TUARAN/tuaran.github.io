(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{727:function(s,n,a){"use strict";a.r(n);var e=a(2),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"🎆背景交代"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🎆背景交代"}},[s._v("#")]),s._v(" 🎆背景交代")]),s._v(" "),a("p",[s._v("一直想做一个调研，到底有多少比例的 web 前端工友工作内容以 "),a("strong",[s._v("开发后台管理系统")]),s._v(" 为主。")]),s._v(" "),a("p",[s._v("本瓜虽然以前也做过小程序项目、H5项目，但现实仍是以开发后台管理系统为主，是个不折不扣的“"),a("strong",[s._v("后管前端er")]),s._v("”。大部分 web 前端工友应该也相似吧，这或许是由市场需求决定的。")]),s._v(" "),a("p",[s._v("所以大家在后台管理系统项目中遇到的很多问题也都是相似的，代码很值得 review，本篇带来一例（真实）~")]),s._v(" "),a("p",[s._v("闲言少叙，开冲！！ヾ(◍°∇°◍)ﾉﾞ")]),s._v(" "),a("p",[s._v("众所周知，在后台管理项目中，这样色的 table 是最常见的：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/26c5595835a84753be7d5696d2e63acb~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),a("p",[s._v("这个 table 中，主题模板有很多状态，比如："),a("strong",[s._v("草稿")]),s._v(" 状态、"),a("strong",[s._v("已发布")]),s._v(" 状态、"),a("strong",[s._v("待审核")]),s._v(" 状态等等；")]),s._v(" "),a("p",[s._v("点击这些状态又进入到不同的操作页中，比如：草稿对应 "),a("strong",[s._v("新建")]),s._v(" 操作页，已发布对应 "),a("strong",[s._v("修改")]),s._v(" 操作页，待审核对应 "),a("strong",[s._v("审核")]),s._v(" 操作页等等。")]),s._v(" "),a("p",[s._v("在不同的操作页中意味着要请求不同的 "),a("strong",[s._v("接口")]),s._v("、不同的接口意味着有不同的请求 "),a("strong",[s._v("参数")]),s._v("。")]),s._v(" "),a("p",[a("strong",[s._v("你会惊讶的发现 新建页、修改页、审核页 其实都长得差不多！")]),s._v(" 大概像下图这样色的（因为它们都会列出 table 的大部分字段，不同的字段存在不同的展现，有些只读、有些可写、有些存在关联项等等）：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f578d49ece244b1a39653d5a8518f53~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),a("p",[s._v("实际项目中的 form 会比上述截图所示复杂得多。比如本瓜所在项目中，这样的操作页，有几十个字段，包括查看、编辑、状态关联等。此处仅做抽象示意处理。")]),s._v(" "),a("p",[s._v("基于上面的背景，我们可以想象：如果每个操作页面都是独立的，新建页有几十个表格字段、编辑页有几十个表格字段、审核页有几十个表格字段……而这些字段大部分类似，只是在部分字段上有区别或定制化的写法，"),a("strong",[s._v("那肯定不至于：有几个操作页，就复制几个页面吧？！")])]),s._v(" "),a("p",[s._v("这样没有任何复用思维，每当需要增删改字段的时候，都要在多个页面中进行操作，这是“大聪明”做法。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ffcc324d1304a028ef7b8e01de3201c~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),a("p",[a("strong",[s._v("于是乎，我们需要复用！！")])]),s._v(" "),a("p",[s._v("（复用！又是复用！写业务代码最牛b的地方就是复用。高耦合、低内聚就是说如何复用。设计模式也是为了合理复用；就连写算法的时候，复用也是最牛b的，如何复用题干条件、或者复用空间来换取时间等等）")]),s._v(" "),a("p",[s._v("手段、方法、途径有很多，这里拎出来单讲的一点复用是："),a("strong",[s._v("对请求参数的封装复用。")])]),s._v(" "),a("h2",{attrs:{id:"🎃代码抽象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🎃代码抽象"}},[s._v("#")]),s._v(" 🎃代码抽象")]),s._v(" "),a("p",[s._v("我们尝试将上一节的背景做伪代码的抽象（也可稍作修改在控制台调试）：")]),s._v(" "),a("p",[s._v("如果不做任何封装，它将会是类似这样的：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 设一个页面的全局表格对象\nconst ruleForm = {\n                  type:"fe",\n                  time:"20200721",\n                  title:"day day up",\n                  status:"draft",\n                  weight:999,\n                  comment:"great",\n                  balabala:"我是冗余参数1",\n                  bilibilib:"我是冗余参数2"\n                  }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("新建操作页参数")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const {type,time,.title,status.weight,comment} = ruleForm // 解构得值\nconst getCreateParam = function(){\n      // ...省略一系列操作\n      return {only: "create"}\n}\nconst createParam = getCreateParam() // 得到特殊传参\n\nconst param = {\n    // 公共传参\n    type,\n    time,\n    title,\n    status,\n    weight,\n    comment,\n    // 特殊传参\n    createParam\n}\n\ncreateRequest(param).then(res=> ... )\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("ul",[a("li",[s._v("修改操作页参数")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const {type,time,.title,status.weight,comment} = ruleForm\nconst getEditParam1= function(){\n      // ...\n      return {only1: "edit1"}\n}\nconst editParam1 = getEditParam1()\nconst getEditParam2= function(){\n      // ...\n      return {only2: "edit2"}\n}\nconst editParam2 = getEditParam2()\n\nconst param = {\n    // 公共传参\n    type,\n    time,\n    title,\n    status,\n    weight,\n    comment,\n    // 特殊传参\n    editParam1,\n    editParam2\n}\n\neditRequest(param).then(res=> ... )\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("ul",[a("li",[s._v("审核操作页参数")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const {type,time,.title,status.weight,comment} = ruleForm\nconst getReviewParam1= function(){\n      // ...\n      return {only1: "review1"}\n}\nconst reviewParam1= getReviewParam1()\nconst getReviewParam2= function(){\n      // ...\n      return {only2: "review2"}\n}\nconst reviewParam2= getReviewParam2()\nconst getReviewParam3= function(){\n      // ...\n      return {only3: "review3"}\n}\nconst reviewParam3= getReviewParam3()\n\nconst param = {\n    // 公共传参\n    type,\n    time,\n    title,\n    status,\n    weight,\n    comment,\n    // 特殊传参\n    reviewParam1,\n    reviewParam2,\n    reviewParam3\n}\n\nreviewRequest(param).then(res => ...)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("p",[a("strong",[s._v("试想一下这个参数是 10 个或20 个，甚至30 个呢？")])]),s._v(" "),a("p",[a("strong",[s._v("实际的业务代码中变量赋值、变形，比这个会复杂的多的多！")])]),s._v(" "),a("h2",{attrs:{id:"✨1-面向对象封装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#✨1-面向对象封装"}},[s._v("#")]),s._v(" ✨1. 面向对象封装")]),s._v(" "),a("p",[s._v("第一种，我们先用面向对象的思路来封装上述过程：")]),s._v(" "),a("p",[s._v("// 获取公共参数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("class CommonParam {\n  constructor(){\n      this.ruleForm = ruleForm\n  }\n  get(){\n    const {type,time,title,status,weight,comment} = this.ruleForm\n    return{type,time,title,status,weight,comment}\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("// 获取创建操作的参数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class CreateParam extends CommonParam {\n  getCreateParam(){\n    // ...省略一系列操作\n    return {only: "create"}\n  }\n  get(){\n      const para = super.get()\n      return {...para,...this.getCreateParam()}\n  }\n}\n\nlet creatParam = new CreateParam().get()\n\ncreateRequest(creatParam).then(res=> ... )\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("// 获取编辑操作的参数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class EditParam extends CommonParam {\n  getEditParam1(){\n    return {only1: "edit1"}\n  }\n  getEditParam2(){\n    return {only2: "edit2"}\n  }\n  get(){\n      const para = super.get()\n      return {...para,...this.getEditParam1(),...this.getEditParam2()}\n  }\n}\n\nlet editParam = new EditParam().get()\n\neditRequest(editParam).then(res=> ... )\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("// 获取审核操作的参数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class ReviewParam extends CommonParam {\n  getReviewParam1(){\n    return {only1: "review1"}\n  }\n  getReviewParam2(){\n    return {only2: "review2"}\n  }\n  getReviewParam3(){\n    return {only3: "review3"}\n  }\n  get(){\n      const para = super.get()\n      return {...para,...this.getReviewParam1(),...this.getReviewParam2(),...this.getReviewParam3()}\n  }\n}\n\nlet reviewParam = new ReviewParam().get()\n\nreviewRequest(reviewParam).then(res=> ... )\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("p",[s._v("有工友问，这里继承也就只继承了公共参数，有必要写 class 类吗？")]),s._v(" "),a("p",[s._v("本瓜觉得，如果你的代码都是面向过程的风格，那这里写成这样，多少有点突兀；但如果大量都是用类做了封装的，这里也有必要做封装。")]),s._v(" "),a("ol",[a("li",[s._v("代码风格保持一致；")]),s._v(" "),a("li",[s._v("class 还有一个好处，代码呈现块状，"),a("strong",[s._v("声明和调用是分开的")]),s._v("，这一点很重要；")]),s._v(" "),a("li",[s._v("当然也利于后续扩展、改造。自上而下的过程式代码写多了，会很难阅读以及 debugger。")])]),s._v(" "),a("h2",{attrs:{id:"✨2-函数式编程封装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#✨2-函数式编程封装"}},[s._v("#")]),s._v(" ✨2. 函数式编程封装")]),s._v(" "),a("p",[s._v("第二种，我们用函数式编程的思维去封装上述过程：")]),s._v(" "),a("p",[s._v("要借助我们的老朋友， compose 函数进行函数组合~")]),s._v(" "),a("ul",[a("li",[s._v("简易版本 compose 函数代码如下：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export const compose = function(...fns) {\n  return function composed(result) {\n    // 拷贝一份保存函数的数组\n    var list = fns.slice()\n    while (list.length > 0) {\n      // 将最后一个函数从列表尾部拿出并执行它\n      result = list.pop()(result)\n      if (result === 'breakCompose') { // * 任一步骤 renturn \"breakCompose\" 可以提前结束流程；\n        break\n      }\n    }\n    return result\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("有一位工友问过 compose 过程中如何 break，以上代码来自本瓜实战项目，就能实现；compose 函数可以做很多改造，可以自己动手试试~")]),s._v(" "),a("p",[s._v("封装本篇实战的请求参数：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('/******函数声明部分******/\n\n/*\n* 公共参数\n*/\nconst step_getCommonParam = function(ruleForm){\n    const {type,time,title,status,weight,comment} = ruleForm\n    return{type,time,title,status,weight,comment}\n}\n\n/*\n* 创建步骤函数\n*/\nconst step_getCreateParam= function(args){\n    // ...省略一系列操作\n    return {...args,only: "create"}\n}\nconst step_createRequest = function(creatParam){\n    return createRequest(creatParam).then(res=> ... )\n}\n\n/*\n* 编辑步骤函数\n*/\nconst getEditParam1= function(args){\n    // ...\n    return {...args,only: "edit1"}\n}\nconst getEditParam2= function(args){\n    // ...\n    return {...args,only: "edit2"}\n}\nconst step_editRequest = function(editParam){\n    return editRequest(editParam).then(res=> ... )\n}\n\n/*\n* 审核步骤函数\n*/\nconst getReviewParam1= function(args){\n    return {...args,only1: "review1"}\n}\nconst getReviewParam2= function(args){\n    return {...args,only1: "review2"}\n}\nconst getReviewParam3= function(args){\n    return {...args,only1: "review3"}\n}\nconst step_reviewRequest = function(reviewParam){\n    return reviewRequest(reviewParam).then(res=> ... )\n}\n\n/******函数调用部分******/\n\nconst handleCreate = (...args) => {// 创建操作\n  const steps = [step_createRequest, step_getCreateParam, step_getCommonParam] // 步骤从右自左读\n  compose(...steps)(...args)\n}\n\nhandleCreate(ruleForm)\n\nconst handleEdit = (...args) => {// 编辑操作\n  const steps = [step_editRequest, step_getEditParam2,step_getEditParam1, step_getCommonParam]\n  compose(...steps)(...args)\n}\n\nhandleEdit(ruleForm)\n\nconst handleReview = (...args) => {// 审核操作\n  const steps = [step_reviewRequest,step_getReviewParam3,step_getReviewParam2,step_getReviewParam1,step_getCommonParam]\n  compose(...steps)(...args)\n}\n\nhandleReview(ruleForm)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br")])]),a("p",[s._v("如何？老观众有种熟悉的味道吧？和上面的代码对比，可以明显的感受风格的不一样吧？")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79c8bee9643d486780666ba8e00410f0~tplv-k3u1fbpfcp-watermark.image?",alt:"giphy.gif"}})]),s._v(" "),a("h2",{attrs:{id:"🍻review-小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🍻review-小结"}},[s._v("#")]),s._v(" 🍻Review 小结")]),s._v(" "),a("p",[s._v("本篇带来了后台管理系统常见的接口参数的封装 2 种风格。")]),s._v(" "),a("p",[s._v("最开始的代码，不做任何设计，复制多份，自上而下、"),a("strong",[s._v("过程式的风格")]),s._v("；")]),s._v(" "),a("p",[s._v("优化1：借助 es6 class，js 可以简单的写出 "),a("strong",[s._v("面向对象的代码风格")]),s._v("；")]),s._v(" "),a("p",[s._v("优化2：用 compose 函数组合的方式，实现 "),a("strong",[s._v("函数式编程风格")]),s._v("。")]),s._v(" "),a("p",[s._v("过程式、面向对象、函数式，这种代码风格的学名是什么？")]),s._v(" "),a("p",[s._v("答：编程范式。")]),s._v(" "),a("p",[s._v("编程范式的思路不仅在原生 js 可以用，在 jq 中也可用，在 vue 、react 框架等等都可以用。感受感受，其实有些框架本身的一些设计是偏向不同风格的，js 是多范式语言，jq 偏向操作型过程式、vue 无明显倾向、过程式、面向对象、函数式都行、react 有点偏向函数式……")]),s._v(" "),a("p",[s._v("上述是本瓜项目实战的一点 review 体会。")]),s._v(" "),a("p",[s._v("由于本篇部分代码是伪代码，示意参考，或不尽完善，请各位斧正。")]),s._v(" "),a("blockquote",[a("p",[s._v("OK，以上便是本篇分享。点赞关注评论，为好文助力👍")]),s._v(" "),a("p",[s._v("我是掘金安东尼 🤠 100 万人气前端技术博主 💥 INFP 写作人格坚持 1000 日更文 ✍ 关注我，安东尼陪你一起度过漫长编程岁月 🌏")])]),s._v(" "),a("p",[s._v("我正在参与掘金技术社区创作者签约计划招募活动，"),a("a",{attrs:{href:"https://juejin.cn/post/7112770927082864653",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击链接报名投稿"),a("OutboundLink")],1),s._v("。")])])}),[],!1,null,null,null);n.default=t.exports}}]);