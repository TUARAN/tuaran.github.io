(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{588:function(s,n,a){"use strict";a.r(n);var e=a(2),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œåœ¨å¾ªç¯ä¸­ä½¿ç”¨å¼‚æ­¥è¯·æ±‚ async/awaitã€‚")]),s._v(" "),a("p",[s._v("æœ¬ç¯‡æ€»ç»“äº† 5 ç§ä½¿ç”¨æ–¹æ³•ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("æ‰“å‹¾çš„æ–¹æ³• âœ” ï¼šè¡¨ç¤ºåœ¨å¾ªç¯ä¸­æ¯ä¸ªå¼‚æ­¥è¯·æ±‚æ˜¯æŒ‰ç…§æ¬¡åºæ¥æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬ç®€ç§°ä¸º "),a("strong",[s._v("â€œä¸²è¡Œâ€")])]),s._v(" "),a("li",[s._v("æ‰“å‰çš„æ–¹æ³•âŒï¼šä»£è¡¨åœ¨å¾ªç¯ä¸­æ‰§è¡Œäº†æ‰€æœ‰å¼‚æ­¥è¯·æ±‚ï¼Œä¸ä¿è¯æ¬¡åºï¼Œæˆ‘ä»¬ç®€ç§°ä¸º "),a("strong",[s._v("â€œå¹¶è¡Œâ€")])])]),s._v(" "),a("p",[s._v("æŒ‰éœ€æ‰€å–ï¼Œç‚¹èµğŸ‘æ”¶è—ğŸ“•")]),s._v(" "),a("h2",{attrs:{id:"foreach-âŒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#foreach-âŒ"}},[s._v("#")]),s._v(" forEach âŒ")]),s._v(" "),a("p",[s._v("éå†æˆ‘ä»¬å¸¸ç”¨ forEachï¼Œç”¨ forEach å¯ä»¥å—ï¼Ÿ")]),s._v(" "),a("p",[s._v("é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼Œæœ¬è´¨ä¸Š forEach å°±æ˜¯ä¸€ä¸ª for å¾ªç¯çš„åŒ…è£…ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Array.prototype.forEach = function (callback) {\n  for (let index = 0; index < this.length; index++) {\n    callback(this[index], index, this)\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("åœ¨å›è°ƒå‡½æ•°å†…éƒ¨è°ƒç”¨ await éœ€è¦è¿™ä¸ªå›è°ƒå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯ async å‡½æ•°ï¼Œæ‰€ä»¥å¾ªç¯ä¸­çš„ä»£ç åº”è¿™æ ·å†™ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("async function someFunction(items) {\n  items.forEach( async(i) => {\n     const res = await someAPICall(i);\n     console.log('---\x3e', res);\n  });\n}\nfunction someAPICall(param) {\n    return new Promise((resolve, reject)=>{\n      setTimeout(()=>{\n        resolve(\"Resolved\" + param)\n      },param);\n    })\n}\nsomeFunction(['3000','8000','1000','4000']);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("åœ¨æ§åˆ¶å°æ‰§è¡Œï¼Œå¦‚å›¾ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/2021/async-await-loop/async1.png",alt:""}})]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å¯ä»¥çœ‹åˆ° forEach å¹¶æ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬çš„æœŸæœ›è¿›è¡Œè¾“å‡ºã€‚forEach åªæ˜¯æŒ‰é¡ºåºå¹¶è¡Œæ‰§è¡Œäº†ï¼Œè€Œä¸æ˜¯ä¸²è¡Œã€‚è€Œç”¨ for...of å´ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ã€‚")]),s._v(" "),a("h2",{attrs:{id:"for-of-âœ”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-of-âœ”"}},[s._v("#")]),s._v(" for...of... âœ”")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("async function printFiles () {\n  let fileNames = ['picard', 'kirk', 'geordy', 'ryker', 'worf'];\n  for (const file of fileNames) {\n    const contents = await fs.readFile(file, 'utf8');\n    console.log(contents);\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("æ§åˆ¶å°æ‰§è¡Œå¦‚ä¸‹å›¾ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/2021/async-await-loop/async2.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"reduce-âœ”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reduce-âœ”"}},[s._v("#")]),s._v(" reduce âœ”")]),s._v(" "),a("p",[s._v("å…¶å®æœ‰äº†è§£è¿‡ã€å¾ªç¯ã€‘+ã€å¼‚æ­¥ã€‘çš„ç«¥é‹è‚¯å®šçŸ¥é“ reduceã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('function testPromise(time) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      console.log(`Processing ${time}`);\n      resolve(time);\n    }, time);\n  });\n}\n\nlet result = [3000,2000,1000, 4000].reduce( (accumulatorPromise, nextID) => {\n  return accumulatorPromise.then(() => {\n    return testPromise(nextID);\n  });\n}, Promise.resolve());\n\nresult.then(e => {\n  console.log("All Promises Resolved !!âœ¨")\n});\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ reduce å‡½æ•°æ¥éå†æ•°ç»„å¹¶æŒ‰é¡ºåº resolve promiseã€‚")]),s._v(" "),a("p",[s._v("å¾ˆæ¸…æ™°ï¼")]),s._v(" "),a("h2",{attrs:{id:"generator-âœ”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generator-âœ”"}},[s._v("#")]),s._v(" generator âœ”")]),s._v(" "),a("p",[s._v("å…¶å®ç”¨ async generator ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("async function* readFiles(files) {\n  for(const file of files) {\n    yield await readFile(file);\n  }\n};\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("é’ˆå¯¹ä¸Šä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("async function* generateSequence(items) {\n  for (const i of items) {\n    await new Promise(resolve => setTimeout(resolve, i));\n    yield i;\n  }\n}\n\n(async () => {\n  let generator = generateSequence(['3000','8000','1000','4000']);\n  for await (let value of generator) {\n    console.log(value);\n  }\n})();\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"promise-all-âŒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promise-all-âŒ"}},[s._v("#")]),s._v(" Promise.all() âŒ")]),s._v(" "),a("p",[s._v("å¦‚æœä½ ä¸ç”¨è€ƒè™‘å¼‚æ­¥è¯·æ±‚çš„æ‰§è¡Œé¡ºåºï¼Œä½ å¯ä»¥é€‰æ‹© Promise.all()ï¼Œå³ Promise.all() å¯ä»¥è¾¾åˆ°"),a("strong",[s._v("å¹¶è¡Œ")]),s._v(" è€Œé"),a("strong",[s._v("ä¸²è¡Œ")]),s._v("çš„ç›®çš„ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("async function printFiles () {\n  let fileNames = ['picard', 'kirk', 'geordy', 'ryker', 'worf'];\n  await Promise.all(fileNames.map(async (file) => {\n    const contents = await fs.readFile(file, 'utf8');\n    console.log(contents);\n  }));\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("é’ˆå¯¹ä¸Šä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("async function promiseAll(arr) {\n  await Promise.all(arr.map(async (i) => {\n    await sleep(i)\n    console.log('---\x3e', i);\n  }))\n}\n\nfunction sleep(i) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve()\n    }, i)\n  })\n}\n\npromiseAll(['3000','8000','1000','4000'])\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);