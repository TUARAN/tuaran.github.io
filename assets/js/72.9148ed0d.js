(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{573:function(s,n,t){"use strict";t.r(n);var a=t(2),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("æœ¬ç¯‡è¯‘è‡ªï¼š"),t("a",{attrs:{href:"https://javascript.plainenglish.io/how-to-use-observables-with-vanilla-javascript-aca40a7590ff",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://javascript.plainenglish.io/how-to-use-observables-with-vanilla-javascript"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("æ¥ä¸Šä¸¤ç¯‡ï¼š")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://juejin.cn/post/7029093184332365855",target:"_blank",rel:"noopener noreferrer"}},[s._v("ã€ŠJs å¼‚æ­¥å¤„ç†æ¼”è¿›ï¼ŒCallback=>Promise=>Observerã€‹"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.cn/post/7029465648174465055",target:"_blank",rel:"noopener noreferrer"}},[s._v("ã€Šç»§ç»­è§£æƒ‘ï¼Œå¼‚æ­¥å¤„ç† â€”â€” RxJS Observableã€‹"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("æˆ‘ä»¬è®¤è¯†äº† ES7 å¤„ç†å¼‚æ­¥çš„ä¸€å¤§åˆ©å™¨ â€”â€” "),t("strong",[t("code",[s._v("Observable")])])]),s._v(" "),t("p",[t("strong",[s._v("æœ¬ç¯‡å¸¦æ¥ç”¨åŸç”Ÿå®ç° Observableï¼Œä¸€æ¢å†…éƒ¨ç©¶ç«Ÿï¼ï¼")])]),s._v(" "),t("p",[s._v("å®ç°æ­¥éª¤è§£æå¦‚ä¸‹ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("Observable åº”è¯¥æ˜¯ä¸€ä¸ª "),t("strong",[s._v("Subject")]),s._v(" æ–°å¯¹è±¡ç±»å‹ï¼›")]),s._v(" "),t("li",[s._v("å¹¶ä¸” "),t("strong",[s._v("Subject")]),s._v(" å¯¹è±¡æœ‰"),t("code",[s._v("subscribe")]),s._v("å’Œ"),t("code",[s._v("next")]),s._v("ä¸¤ä¸ªå‡½æ•°ï¼›")]),s._v(" "),t("li",[t("code",[s._v("subscribe")]),s._v("Â ç”± observers ï¼ˆè§‚å¯Ÿè€…ï¼‰è°ƒç”¨ï¼Œæ¥è®¢é˜…å¯è§‚å¯Ÿçš„æ•°æ®æµï¼›")]),s._v(" "),t("li",[t("code",[s._v("next")]),s._v("ç”± "),t("strong",[s._v("Subject owner")]),s._v(" è°ƒç”¨ï¼Œå®ç°æ¨é€/å‘å¸ƒæ–°æ•°æ®ï¼›")]),s._v(" "),t("li",[t("strong",[s._v("Subject owner")]),s._v(" åº”è¯¥çŸ¥é“ observers ä½•æ—¶ç›‘å¬æ•°æ®ç”Ÿæ•ˆï¼›")]),s._v(" "),t("li",[s._v("å¦å¤–ï¼Œ"),t("strong",[s._v("Subject owner")]),s._v(" ä¹Ÿåº”è¯¥çŸ¥é“ observers ä½•æ—¶ä¸å†ç›‘å¬äº†ï¼›")]),s._v(" "),t("li",[s._v("å†çœ‹ observerï¼Œå®ƒä¹Ÿåº”è¯¥å¯ä»¥éšæ—¶è¢«å–æ¶ˆï¼›")]),s._v(" "),t("li",[s._v("å¯ä»¥å®šä¹‰ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œ"),t("strong",[s._v("Subscription")]),s._v("ï¼›")]),s._v(" "),t("li",[t("strong",[s._v("Subscription")]),s._v(" åŒ…å« "),t("code",[s._v("unsubscribe")]),s._v(" å‡½æ•°ï¼›")]),s._v(" "),t("li",[s._v("æ¯ä¸ª observer æƒ³è¦åœæ­¢ç›‘å¬æ¥è‡ª "),t("strong",[s._v("Subject")]),s._v(" çš„æ•°æ®æµæ—¶ï¼Œå¯ä»¥è°ƒç”¨"),t("code",[s._v("unsubscribe")]),s._v("å®ç°ï¼›")])]),s._v(" "),t("p",[s._v("æœ‰äº†ä»¥ä¸Šæ€è·¯ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¥çœ‹ä»£ç å®ç°~")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("ä»£ç å®ç°ï¼š")]),s._v(" "),t("p",[t("strong",[s._v("Subscription")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("let Subscription = function(handlerId, unsubscribeNotificationCallback) {\n\tlet self = this;\n\n\tself.unsubscribe = () => {\n\t\tif(unsubscribeNotificationCallback) {\n\t\t\tunsubscribeNotificationCallback(handlerId);\n\t\t}\n\t};\n\t\n\treturn self;\n};\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("æ³¨æ„ï¼š"),t("strong",[s._v("Subscription")]),s._v(" ä»…åœ¨ "),t("code",[s._v("unsubscribe")]),s._v(" è¢«è°ƒç”¨æ—¶ï¼Œé€šçŸ¥ "),t("strong",[s._v("Subject")]),s._v("ï¼›")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("å†çœ‹ "),t("strong",[s._v("Subject")]),s._v(" å®Œæ•´ä»£ç å®ç°ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("let Subject = function(subscribersStateChangeNotificationCallback) {\n\tlet self = this;\n\t\n\tlet handlers = {};\n\t\n\tObject.defineProperty(self, \"subscribersFound\", {\n\t\tget() {\n\t\t\tlet found = false;\n\t\t\t\n\t\t\tfor(const prop in handlers) {\n\t\t\t\tif(handlers.hasOwnProperty(prop)) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn found;\n\t\t}\n\t});\n\t\n\tObject.defineProperty(self, \"subscribersCount\", {\n\t\tget() {\n\t\t\tlet count = 0;\n\t\t\t\n\t\t\tfor(const prop in handlers) {\n\t\t\t\tif(handlers.hasOwnProperty(prop)) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn count;\n\t\t}\n\t});\n\t\n\tlet unsubscribeNotificationCallback = (handlerId) => {\n\t\tif(handlerId && handlerId !== '' && handlers.hasOwnProperty(handlerId)) {\n\t\t\tdelete handlers[handlerId];\n\t\t\t\n\t\t\tif(subscribersStateChangeNotificationCallback && !self.subscribersFound) {\n\t\t\t\tsubscribersStateChangeNotificationCallback(false);\n\t\t\t}\n\t\t}\n\t};\n\t\n\tself.subscribe = (handler) => {\n\t\tlet handlerId = createGuid();\n\t\thandlers[handlerId] = handler;\n\t\t\n\t\tif(subscribersStateChangeNotificationCallback && self.subscribersCount === 1) {\n\t\t\tsubscribersStateChangeNotificationCallback(true);\n\t\t}\n\t\t\n\t\treturn new Subscription(handlerId, unsubscribeNotificationCallback);\n\t};\n\t\n\tself.next = (data) => {\n\t\tfor(const handlerId in handlers) {\n\t\t\thandlers[handlerId](data);\n\t\t}\n\t};\n\t\n\treturn self;\n};\n\nlet createGuid = function() {  \n   return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {  \n      var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);  \n      return v.toString(16);  \n   });  \n};\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br")])]),t("p",[t("strong",[s._v("Subject Owner")]),s._v(" å®ç°ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(".\n.\n.\nlet subscribersStateChangeNotificationCallback = (subscriberFound) => {\n\tif(!subscriberFound && isNowWatching) {\n\t\tstopWatching();\n\t\tisNowWatching = false;\n\t} else if(subscriberFound && !isNowWatching) {\n\t\tstartWatching();\n\t}\n};\n\nself.data = new Subject(subscribersStateChangeNotificationCallback);\n.\n.\n.\nself.data.next(self.snapshot.data);\n.\n.\n.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[t("strong",[s._v("Observer")]),s._v(" å®ç°ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(".\n.\n.\nconst dashboardServiceSubscription = myDashboardService.data.subscribe((data) => {\n\t...\n});\n.\n.\n.\ndashboardServiceSubscription.unsubscribe();\n.\n.\n.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("å°ç»“ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ç°å…³é”®æ˜¯ "),t("strong",[s._v("Subject")]),s._v(" å¯¹è±¡ï¼Œæ›´é‡è¦çš„æ˜¯ "),t("strong",[s._v("å‘å¸ƒ")]),s._v(" å’Œ "),t("strong",[s._v("è®¢é˜…")]),s._v(" çš„è¿‡ç¨‹ï¼å½“ç„¶ï¼Œä¹Ÿä¸èƒ½å¿˜äº† "),t("strong",[s._v("å–æ¶ˆè®¢é˜…")]),s._v(" çš„åŠŸèƒ½ï¼›")]),s._v(" "),t("p",[s._v("å‘å¸ƒå’Œè®¢é˜…æ¨¡å¼æ¥å¤„ç†å¼‚æ­¥å¯ä»¥å¿½è§†æ‰æ—¶é—´è¿™ä¸ªç»´åº¦ï¼Œå°±æ˜¯ä¸ç”¨ç®¡æ—¶é—´ä¸Šçš„å…ˆåï¼Œå°±ä¿è¯äº†é¡ºåºï¼è¿™ä¸€ç‚¹ï¼Œåœ¨å‰é¢ä¸€ç¯‡å‡½æ•°å¼ç¼–ç¨‹ä¸­ä¹Ÿè®²è¿‡ï¼š"),t("a",{attrs:{href:"https://juejin.cn/post/6976550771122765837#heading-1",target:"_blank",rel:"noopener noreferrer"}},[s._v("ã€ŠXDMï¼ŒJSå¦‚ä½•å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿçœ‹è¿™å°±å¤Ÿäº†ï¼ï¼ˆå…­ï¼‰ã€‹"),t("OutboundLink")],1),s._v(" â€”â€” "),t("strong",[s._v("å‡å°‘æ—¶é—´çŠ¶æ€ï¼")])]),s._v(" "),t("p",[s._v('ä¸å¾—ä¸è¯´ï¼Œéƒ½æ˜¯ç›¸é€šçš„~~ Î£(âŠ™â–½âŠ™"a')]),s._v(" "),t("hr"),s._v("\nOKï¼Œå°±æ˜¯è¿™æ ·ï¼è¿™å°±æ˜¯ç”¨åŸç”Ÿæ¨¡æ‹Ÿ Observable çš„å®ç°è¿‡ç¨‹ï¼\n"),t("p",[s._v("æ’°æ–‡ä¸æ˜“ï¼Œç‚¹èµé¼“åŠ±ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘")]),s._v(" "),t("blockquote",[t("p",[s._v("æˆ‘æ˜¯æ˜é‡‘å®‰ä¸œå°¼ï¼Œå…¬ä¼—å·åŒåï¼Œæ—¥æ‹±ä¸€å’ã€æ—¥æ˜ä¸€é‡‘ï¼Œå†ä¼š~")])])])}),[],!1,null,null,null);n.default=e.exports}}]);