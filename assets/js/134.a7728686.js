(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{629:function(s,e,n){"use strict";n.r(e);var a=n(2),t=Object(a.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("strong",[s._v("本篇介绍 10 点如何从实战中学习突破 Vue JS 3 的新特性，细细看完，一定会有收获~")])]),s._v(" "),n("p",[s._v("主体译自："),n("a",{attrs:{href:"https://codeburst.io/vue-js-3-the-practical-guide-e82c429113e1",target:"_blank",rel:"noopener noreferrer"}},[s._v("【Vue JS 3 — The Practical Guide】"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("更多学习资料:"),n("a",{attrs:{href:"https://github.com/Jerga99/vue-3-updates",target:"_blank",rel:"noopener noreferrer"}},[s._v("【https://github.com/Jerga99/vue-3-updates】"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("目录：")]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-0",target:"_blank",rel:"noopener noreferrer"}},[s._v("初始化挂载"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-1",target:"_blank",rel:"noopener noreferrer"}},[s._v("Composition"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("Data 选项"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-3",target:"_blank",rel:"noopener noreferrer"}},[s._v("Filters 被移除"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-4",target:"_blank",rel:"noopener noreferrer"}},[s._v("多个根标签"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-5",target:"_blank",rel:"noopener noreferrer"}},[s._v("Suspense"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("响应式"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-7",target:"_blank",rel:"noopener noreferrer"}},[s._v("多个 v-model"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-8",target:"_blank",rel:"noopener noreferrer"}},[s._v("Teleport"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6921255904675872776#heading-9",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue Router"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("strong",[s._v("另：最近本瓜在参加 "),n("a",{attrs:{href:"https://rank.juejin.cn/?utm_campaign=annual_2020&utm_medium=web_entrance&utm_source=nav",target:"_blank",rel:"noopener noreferrer"}},[s._v("【掘金 2020 人气创作者榜单打榜活动】"),n("OutboundLink")],1),s._v("，赶快来为我 ——"),n("a",{attrs:{href:"https://rank.juejin.cn/?u=%E6%8E%98%E9%87%91%E5%AE%89%E4%B8%9C%E5%B0%BC&t=user",target:"_blank",rel:"noopener noreferrer"}},[s._v("【掘金安东尼】"),n("OutboundLink")],1),s._v("投票吧！！！支持创作者！！！支持掘金！！！掘掘掘！！！")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3891702d75543e4a6bea5ce5303ae15~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),s._v(" "),n("p",[s._v("你的点赞投票是我最大的动力，关注走一波，【2021】有更多好看~!😀😀😀")]),s._v(" "),n("h2",{attrs:{id:"初始化挂载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化挂载"}},[s._v("#")]),s._v(" 初始化挂载")]),s._v(" "),n("p",[s._v("在 Vue2 中，我们在 main.js 通常这样进行初始化挂载：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("new Vue({\n  render: h => h(App),\n  components: { App }\n}).$mount('#app')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("在 Vue3 中，调整为这样：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import { createApp } from 'vue'\nimport App from './App.vue'\n\nconst app = createApp(App)\n\napp.mount('#app')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("为什么发生这样的变化？原因是：如果我们在 Vue2 中创建多个 Vue 实例，那么所有应用（#app）都会共享全局相同的配置。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 全局共享、相互影响\nVue.mixin({\n  /* ... */\n})\n\nVue.directive('...', {\n  ...\n})\nconst app1 = new Vue({ el: '#app-1' })\nconst app2 = new Vue({ el: '#app-2' })\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("显然，这并不是我们想要的。在 Vue3 中，你可以创建多个实例，且每个实例都可以拥有单独的配置。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import { createApp } from 'vue'\nimport App1 from './App1.vue'\nimport App2 from './App2.vue'\n\nconst app1 = createApp(App1)\nconst app2 = createApp(App2)\n\napp1.mount('#app-1')\napp2.mount('#app-2')\n\napp1.directive('...', {\n  ...\n})\napp2.directive('...', {\n  ...\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("但是，这也并不影响我们设置共享全局配置，我们可以通过如下工厂函数方式实现：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import { createApp } from 'vue';\nimport App1 from './App1.vue';\nimport App2 from './App2.vue';\n\nconst createApp = (Instance) => {\n    const App = createApp(Instance);\n  App.directive('i-am-cool', {\n      inserted: () => {\n      console.log('I am cool!');\n    },\n  });\n}\n\ncreateIdolApp(App1).mount('#app-1');\ncreateIdolApp(App2).mount('#app-2');\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h2",{attrs:{id:"composition-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#composition-api"}},[s._v("#")]),s._v(" Composition API")]),s._v(" "),n("p",[s._v("受到 React 的启发，Vue3 引入 Composition API 和 “hook” 函数。有了它，Vue 组件的使用变得更加灵活，也变得更加强大。特别是针对大型应用，以下会给出示例。")]),s._v(" "),n("p",[s._v("以前在 Vue2 中我们是这样写组件的：获取数据，设置数据。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<script>\nimport { fetchResources } from '@/actions'\nimport ResourceDetail from '@/components/ResourceDetail'\nimport ResourceList from '@/components/ResourceList'\nexport default {\n  components: {\n    ResourceDetail,\n    ResourceList,\n  },\n  data() {\n    return {\n      title: 'Your resources',\n      selectedResource: null,\n      resources: []\n    }\n  },\n  async created() {\n    this.resources = await fetchResources()\n  },\n  computed: {\n    hasResources() {\n      return this.resourceCount > 0\n    },\n    activeResource() {\n      return this.selectedResource || (this.hasResources && this.resources[0]) || null\n    },\n    resourceCount(){\n      return this.resources.length\n    }\n  },\n  methods: {\n    selectResource(resource) {\n      this.selectedResource = {...resource}\n    }\n  }\n}\n<\/script>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("p",[s._v("完整代码在"),n("a",{attrs:{href:"https://github.com/Jerga99/vue-3-updates/blob/3e94f1bc8ae1d8032cc82f5be6100a446a4d3d04/src/ResourceApp.vue",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("p",[s._v("如果我们使用 composition API，会是这样写：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import { ref, onMounted, computed } from 'vue'\nimport { fetchResources } from '@/actions'\n\nexport default function useResources() {\n  const resources = ref([])\n  const getResources = async () => resources.value = await fetchResources()\n\n  onMounted(getResources);\n\n  const resourceCount = computed(() => resources.value.length)\n  const hasResources = computed(() => resourceCount.value > 0 )\n\n  return {\n    resources,\n    resourceCount,\n    hasResources\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("这是一个非常简单的 Composition function 实现了获取 resources 数据的功能。")]),s._v(" "),n("p",[s._v("Composition 函数通常用 "),n("strong",[s._v("use")]),s._v(" 开头作为关键字，比如此处的 "),n("strong",[s._v("“useResources”")]),s._v("，以此区别于普通函数。")]),s._v(" "),n("p",[s._v("下面针对以上代码关键点进行一一释义：")]),s._v(" "),n("p",[n("strong",[s._v("1.")]),s._v(" "),n("strong",[s._v("ref")]),s._v(" 会创建一个动态对象。如果你要从 ref 获取原始值，则需要取 “value” 属性，比如 —— resources.value")]),s._v(" "),n("p",[s._v("看以下示例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var a = 7;\nvar b = a;\nb = 10;\n// a = 7\n// b = 10\n\nvar a = ref(7);\nvar b = a;\nb.value = 100;\n// a = 100\n// b = 100\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("我们将返回的 resoure 数组设置为 ref。是因为如果数组有新增项或移除项，这样做能在程序中有所表现。")]),s._v(" "),n("p",[s._v("一图胜万言：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7e4c24c2cee46b585ecd5b18f877ee1~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),s._v(" "),n("p",[n("strong",[s._v("2.")]),s._v(" "),n("strong",[s._v("getResources")]),s._v(" 函数用于获取数据。")]),s._v(" "),n("p",[n("strong",[s._v("3.")]),s._v(" "),n("strong",[s._v("onMounted")]),s._v(" 生命周期函数会在组件添加到 Dom 时调用。")]),s._v(" "),n("p",[n("strong",[s._v("4.")]),s._v(" "),n("strong",[s._v("computed")]),s._v(" 属性会随着它的依赖（resources or resourceCount）变化而重新计算。")]),s._v(" "),n("p",[n("strong",[s._v("5.")]),s._v(" "),n("strong",[s._v("return")]),s._v(" 最后一步我们将返回 data/function，我们再向组件暴露 useResource hook 函数以供使用。")]),s._v(" "),n("p",[s._v("最终 hook-in：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<script>\nimport ResourceDetail from '@/components/ResourceDetail'\nimport ResourceList from '@/components/ResourceList'\nimport useResources from '@/composition/useResources';\nexport default {\n  components: {\n    ResourceDetail,\n    ResourceList,\n  },\n  data() {\n    return {\n      title: 'Your resources',\n      selectedResource: null\n    }\n  },\n  setup() {\n    return {\n      ...useResources() // 在 setup 里\n    }\n  },\n  computed: {\n    activeResource() {\n      return this.selectedResource || (this.hasResources && this.resources[0]) || null\n    }\n  },\n  methods: {\n    selectResource(resource) {\n      this.selectedResource = {...resource}\n    }\n  }\n}\n<\/script>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("p",[s._v("我们再 setup 中进行引用，返回值都可以再通过 this 进行调用。")]),s._v(" "),n("p",[s._v("我们在 computed 和 methods 也能同样进行调用 Composition 函数的返回。")]),s._v(" "),n("blockquote",[n("p",[s._v("注意：setup 钩子函数执行在组件实例创建（created）之前。")])]),s._v(" "),n("p",[s._v("在组件创建前 setup 中 hook 被执行，只要 props 被解析，服务就会以 composition API 作为入口。因为此时当 setup 执行时，组件实例还未生成，没有 this 对象。")]),s._v(" "),n("p",[s._v("神奇吗？我们就这样将获取数据进行封装然后应用到了 hook 调用中。")]),s._v(" "),n("p",[s._v("再写一个对 resources 资源进行搜索过滤的功能：")]),s._v(" "),n("ul",[n("li",[s._v("useSearchResource")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import { ref, computed } from 'vue'\n\nexport default function useSearchResource(resources) {\n  const searchQuery = ref('')\n\n  const setSearchQuery = searched => {\n    searchQuery.value = searched\n  }\n\n  const searchedResources = computed(() => {\n    if (!searchQuery.value) {\n      return resources.value\n    }\n\n    const lcSearch = searchQuery.value.toLocaleLowerCase();\n\n    return resources.value.filter(r => {\n      const title = r?.title.toLocaleLowerCase()\n      return title.includes(lcSearch)\n    })\n  })\n\n  return {\n    setSearchQuery,\n    searchedResources\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("ul",[n("li",[s._v("useResources")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export default function useResources() {\n  const resources = ref([])\n  const getResources = async () => resources.value = await fetchResources()\n\n  onMounted(getResources);\n\n  const resourceCount = computed(() => resources.value.length)\n  const hasResources = computed(() => resourceCount.value > 0 )\n\n  const { searchedResources, setSearchQuery } = useSearchResources(resources)\n\n  return {\n    resources: searchedResources,\n    resourceCount,\n    hasResources,\n    setSearchQuery\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("拆解分析：")]),s._v(" "),n("ol",[n("li",[n("strong",[s._v("searchQuery")]),s._v(" 包含一个空字符串，使用了 ref，computed searchedResources 可以检测 searchQuery 的变化值。")]),s._v(" "),n("li",[n("strong",[s._v("setSearchQuery")]),s._v(" 是一个简单的赋值给 searchQuery 的函数。")]),s._v(" "),n("li",[n("strong",[s._v("searchedResources")]),s._v("会在 searchQuery 或 resources 变化的时候触发。")]),s._v(" "),n("li",[n("strong",[s._v("searchedResources")]),s._v(" 负责过滤 resources。每个 resource 包含一个 title，如果 title 包含 searchedQuery 字符串，那么 resource 就会被加入到 searchedResources 数组中。")]),s._v(" "),n("li",[s._v("最后函数返回 "),n("strong",[s._v("setSearchQuery")]),s._v(" 和 "),n("strong",[s._v("searchedResourced")]),s._v("，再在 useResources 中进行引用及返回。")])]),s._v(" "),n("p",[s._v("再看下在组件中使用它到底有多简单：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n...\n<input\n  @keyup="handleSearch"\n  type="text"\n  class="form-control"\n  placeholder="Some title" />\n...\n</template>\n<script>\n...\nmethods: {\n  ...\n  handleSearch(e) {\n    this.setSearchQuery(e.target.value)\n  }\n}\n...\n<\/script>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[n("strong",[s._v("真有你的！")]),s._v(" 无论何时执行 setSearchQuery 更改 searchQuery 的值，都将重新执行 searchedResources 将其进行过滤操作并返回结果。")]),s._v(" "),n("p",[s._v("以上便是超重要的新特性 composition API 的实战介绍。")]),s._v(" "),n("h2",{attrs:{id:"data-选项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#data-选项"}},[s._v("#")]),s._v(" Data 选项")]),s._v(" "),n("p",[s._v("在 Vue2 中，data选项不是对象就函数，但是在 Vue3 中将只能是函数。这将被统一成标准。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<script>\n  export default {\n    data() {\n      return {\n        someData: '1234'\n      }\n    }\n  }\n<\/script>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"filters-被移除"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#filters-被移除"}},[s._v("#")]),s._v(" Filters 被移除")]),s._v(" "),n("p",[s._v("不会再出现这样的写法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<h1>{{title | capitalized }} </h1>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这样的表达式不是合法有效的 Javascript，在 Vue 中实现这样的写法需要额外的成本。它可以很容易被转化为计算属性或函数。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("computed: {\n capitalizedTitle() {\n   return title[0].toUpperCase + title.slice(1);\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"多个根标签"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多个根标签"}},[s._v("#")]),s._v(" 多个根标签")]),s._v(" "),n("p",[s._v("在 Vue2 中我们经常这样包裹我们的根标签：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n  <div>\n    <h1>...</h1>\n    <div class="container">...</div>\n    ...\n  </div>\n</template>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("在 Vue3 中将不再有此限制：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n  <h1>...</h1>\n  <div class="container">...</div>\n  ...\n</template>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"suspense"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#suspense"}},[s._v("#")]),s._v(" Suspense")]),s._v(" "),n("p",[s._v("Suspense 是一种特殊的 Vue 组件，用于解析有异步数据的组件。")]),s._v(" "),n("p",[s._v("比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<Suspense>\n  <template #default>\n    <AsyncComponent>\n  </template>\n  <template #fallback>\n    Loading Data...\n  </template>\n</Suspense>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("使用新的 Composition API，setup 可设置异步函数。Suspense 可以展示异步的模板直到 setup 被解析完。")]),s._v(" "),n("p",[s._v("实战代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<template>\n  Welcome, {{user.name}}\n</template>\n<script>\n  import { fetchUser } from '@/actions';\n  export default {\n    async setup() {\n      const user = await fetchUser();\n      return { user }\n    }\n  }\n<\/script>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<Suspense>\n  <template #default>\n    <UserPanel/>\n  </template>\n  <template #fallback>\n    Loading user ...\n  </template>\n</Suspense>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"响应式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#响应式"}},[s._v("#")]),s._v(" 响应式")]),s._v(" "),n("p",[s._v("妇孺皆知，Vue3 的响应式也有很大变化（proxy），不再需要使用 Vue.set 或 Vue.delete。你可以使用简单的原生函数来操作数组或对象。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// in composition API\nconst resources = ref([])\nconst addResource = newResource =>      resources.value.unshift(newResource)\nconst removeResource = atIndex => resources.value.splice(atIndex ,1)\nconst reactiveUser = ref({name: 'Filip'})\nconst changeName = () => reactiveUser.value.name = 'John'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("以前则是需要这样：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<script>\nexport default {\n  data() {\n    return {\n      resources: [1,2,3],\n      person: { name: 'Filip' }\n    }\n  }\n  methods: {\n    addResource(newResource) {\n      this.resources.unshift(newResource)\n    },\n    removeResource(atIndex) {\n      this.resources.splice(atIndex ,1)\n    },\n    changeName(newResource) {\n      this.person.name = 'John'\n    }\n  }\n}\n<\/script>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("在 composition API 中，所有的更改都是响应式的。")]),s._v(" "),n("h2",{attrs:{id:"多个-v-model"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多个-v-model"}},[s._v("#")]),s._v(" 多个 v-model")]),s._v(" "),n("p",[s._v("在 Vue3 中，你可以使用多个 v-model，比如这样：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<ChildComponent v-model:prop1="prop1" v-model:prop2="prop2"/>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("可以实现以下代码逻辑：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<ChildComponent\n  :prop1="prop1"\n  @update:prop1="prop1 = $event"\n  :prop2="prop2"\n  @update:prop2="prop2 = $event"\n/>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("看一个具体的例子：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<resource-form\n  v-model:title="title"\n  v-model:description="description"\n  v-model:type="type"\n  v-model:link="link"\n  @on-form-submit="submitForm"\n/>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("form 组件是这样：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n  <form>\n    <div class="mb-3">\n      <label htmlFor="title">Title</label>\n      <input\n        :value="title"\n        @input="changeTitle($event.target.value)"\n        type="text" />\n    </div>\n    <div class="mb-3">\n      <select\n        :value="type"\n        @change="changeType($event.target.value)">\n        <option\n          v-for="type in types"\n          :key="type"\n          :value="type">{{type}}</option>\n      </select>\n    </div>\n    <button\n      @click="submitForm"\n      class="btn btn-primary btn-lg btn-block"\n      type="button">\n      Submit\n    </button>\n  </form>\n</template>\nexport default {\n  props: {\n    title: String,\n    description: String,\n    link: String,\n    type: String,\n  },\n  data() {\n    return {\n      types: [\'blog\', \'book\', \'video\']\n    }\n  },\n  methods: {\n    submitForm() {\n      this.$emit(\'on-form-submit\');\n    },\n    changeTitle(title) {\n      this.$emit(\'update:title\', title)\n    },\n    changeType(type) {\n      this.$emit(\'update:type\', type)\n    }\n    ...\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br")])]),n("p",[s._v("我们绑定多个 input 值，监听变化，再emit 来更新值父组件的值。注意这里写法的格式。")]),s._v(" "),n("h2",{attrs:{id:"teleport"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#teleport"}},[s._v("#")]),s._v(" Teleport")]),s._v(" "),n("p",[s._v("提供如何在当前上下文之外只呈现模板的一部分的方法。")]),s._v(" "),n("p",[s._v("要“teleport”内容，我们需要使用 teleport 组件并把内容包在里面，如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<teleport to="#teleportContent">\n  <div class="teleport-body">I am Teleported!</div>\n</teleport>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("此内容将被传送到 id 为 teleportContent 的节点中")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<div id="teleportContent"></div>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("唯一的条件是：在定义传送内容之前，传送到的目标节点需已经存在。")]),s._v(" "),n("p",[s._v("我们可以绑定 id，类，[data-xx]。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\x3c!-- ok --\x3e\n<teleport to="#some-id" />\n<teleport to=".some-class" />\n<teleport to="[data-teleport]" />\n\n\x3c!-- Wrong --\x3e\n<teleport to="h1" />\n<teleport to="some-string" />\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"vue-router"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-router"}},[s._v("#")]),s._v(" Vue Router")]),s._v(" "),n("p",[s._v("Vue2 中我们这样设置及绑定路由：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import Vue from 'vue'\nimport VueRouter from 'vue-router';\n\nimport SomePage1 from './pages/SomePage1';\nimport SomePage2 from './pages/SomePage2';\n\nVue.use(VueRouter);\n\nconst routes = [\n  { path: '/', redirect: '/path' },\n  { path: '/path', name: 'HomePage', component: SomePage1 },\n  { path: '/some/path', component: SomePage2 }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  linkExactActiveClass: 'active',\n  routes\n})\n\nexport default router;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("main.js")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import router from './router'; \nnew Vue({render: h => h(App),  \n  router,  \n  components: { App }})\n.$mount('#app')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("在 Vue3 中：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import { createRouter, createWebHistory } from 'vue-router'\nimport SomePage1 from './pages/SomePage1'\nimport SomePage2 from './pages/SomePage2'\n\nconst routes = [\n  { path: '/', redirect: {name: 'HomePage'}},\n  { path: '/path', name: 'HomePage', component: SomePage1 },\n  { path: '/some/path', component: SomePage2 }\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  linkExactActiveClass: 'active',\n  routes\n})\n\nexport default router;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("main.js")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import router from './router'\nconst app = createApp(App)\napp.use(router)\napp.mount('#app')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("p",[s._v("此篇总结了 Vue3 的一些主要功能，都是从实战出发来突破 Vue3 的新特性。实践是检验真理的唯一标准！Vue3 究竟强不强？有多强？市场和时间会告诉我们答案！从现阶段看，早学早享受QAQ~如果想要了解更多，请查阅 "),n("a",{attrs:{href:"https://v3.vuejs.org/guide/introduction.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("p",[s._v("我是掘金安东尼，持续输出ING......点赞👍 + 收藏📕 + 关注👀，我们下期再会~")])])}),[],!1,null,null,null);e.default=t.exports}}]);