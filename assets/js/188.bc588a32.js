(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{685:function(e,n,t){"use strict";t.r(n);var s=t(2),a=Object(s.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("一起养成写作习惯！这是我参与「掘金日新计划 · 4 月更文挑战」的第7天，"),t("a",{attrs:{href:"https://juejin.cn/post/7080800226365145118",title:"https://juejin.cn/post/7080800226365145118",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击查看活动详情"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("本篇带来 5 个 “罕见的” JavaScriot 原生 API，谁还不是个 API 调用大师呢？🐶")]),e._v(" "),t("p",[e._v("闲言少叙，开冲~~")]),e._v(" "),t("h2",{attrs:{id:"window-getcomputedstyle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#window-getcomputedstyle"}},[e._v("#")]),e._v(" window.getComputedStyle()")]),e._v(" "),t("p",[t("code",[e._v("window.getComputedStyle()")]),e._v("方法返回一个 "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration",target:"_blank",rel:"noopener noreferrer"}},[e._v("CSSStyleDeclaration"),t("OutboundLink")],1),e._v(" 对象，与 style 属性的类型相同，其中包含元素的计算样式；")]),e._v(" "),t("p",[e._v("用法如下：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("document.defaultView.getComputedStyle(element, [pseudo-element])\n\n// or\nwindow.getComputedStyle(element, [pseudo-element])\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("它有两个参数，第一个是计算样式的元素，第二个是伪元素；若伪元素不存在，则传 null；")]),e._v(" "),t("p",[e._v("看例子就明白了：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("<!DOCTYPE html>\n<html>\n\n<head>\n    <style type=\"text/css\">\n        #root {\n            background-color: pink;\n            width: 100px;\n            height: 200px;\n        }\n\n        #root::after {\n            content: 'Haskell';\n            display: table;\n            clear: both;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"root\" style=\"background-color: rgb(135, 206, 235);\"></div>\n</body>\n<script>\n    function getStyleByAttr(node, name) {\n        return window.getComputedStyle(node, null)[name]\n    }\n\n    const node = document.getElementById('root')\n\n    // rgb(135, 206, 235)\n    console.log(getStyleByAttr(node, 'backgroundColor'))\n\n    // 100px\n    console.log(getStyleByAttr(node, 'width'))\n\n    // 200px\n    console.log(getStyleByAttr(node, 'height'))\n\n    // table\n    console.log(window.getComputedStyle(node, '::after').display)\n\n    // Haskell\n    console.log(window.getComputedStyle(node, '::after').content)\n<\/script>\n\n</html>\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br"),t("span",{staticClass:"line-number"},[e._v("18")]),t("br"),t("span",{staticClass:"line-number"},[e._v("19")]),t("br"),t("span",{staticClass:"line-number"},[e._v("20")]),t("br"),t("span",{staticClass:"line-number"},[e._v("21")]),t("br"),t("span",{staticClass:"line-number"},[e._v("22")]),t("br"),t("span",{staticClass:"line-number"},[e._v("23")]),t("br"),t("span",{staticClass:"line-number"},[e._v("24")]),t("br"),t("span",{staticClass:"line-number"},[e._v("25")]),t("br"),t("span",{staticClass:"line-number"},[e._v("26")]),t("br"),t("span",{staticClass:"line-number"},[e._v("27")]),t("br"),t("span",{staticClass:"line-number"},[e._v("28")]),t("br"),t("span",{staticClass:"line-number"},[e._v("29")]),t("br"),t("span",{staticClass:"line-number"},[e._v("30")]),t("br"),t("span",{staticClass:"line-number"},[e._v("31")]),t("br"),t("span",{staticClass:"line-number"},[e._v("32")]),t("br"),t("span",{staticClass:"line-number"},[e._v("33")]),t("br"),t("span",{staticClass:"line-number"},[e._v("34")]),t("br"),t("span",{staticClass:"line-number"},[e._v("35")]),t("br"),t("span",{staticClass:"line-number"},[e._v("36")]),t("br"),t("span",{staticClass:"line-number"},[e._v("37")]),t("br"),t("span",{staticClass:"line-number"},[e._v("38")]),t("br"),t("span",{staticClass:"line-number"},[e._v("39")]),t("br"),t("span",{staticClass:"line-number"},[e._v("40")]),t("br"),t("span",{staticClass:"line-number"},[e._v("41")]),t("br"),t("span",{staticClass:"line-number"},[e._v("42")]),t("br"),t("span",{staticClass:"line-number"},[e._v("43")]),t("br"),t("span",{staticClass:"line-number"},[e._v("44")]),t("br"),t("span",{staticClass:"line-number"},[e._v("45")]),t("br"),t("span",{staticClass:"line-number"},[e._v("46")]),t("br")])]),t("h2",{attrs:{id:"getboundingclientrect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getboundingclientrect"}},[e._v("#")]),e._v(" "),t("strong",[t("strong",[e._v("getBoundingClientRect()")])])]),e._v(" "),t("p",[e._v("该"),t("code",[e._v("Element.getBoundingClientRect()")]),e._v("方法返回一个 "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/DOMRect",target:"_blank",rel:"noopener noreferrer"}},[e._v("DOMRect"),t("OutboundLink")],1),e._v(" 对象，该对象提供元素大小及其相对于"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Glossary/Viewport",target:"_blank",rel:"noopener noreferrer"}},[e._v("视口"),t("OutboundLink")],1),e._v("的位置信息；")]),e._v(" "),t("p",[e._v("用法如下：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("domRect = element.getBoundingClientRect();\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("返回元素的 left, top, right, bottom, x, y, width, and height 值；")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc7fca56726943a4b4bed39e8de8213a~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),e._v("\n比如说要获得 DOM 元素相对于网页左上角的定位距离 top 和 left 的值：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('const h3 = document.querySelector("h3");\nconst rect = h3.getBoundingClientRect();\nconst topElement = document.documentElement;\n\nconst positionTop = topElement.scrollTop + rect.top;\nconst positionLeft = topElement.scrollLeft + rect.left;\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("h2",{attrs:{id:"once-true"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#once-true"}},[e._v("#")]),e._v(" once: true")]),e._v(" "),t("p",[e._v("once: true 可不是 API，它长得也不像 API，它是用来做属性配置的，有了它，再也不用 lodash 的once 了；")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("const container = document.querySelector<HTMLDivElement>('.container');\n\ncontainer?.addEventListener('click', () => {\n  console.log('I will only do it once !')\n}, {\n  // 配置 once 后，最多调用一次\n  once: true\n})\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("p",[e._v("哇！原来 JS 就一直自带，你知道吗？")]),e._v(" "),t("h2",{attrs:{id:"clipboard-readtext"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#clipboard-readtext"}},[e._v("#")]),e._v(" clipboard.readText()")]),e._v(" "),t("p",[e._v("粘贴板，想必是常见要用功能吧~")]),e._v(" "),t("p",[e._v("要从剪贴板读取文本，调用 "),t("code",[e._v("navigator.clipboard.readText()")]),e._v("并等待返回的 Promise 以进行解析：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("async function getClipboardContents() {\n  try {\n    const text = await navigator.clipboard.readText();\n    console.log('Pasted content: ', text);\n  } catch (err) {\n    console.error('Failed to read clipboard contents: ', err);\n  }\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("p",[e._v("而要将文本复制到剪贴板，则是调用 "),t("code",[e._v("writeText()")])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("async function copyPageUrl() {\n  try {\n    await navigator.clipboard.writeText(location.href);\n    console.log('Page URL copied to clipboard');\n  } catch (err) {\n    console.error('Failed to copy: ', err);\n  }\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("h2",{attrs:{id:"getmodifierstate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getmodifierstate"}},[e._v("#")]),e._v(" "),t("strong",[e._v("getModifierState()")])]),e._v(" "),t("p",[e._v("如果按下或激活指定的修改键，"),t("strong",[e._v("getModifierState()")]),e._v(" 方法会返回true。")]),e._v(" "),t("p",[e._v("我们可以借助它，比如监听用户输入的时候是否按大小切换键，再根据情况给出合适的提示；")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<input type="text" size="40" onkeydown="myFunction(event)">\n\n<p id="demo"></p>\n\n<script>\n    function myFunction(event) {\n        var x = event.getModifierState("CapsLock");\n        document.getElementById("demo").innerHTML = "大写锁定激活: " + x;\n    }\n<\/script>\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br")])]),t("hr"),e._v(" "),t("p",[e._v("ＯＫ，以上就是本篇分享，你“学废”了吗？")]),e._v(" "),t("blockquote",[t("p",[e._v("我是掘金安东尼，输出暴露输入，技术洞见生活。")])])])}),[],!1,null,null,null);n.default=a.exports}}]);