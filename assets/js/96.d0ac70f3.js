(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{590:function(s,e,n){"use strict";n.r(e);var a=n(2),r=Object(a.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("【注释】从技术上来说没有对错，理论上，你想怎么写就怎么写，你爱怎么写就怎么写！但它确实也会对我们造成影响，尤其是在多人协同开发的系统中。杂乱的注释也会让你或你的队友头疼~")]),s._v(" "),n("p",[s._v("所以，我们需要规范一下注释。那什么才是好的注释呢？我们先来看看什么是不好的注释！")]),s._v(" "),n("h2",{attrs:{id:"注释冗余"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注释冗余"}},[s._v("#")]),s._v(" 注释冗余")]),s._v(" "),n("p",[s._v("我们往往会写一段注释来说明“这是什么”。比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// Find all the users\nlet users = userHelper.findAll();\n\n// Add score to each user\nusers.forEach((user) => {\n\tuser.score++;\n}\n\t\t\t\t\t\t\n// Return the users\nreturn users;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("但是这段代码本身的意思就很清楚了，再附上注释就有点多余了。")]),s._v(" "),n("p",[s._v("所以我们应该将其剔除。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("let users = userHelper.findAll();\n\nusers.forEach((user) => {\n\tuser.score++;\n}\n\t\t\t\t\t\t\nreturn users;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("那么，这段代码是不是更方便阅读了呢？其实，咱们还能更进一步：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("let users = userHelper.findAll();\nuserHelper.incrementScoreForAll(users);\t\t\t\t\t\t\nreturn users;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("这样你感觉如何？相比于最开始的那段代码，这段简直就是"),n("strong",[s._v("看得舒舒服服")]),s._v("。")]),s._v(" "),n("blockquote",[n("p",[s._v("所以，可读的代码比可读的注释更重要。优先考虑让你的代码说话，实在不行，再附上简短、清晰的注释。")])]),s._v(" "),n("h2",{attrs:{id:"注释未更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注释未更新"}},[s._v("#")]),s._v(" 注释未更新")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// Find all users\nlet users = userHelper.findBanned();\n\n// Give each user 100 extra score\nusers.forEach((user) => {\n\tuser.score = 0;\n}\n\nreturn users;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("我们有时候会发现注释和代码并不匹配，比如这里为用户设置分数的操作。代码中是 0 分，注释却是 100 分。")]),s._v(" "),n("p",[s._v("导致出现这种情况有多种可能：")]),s._v(" "),n("ol",[n("li",[s._v("我们总是在从其它地方复制代码，有时也会一并复制注释，然后在为己所用的过程中，修改了代码却没有修改对应的注释。")]),s._v(" "),n("li",[s._v("我们同时也在不断的根据产品需求调整代码（比如此处设置分值），修改代码也可能会忘记修改之前写的注释。")])]),s._v(" "),n("p",[s._v("怎么办？让我们来看看优解：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// userHelper.js\nfunction updateScoreForUsers(score, users) {\n  users.forEach((user) => {\n\t  user.score += score;\n  }\n}\n\n// Code 1: punish banned users\nlet users = userHelper.findBanned();\nuserHelper.updateScoreForUsers(users, -100);\nreturn users;\n\n// Code 2: give everybody 1 extra score\nlet users = userHelper.findAll();\nuserHelper.updateScoreForUsers(users, 1);\nreturn users;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("这样写将设置分数的逻辑封装成函数进行了抽离，功能更强了，也更易于阅读了。")]),s._v(" "),n("p",[s._v("现在，我们可以在多种情况下重复调用它，且不必担心注释未及时更新的问题了。")]),s._v(" "),n("h2",{attrs:{id:"注释太长"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注释太长"}},[s._v("#")]),s._v(" 注释太长")]),s._v(" "),n("p",[s._v("请问如果是这样的注释，你还有信心整个完整读下来吗？即使你是一个勇敢坚强的技术人，读下来也会消耗很多时间吧？这样低效率的事肯定不是我们想要的。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// userHelper.js\n/**\n * Mass updates the user score for the given a list of user\n * The score will be updated by the amount given in the parameter score\n * For example, if the parameter score is 5, the users will all receive 5 extra score\n * But if the score is negative, it can also be used. In that case, the score will be decreased by 5.\n * If you set score as 0, then this method will be useless as nothing will be updated.\n * If you set the score as a non number value, the function will not do anything and return false\n * just to ensure the score is not messed up after updating it with a non-number value\n * Try to avoid using non-number values in the score parameter as this should not be used like that\n * If you do however choose to use Infinity in the score argument, it will work, because Infinity is considered as a number in JavaScript\n * If you set the score to Infinity, all the users score will become Inifinity, because n + Infinity where n is a number, will always result in Infinity\n * Regarding the users, make sure this is an array! If it is not an array, we will not process the users score,\n * then our method will simply return false instead and stop processing\n * Also make sure the users array is a list of actual user objects, we do not check this, but make sure the object has all the required fields as expected\n * especially the score object is important in this case.\n * @returns {boolean} Returns true if successful, false if not processed.\n */\nfunction updateScoreForUsers(score, users) {\n  if (isNaN(score) || typeof users !== 'array') { return false; }\n  \n  users.forEach((user) => {\n\t  user.score += score;\n  }\n                \n  return true;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[s._v("所以，请确保你的注释不要太长。有那么多想说的，可以写文档、可以写文章，不要写注释~")]),s._v(" "),n("p",[n("strong",[s._v("简单直接是最迷人的！")])]),s._v(" "),n("h2",{attrs:{id:"注释太短"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注释太短"}},[s._v("#")]),s._v(" 注释太短")]),s._v(" "),n("p",[s._v("这是另一个极端的例子，但是它确实源自于现实的开发项目中。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// userHelper.js\n/**\n * Update score\n * @returns {boolean} result\n */\nfunction updateScoreForUsers(score, users) {\n  if (isNaN(score) || typeof users !== 'array') { return false; }\n  \n  users.forEach((user) => {\n\t  user.score += score;\n  }\n                \n  return true;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("此段代码注释只是说明了返回值，但是更为关键的传参并未作出释义。显得有些尴尬~")]),s._v(" "),n("p",[s._v("如果你决定注释，那就不要只写一半。请尽量准确、完整、干净的将其写出。从长期来看，你一定会从中受益。")]),s._v(" "),n("h2",{attrs:{id:"好的注释"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#好的注释"}},[s._v("#")]),s._v(" 好的注释")]),s._v(" "),n("blockquote",[n("p",[s._v("好的注释就是告诉大家你"),n("strong",[s._v("为什么")]),s._v("要进行注释！")])]),s._v(" "),n("p",[s._v("比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// userHelper.js\nfunction updateScoreForUsers(score, users) {\n  users.forEach((user) => {\n    user.score += score;\n    \n    // VIPs are promised 500 extra score on top\n    if (user.type == 'VIP') {\n      user.score += 500;\n    }\n  }\n                \n  return true;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("此例中我们可以明白 VIP 用户是被产品要求多加 500 分值的。这样其它开发就不会对此产生疑惑。")]),s._v(" "),n("p",[s._v("如果代码由多个团队维护，简单直接的小标注就更为必要了！")]),s._v(" "),n("h2",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("p",[s._v("注释在代码中扮演很重要的角色。本瓜还记得大学老师说：注释应该占代码的三分之一。")]),s._v(" "),n("p",[s._v("我们都有不同的注释习惯，但是也应该有一个基本的指导：")]),s._v(" "),n("ol",[n("li",[s._v("注释应当简短、清晰，长篇大论稍边边。")]),s._v(" "),n("li",[s._v("告诉大家你为什么写这个注释，而不是告诉大家这段代码是什么！“是什么”应该交给代码本身去解释。这个最为关键！")]),s._v(" "),n("li",[s._v("保持你的注释持久维护，也就是记得及时更新和与代码匹配。")]),s._v(" "),n("li",[n("strong",[s._v("代码就是最好的注释。")])])]),s._v(" "),n("p",[s._v("以上！")]),s._v(" "),n("p",[s._v("撰文不易，点赞鼓励。讨论留言，携手向前。"),n("em",[s._v("★,°")]),s._v(":.☆(￣▽￣)/$:"),n("em",[s._v(".°★")]),s._v(" 。")]),s._v(" "),n("p",[s._v("求一波关注，我的公众号：【掘金安东尼】，牛年持续更新~")])])}),[],!1,null,null,null);e.default=r.exports}}]);