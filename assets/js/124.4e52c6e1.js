(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{618:function(s,n,a){"use strict";a.r(n);var e=a(2),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"å‰è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),a("p",[s._v("ã€ç±»ã€‘å’Œã€æ¥å£ã€‘æ˜¯ JavaScript æœªæ¥çš„æ–¹å‘ï¼Œæˆ‘ä»¬çš„ API è°ƒç”¨ä¹Ÿå°†å¦‚æ­¤ï¼Œæœç€è¿™ä¸ªæ–¹å‘å’Œä¸šåŠ¡æ¨¡å—åŒæ­¥åˆ†ç±»ã€åŒæ­¥å‡çº§ã€‚æœ¬æ–‡è®²çš„æ­£æ˜¯ â€”â€” Vue é­”æ³•å¸ˆï¼Œå¦‚ä½•å°† API â€œç±»åŒ–â€ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¸‡ç‰©çš†æ¨¡å—ï¼Œä¸‡ç‰©å¯å½’ç±»ã€‚é—²è¨€å°‘å™ï¼Œç›´æ¥æ­£é¢˜ã€‚")]),s._v(" "),a("h2",{attrs:{id:"åˆ†ç±»-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†ç±»-api"}},[s._v("#")]),s._v(" åˆ†ç±» API")]),s._v(" "),a("ul",[a("li",[s._v("ç¯å¢ƒï¼š Vue2+ æˆ– Vue3+")])]),s._v(" "),a("p",[s._v("å’±è¿™é‡Œç›´æ¥ VueCLI è¿…é€Ÿå¿«æ·æ„å»º")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vue create vue-api-module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å¾—åˆ°å¦‚ä¸‹ç›®å½•")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("--src\n----store\n------index.js\n----App.vue\n----main.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ç„¶åæ–°å»ºæ–‡ä»¶ api.js å¦‚ä¸‹ï¼Œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("--src\n----services\n------api.js\n----store\n------index.js\n----App.vue\n----main.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"åŸºç¡€ç±»-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€ç±»-api"}},[s._v("#")]),s._v(" åŸºç¡€ç±» API")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåŸºç¡€ç±»å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class BaseApiService {\n  baseUrl = "https://jsonplaceholder.typicode.com";\n  resource;\n\n  constructor(resource) {\n    if (!resource) throw new Error("Resource is not provided");\n    this.resource = resource;\n  }\n\n  getUrl(id = "") {\n    return `${this.baseUrl}/${this.resource}/${id}`;\n  }\n\n  handleErrors(err) {\n    // å¤„ç†é”™è¯¯ï¼š\n    console.log({ message: "Errors is handled here", err });\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("ul",[a("li",[s._v("baseUrlï¼šè®¾ç½®è¯·æ±‚æ ¹è·¯å¾„ï¼›")]),s._v(" "),a("li",[s._v("resourceï¼šæ¥æºï¼›")]),s._v(" "),a("li",[s._v("getUrlï¼šè·å–é“¾æ¥å‡½æ•°ï¼ŒåŒ…å« baseUrlã€resourceã€idï¼›")]),s._v(" "),a("li",[s._v("handleErrorsï¼šå¤„ç†é”™è¯¯å‡½æ•°ï¼›")])]),s._v(" "),a("h3",{attrs:{id:"åªè¯»ç±»-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åªè¯»ç±»-api"}},[s._v("#")]),s._v(" åªè¯»ç±» API")]),s._v(" "),a("p",[s._v("ç„¶åï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªå­ç±»ï¼šåŒ…å« fetchã€get åªè¯»æ–¹æ³•ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class ReadOnlyApiService extends BaseApiService {\n  constructor(resource) {\n    super(resource);\n  }\n  async fetch(config = {}) {\n    try {\n      const response = await fetch(this.getUrl(), config);\n      return await response.json();\n    } catch (err) {\n      this.handleErrors(err);\n    }\n  }\n  async get(id) {\n    try {\n      if (!id) throw Error("Id ä¸åˆæ³•");\n      const response = await fetch(this.getUrl(id));\n      return await response.json();\n    } catch (err) {\n      this.handleErrors(err);\n    }\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ul",[a("li",[s._v("fetchï¼šè·å–æ•°æ®ï¼›")]),s._v(" "),a("li",[s._v("getï¼šé€šè¿‡ id è·å–æ•°æ®ï¼›")])]),s._v(" "),a("h3",{attrs:{id:"å†™å…¥ç±»-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å†™å…¥ç±»-api"}},[s._v("#")]),s._v(" å†™å…¥ç±» API")]),s._v(" "),a("p",[s._v("æ¥ç€ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªåŒ…å«å¯è¯»å†™æ–¹æ³•çš„å­ç±»ï¼špostã€putã€delete")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class ModelApiService extends ReadOnlyApiService {\n  constructor(resource) {\n    super(resource);\n  }\n  async post(data = {}) {\n    try {\n      const response = await fetch(this.getUrl(), {\n        method: "POST",\n        body: JSON.stringify(data)\n      });\n      const { id } = response.json();\n      return id;\n    } catch (err) {\n      this.handleErrors(err);\n    }\n  }\n  async put(id, data = {}) {\n    if (!id) throw Error("Id ä¸åˆæ³•");\n    try {\n      const response = await fetch(this.getUrl(id), {\n        method: "PUT",\n        body: JSON.stringify(data)\n      });\n      const { id: responseId } = response.json();\n      return responseId;\n    } catch (err) {\n      this.handleErrors(err);\n    }\n  }\n  async delete(id) {\n    if (!id) throw Error("Id ä¸åˆæ³•");\n    try {\n      await fetch(this.getUrl(id), {\n        method: "DELETE"\n      });\n      return true;\n    } catch (err) {\n      this.handleErrors(err);\n    }\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])]),a("ul",[a("li",[s._v("postï¼šåˆ›å»ºæ•°æ®ï¼›")]),s._v(" "),a("li",[s._v("putï¼šæ›´æ–°æ•°æ®ï¼›")]),s._v(" "),a("li",[s._v("deleteï¼šåˆ é™¤æ•°æ®ï¼›")])]),s._v(" "),a("h3",{attrs:{id:"ç»§æ‰¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»§æ‰¿"}},[s._v("#")]),s._v(" ç»§æ‰¿")]),s._v(" "),a("p",[s._v("è®©æˆ‘ä»¬çœ‹çœ‹ä¸¤ä¸ªç®€å•çš„ç»§æ‰¿ç¤ºä¾‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class UsersApiService extends ReadOnlyApiService {\n  constructor() {\n    super("users");\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class PostsApiService extends ModelApiService {\n  constructor() {\n    super("posts");\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ã€UsersApiService ç±»ã€‘ç»§æ‰¿äº†åªè¯»ç±» API â€”â€” ReadOnlyApiServiceï¼Œå¯ä»¥ä½¿ç”¨ fetchã€get ä¸¤ç§æ–¹æ³•ã€‚è€Œ ã€PostsApiService ç±»ã€‘ç»§æ‰¿äº†è¯»å†™ç±» API â€”â€” ModelApiServiceï¼Œå¯ä»¥ä½¿ç”¨ fetchã€getã€postã€putã€delete äº”ç§æ–¹æ³•ã€‚")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡æ¥å†™ç»§æ‰¿ API ç±»:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class AlbumsApiService extends ModelApiService {\n  constructor() {\n    super("albums");\n  }\n  async uploadImage() {\n    /*\n    è¿™é‡Œå¯ä»¥å†™ä½ çš„ä¸Šä¼ å›¾ç‰‡é€»è¾‘\n     */\n    console.log({ message: "å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼" });\n    return true;\n  }\n\n  async triggerError() {\n    try {\n      throw Error(" API æ¨¡å—è°ƒç”¨é”™è¯¯ï¼");\n    } catch (err) {\n      this.handleErrors(err);\n    }\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"å¯¼å‡º"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¼å‡º"}},[s._v("#")]),s._v(" å¯¼å‡º")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬åœ¨ api.js å¯¼å‡ºè¿™äº› APIï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export const $api = {\n  users: new UsersApiService(),\n  posts: new PostsApiService(),\n  albums: new AlbumsApiService()\n};\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"åˆ†ç±»-api-å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†ç±»-api-å®è·µ"}},[s._v("#")]),s._v(" åˆ†ç±» API å®è·µ")]),s._v(" "),a("p",[s._v("åœ¨ Vue é¡¹ç›®ä¸­å¦‚ä½•è°ƒç”¨ä»¥ä¸Šçš„ API ç±»ï¼Ÿæˆ‘ä»¬ä¸»è¦åœ¨ Vuex å’Œ components ä¸­è°ƒç”¨å®ƒï¼š")]),s._v(" "),a("h3",{attrs:{id:"storeplugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storeplugins"}},[s._v("#")]),s._v(" storePlugins")]),s._v(" "),a("ol",[a("li",[s._v("å…ˆåˆ›å»ºä¸€ä¸ª storePlugins.jsï¼š")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("--src\n----plugins\n------storePlugins.js\n----services\n------api.js\n----store\n------index.js\n----App.vue\n----main.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("åœ¨ storePlugins.js ä¸­å¼•å…¥ api.jsï¼š")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import { $api } from "@/services/api";\n\nexport default function(store) {\n  try {\n    store.$api = $api;\n  } catch (e) {\n    console.error(e);\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("åœ¨ src/store/index.js ä¸­å¼•å…¥è¯¥æ’ä»¶ï¼š")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('...\nimport storePlugins from "@/plugins/storePlugins";\n...\nexport default new Vuex.Store({\n  plugins: [storePlugins],\n  state: {\n  ...\n});\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"mixins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mixins"}},[s._v("#")]),s._v(" mixins")]),s._v(" "),a("ol",[a("li",[s._v("åˆ›å»º mixins.js åœ¨å¦‚ä¸‹ä½ç½®ï¼š")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("--src\n----plugins\n------mixins.js\n------storePlugins.js\n----services\n------api.js\n----store\n------index.js\n----App.vue\n----main.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[s._v("mixin.jsï¼š")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import Vue from "vue";\nimport { $api } from "@/services/api";\n\nVue.mixin({\n  computed: {\n    $api: () => $api\n  }\n});\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("main.js å…¨å±€å¼•å…¥ mixinsï¼š")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('...\nimport "@/plugins/mixins";\n...\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"è°ƒç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨"}},[s._v("#")]),s._v(" è°ƒç”¨")]),s._v(" "),a("p",[s._v("OKï¼ç°åœ¨ä½ å°±å¯ä»¥åœ¨ store å’Œ components ä¸­è°ƒç”¨äº†ï¼Œä¾‹å¦‚ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("this.$api.{resource}.{method}\n------\nthis.$api.users.fetch({})\nthis.$api.users.get(1)\nthis.$api.posts.post(post)\nthis.$api.posts.put(post)\nthis.$api.posts.delete(1)\nthis.$api.albums.uploadImage()\nthis.$api.albums.triggerError()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"ç¤ºä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹"}},[s._v("#")]),s._v(" ç¤ºä¾‹")]),s._v(" "),a("p",[s._v("å¯æœ¬åœ°è°ƒè¯•~")]),s._v(" "),a("ul",[a("li",[s._v("components ä¸­")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<template>\n  <div id="app">\n    <h1>Vue API â€œç±»åŒ–â€ ç¤ºä¾‹</h1>\n    <p>è¯·æ‰“å¼€æ§åˆ¶å°</p>\n    <p>æ£€æŸ¥ Vuex store</p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: "App",\n  async created() {\n    // è·å–ç”¨æˆ·èµ„æ–™\n    await this.$store.dispatch("fetchUsers");\n    const users = await this.$api.users.fetch({});\n    console.log({ message: "Users from the component", users });\n    // æ ¹æ® id è·å–ç”¨æˆ·èµ„æ–™\n    const user = await this.$api.users.get(1);\n    console.log({ message: "User with id: 1", user });\n    // åˆ›å»ºæ–°æ–‡ç« \n    let post = {\n      userId: 1,\n      title: "æµ‹è¯•æ–‡ç« ",\n      body:\n        "è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« "\n    };\n    await this.$store.dispatch("createPost", post);\n    // æ›´æ–°æ–‡ç« \n    post = { ...post, id: 1 };\n    await this.$store.dispatch("updatePost", post);\n    // åˆ é™¤æ–‡ç« \n    await this.$api.posts.delete(post.id);\n    console.log({ message: "æˆåŠŸåˆ é™¤æ–‡ç« ï¼" });\n    // æ‰§è¡Œè‡ªå®šä¹‰æ–¹æ³•\n    await this.$api.albums.uploadImage();\n    // æ‰§è¡Œè‡ªå®šä¹‰æ–¹æ³•\n    await this.$api.albums.triggerError();\n  }\n};\n<\/script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br")])]),a("ul",[a("li",[s._v("store ä¸­")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import Vue from "vue";\nimport Vuex from "vuex";\nimport storePlugins from "@/plugins/storePlugins";\n\nVue.use(Vuex);\n\nconst ADD_USERS = "ADD_USERS";\nconst ADD_POST = "ADD_POST";\nconst UPDATE_POST = "UPDATE_POST";\n\nexport default new Vuex.Store({\n  plugins: [storePlugins],\n  state: {\n    users: [],\n    posts: []\n  },\n  mutations: {\n    [ADD_USERS](state, users) {\n      state.users = users;\n    },\n    [ADD_POST](state, post) {\n      state.posts = [...state.posts, post];\n    },\n    [UPDATE_POST](state, post) {\n      const index = state.posts.findIndex(({ id }) => id === post.id);\n      if (!~index) state.posts.splice(index, 1, post);\n    }\n  },\n  actions: {\n    async fetchUsers({ commit }, config) {\n      const users = await this.$api.users.fetch(config);\n      commit(ADD_USERS, users);\n      console.log({ message: "Vuex ä¸­çš„ç”¨æˆ·æ•°æ®", users });\n    },\n\n    async createPost({ commit }, post) {\n      const id = await this.$api.posts.post(post);\n      commit(ADD_POST, { ...post, id });\n      console.log({ message: "åˆ›å»ºæ–‡ç« ", post: { ...post, id } });\n    },\n\n    async updatePost({ commit }, post) {\n      const id = await this.$api.posts.put(post.id, post);\n      commit(UPDATE_POST, post);\n      console.log({ message: "æ›´æ–°æ–‡ç« ", post: { post, id } });\n    }\n  }\n});\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br")])]),a("h2",{attrs:{id:"ç»“è¯­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[s._v("#")]),s._v(" ç»“è¯­")]),s._v(" "),a("p",[s._v("ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ï¼Ÿ")]),s._v(" "),a("p",[s._v("æœ¬ç“œä»¥ä¸ºï¼šå¦‚æœä½ çš„ä¸šåŠ¡æ˜¯æŒ‰ç…§è¿™ç§ç±»çš„æ–¹å¼æœ‰ä½œåŒºåˆ†ï¼Œé‚£ä¹ˆ API ä¹Ÿåº”è¯¥åŒæ­¥å¦‚æ­¤ã€‚ä¸€æ˜¯æ€è·¯æ¸…æ™°ï¼Œè·Ÿç€ä¸šåŠ¡èµ°ï¼›äºŒæ˜¯æ‰©å±•æ€§å’Œå¤ç”¨æ€§éƒ½æ›´å¥½ï¼›ä¸‰æ˜¯çœ‹èµ·æ¥å°±å¾ˆé«˜çº§......ğŸ˜€ğŸ˜€ğŸ˜€")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("æ™®é€š")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// è·å–æ–‡ç« \nexport const getPost = params => {\n  return axios.get(`/interface/getPost/`)\n}\n\n// æ–°å¢æ–‡ç« \nexport const addPost = params => {\n  return axios.post(`/interface/addPost`, params)\n}\n\n// ä¿®æ”¹æ–‡ç« \nexport const updatePost = params => {\n  return axios.post(`/interface/updatePost/`, params)\n}\n\n......\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("import {getPost,addPost,updatePost} from '@/services/api'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("é«˜çº§")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('class PostsApiService extends ModelApiService {\n  constructor() {\n    super("posts");\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("this.$api.posts.post(param)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æœ¬æ¬¡å°±åˆ°è¿™é‡Œï¼Œæˆ‘æ˜¯æ˜é‡‘å®‰ä¸œå°¼ï¼Œäººä¸ç‹ ï¼Œè¯ä¹Ÿå¤šï¼å…¬ä¼—å·ã€æ˜é‡‘å®‰ä¸œå°¼ã€‘ã€‚")]),s._v(" "),a("p",[s._v("ç‚¹èµå°æ‰‹åŠ¨ä¸€åŠ¨ï¼Œä½ æˆ‘ä¸€èµ·å‘å‰å†²~ å†ä¼š~")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a170199db68c4ccfbfd58c118df079bd~tplv-k3u1fbpfcp-watermark.image",alt:""}})])])}),[],!1,null,null,null);n.default=t.exports}}]);