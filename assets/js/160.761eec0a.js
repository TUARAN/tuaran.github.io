(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{654:function(s,n,e){"use strict";e.r(n);var a=e(2),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("é€šè¯‘è‡ªï¼š"),e("a",{attrs:{href:"https://betterprogramming.pub/6-major-features-of-node-js-19-b98e28b9670c",target:"_blank",rel:"noopener noreferrer"}},[s._v("6 Major Features of Node.js 19. Details of Node.js 19 new featuresâ€¦ | by Jennifer Fu | Oct, 2022 | Better Programming"),e("OutboundLink")],1)]),s._v(" "),e("hr"),s._v(" "),e("p",[s._v("Node 19 åœ¨ 2022-10-18 å‘å¸ƒã€‚")]),s._v(" "),e("p",[s._v("æˆ‘ä»¬çŸ¥é“ Node.js ç‰ˆæœ¬åˆ†ä¸¤ç§ï¼šLTS å’Œ Current")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e1a337f186644768dfdb9da7a5c4503~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),e("p",[s._v("å…¶ä¸­ï¼ŒCurrent ç‰ˆæœ¬é€šå¸¸æ¯ 6 ä¸ªæœˆå‘å¸ƒä¸€æ¬¡ã€‚")]),s._v(" "),e("p",[s._v("æ¯å¹´ 4 æœˆä»½å‘å¸ƒæ–°çš„å¶æ•°ç‰ˆæœ¬ï¼›")]),s._v(" "),e("p",[s._v("æ¯å¹´ 10 æœˆä»½å‘å¸ƒæ–°çš„å¥‡æ•°ç‰ˆæœ¬ï¼›")]),s._v(" "),e("p",[s._v("åœ¨åˆšè¿‡å»çš„ 10 æœˆï¼Œå‘å¸ƒçš„ V19.0.1 æˆä¸ºæœ€æ–°çš„ â€œCurrentâ€ å°é²œç‰ˆï¼Œå®ƒä¸€å…±å¸¦æ¥ 6 å¤§ç‰¹æ€§ã€‚")]),s._v(" "),e("h2",{attrs:{id:"_1-http-s-1-1-keepalive-é»˜è®¤ä¸º-true"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-http-s-1-1-keepalive-é»˜è®¤ä¸º-true"}},[s._v("#")]),s._v(" 1. HTTP(S)/1.1 KeepAlive é»˜è®¤ä¸º true")]),s._v(" "),e("p",[s._v("Node.js v19 è®¾ç½® keepAlive é»˜è®¤å€¼ä¸º trueï¼Œè¿™æ„å‘³ç€æ‰€æœ‰å‡ºç«™çš„ HTTP(s) è¿æ¥éƒ½å°†ä½¿ç”¨ HTTP 1.1Â keepAliveï¼Œé»˜è®¤æ—¶é—´ä¸º 5Sï¼›")]),s._v(" "),e("p",[s._v("ä»£ç æµ‹è¯•ï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const http = require('node:http');\nconsole.log(http.globalAgent);\nconst https = require('node:https');\nconsole.log(https.globalAgent);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("æˆ‘ä»¬å¯ä»¥å¯¹æ¯”çœ‹çœ‹ v16 å’Œ v19 çš„ node server Agent é…ç½®å·®å¼‚ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("V16")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("% nvm use 16\nNow using node v16.0.0 (npm v7.10.0)\n% node server\nAgent {\n  _events: [Object: null prototype] {\n    free: [Function (anonymous)],\n    newListener: [Function: maybeEnableKeylog]\n  },\n  _eventsCount: 2,\n  _maxListeners: undefined,\n  defaultPort: 80,\n  protocol: 'http:',\n  options: [Object: null prototype] { path: null },\n  requests: [Object: null prototype] {},\n  sockets: [Object: null prototype] {},\n  freeSockets: [Object: null prototype] {},\n  keepAliveMsecs: 1000,\n  keepAlive : false,\n  maxSockets: Infinity,\n  maxFreeSockets: 256,\n  scheduling: 'lifo',\n  maxTotalSockets: Infinity,\n  totalSocketCount: 0,\n  [Symbol(kCapture)]: false\n}\nAgent {\n  _events: [Object: null prototype] {\n    free: [Function (anonymous)],\n    newListener: [Function: maybeEnableKeylog]\n  },\n  _eventsCount: 2,\n  _maxListeners: undefined,\n  defaultPort: 443,\n  protocol: 'https:',\n  options: [Object: null prototype] { path: null },\n  requests: [Object: null prototype] {},\n  sockets: [Object: null prototype] {},\n  freeSockets: [Object: null prototype] {},\n  keepAliveMsecs: 1000,\n  keepAlive: false,\n  maxSockets: Infinity,\n  maxFreeSockets: 256,\n  scheduling: 'lifo',\n  maxTotalSockets: Infinity,\n  totalSocketCount: 0,\n  maxCachedSessions: 100,\n  _sessionCache: { map: {}, list: [] },\n  [Symbol(kCapture)]: false\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br")])]),e("p",[s._v("ç¬¬ 18ã€40 è¡Œï¼ŒkeepAlive é»˜è®¤è®¾ç½®ä¸º falseï¼›")]),s._v(" "),e("ul",[e("li",[s._v("V19")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("% nvm use 19\nNow using node v19.0.0 (npm v8.19.2)\n% node server\nAgent {\n  _events: [Object: null prototype] {\n    free: [Function (anonymous)],\n    newListener: [Function: maybeEnableKeylog]\n  },\n  _eventsCount: 2,\n  _maxListeners: undefined,\n  defaultPort: 80,\n  protocol: 'http:',\n  options: [Object: null prototype] {\n    keepAlive: true,\n    scheduling: 'lifo',\n    timeout: 5000,\n    noDelay: true,\n    path: null\n  },\n  requests: [Object: null prototype] {},\n  sockets: [Object: null prototype] {},\n  freeSockets: [Object: null prototype] {},\n  keepAliveMsecs: 1000,\n  keepAlive: true,\n  maxSockets: Infinity,\n  maxFreeSockets: 256,\n  scheduling: 'lifo',\n  maxTotalSockets: Infinity,\n  totalSocketCount: 0,\n  [Symbol(kCapture)]: false\n}\nAgent {\n  _events: [Object: null prototype] {\n    free: [Function (anonymous)],\n    newListener: [Function: maybeEnableKeylog]\n  },\n  _eventsCount: 2,\n  _maxListeners: undefined,\n  defaultPort: 443,\n  protocol: 'https:',\n  options: [Object: null prototype] {\n    keepAlive: true,\n    scheduling: 'lifo',\n    timeout: 5000,\n    noDelay: true,\n    path: null\n  },\n  requests: [Object: null prototype] {},\n  sockets: [Object: null prototype] {},\n  freeSockets: [Object: null prototype] {},\n  keepAliveMsecs: 1000,\n  keepAlive: true,\n  maxSockets: Infinity,\n  maxFreeSockets: 256,\n  scheduling: 'lifo',\n  maxTotalSockets: Infinity,\n  totalSocketCount: 0,\n  maxCachedSessions: 100,\n  _sessionCache: { map: {}, list: [] },\n  [Symbol(kCapture)]: false\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br")])]),e("p",[s._v("ç¬¬ 14ã€16ã€42ã€44 è¡Œè®¾ç½® keepAlive é»˜è®¤å€¼åŠæ—¶é—´ï¼›")]),s._v(" "),e("p",[s._v("å¯ç”¨ keepAlive èƒ½ä½¿è¿æ¥é‡ç”¨ï¼Œæé«˜ç½‘ç»œçš„ååé‡ã€‚")]),s._v(" "),e("p",[s._v("å¦å¤–ï¼ŒæœåŠ¡å™¨å°†åœ¨è°ƒç”¨ "),e("code",[s._v("close()")]),s._v(" è‡ªåŠ¨æ–­å¼€ç©ºé—²çš„å®¢æˆ·ç«¯ï¼Œå†…éƒ¨ä¾é  "),e("code",[s._v("http(s).Server.close")]),s._v(" API å®ç°ï¼›")]),s._v(" "),e("p",[s._v("è¿™äº›ä¿®æ”¹ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†ä½“éªŒå’Œæ€§èƒ½ã€‚")]),s._v(" "),e("h2",{attrs:{id:"_2-ç¨³å®šçš„-webcrypto-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç¨³å®šçš„-webcrypto-api"}},[s._v("#")]),s._v(" 2. ç¨³å®šçš„ WebCrypto API")]),s._v(" "),e("p",[s._v("WebCrypto API æ˜¯ä¸€ä¸ªä½¿ç”¨å¯†ç å­¦æ„å»ºçš„ç³»ç»Ÿæ¥å£ï¼Œåœ¨ node.js v19 è¶‹äºç¨³å®šï¼ˆé™¤ Ed25519ã€Ed448ã€X25519ã€X448 å¤–ï¼‰ã€‚")]),s._v(" "),e("p",[s._v("æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ "),e("code",[s._v("globalThis.crypto")]),s._v(" æˆ– "),e("code",[s._v("require('node:crypto').webcrypto")]),s._v(" æ¥è®¿é—®ï¼Œä¸‹é¢ä»¥ "),e("code",[s._v("subtle")]),s._v(" åŠ å¯†å‡½æ•°ä¸ºä¾‹ï¼›")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\nconst { subtle } = globalThis.crypto;\n\n(async function() {\n\n  const key = await subtle.generateKey({\n    name: 'HMAC',\n    hash: 'SHA-256',\n    length: 256\n  }, true, ['sign', 'verify']);\n\n  console.log('key =', key);\n\n  const enc = new TextEncoder();\n  const message = enc.encode('I love cupcakes');\n\n  console.log('message =', message);\n\n  const digest = await subtle.sign({\n    name: 'HMAC'\n  }, key, message);\n\n  console.log('digest =', digest);\n\n})();\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("p",[s._v("é¦–å…ˆç”Ÿæˆ HMAC å¯†é’¥ï¼Œç”Ÿæˆçš„å¯†é’¥å¯åŒæ—¶ç”¨äºéªŒè¯æ¶ˆæ¯æ•°æ®å®Œæ•´æ€§å’ŒçœŸå®æ€§ï¼›")]),s._v(" "),e("p",[s._v("ç„¶åï¼Œå¯¹å­—ç¬¦ä¸² "),e("code",[s._v("I love cupcakes")]),s._v(" åŠ å¯†ï¼›")]),s._v(" "),e("p",[s._v("æœ€ååˆ›å»º æ¶ˆæ¯æ‘˜è¦ï¼Œå®ƒæ˜¯ä¸€ç§åŠ å¯†æ•£åˆ—å‡½æ•°ï¼›")]),s._v(" "),e("p",[s._v("åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼škey ã€message ã€digest ä¿¡æ¯")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("% node server\nkey = CryptoKey {\n  type: 'secret',\n  extractable: true,\n  algorithm: { name: 'HMAC', length: 256, hash: [Object] },\n  usages: [ 'sign', 'verify' ]\n}\nmessage = Uint8Array(15) [\n   73, 32, 108, 111, 118,\n  101, 32,  99, 117, 112,\n   99, 97, 107, 101, 115\n]\ndigest = ArrayBuffer {\n  [Uint8Contents]: <30 01 7a 5c d9 e2 82 55 6b 55 90 4f 1d de 36 d7 89 dd fb fb 1a 9e a0 cc 5d d8 49 13 38 2f d1 bc>,\n  byteLength: 32\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"_3-è‡ªå®šä¹‰-esm-resolution-è°ƒæ•´"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-è‡ªå®šä¹‰-esm-resolution-è°ƒæ•´"}},[s._v("#")]),s._v(" 3. è‡ªå®šä¹‰ ESM resolution è°ƒæ•´")]),s._v(" "),e("p",[s._v("Node.js å·²ç»åˆ é™¤ "),e("code",[s._v("--experimental-specifier-resolution")]),s._v("ï¼Œå…¶åŠŸèƒ½ç°åœ¨å¯ä»¥é€šè¿‡è‡ªå®šä¹‰åŠ è½½å™¨å®ç°ã€‚")]),s._v(" "),e("p",[s._v("å¯ä»¥åœ¨è¿™ä¸ªåº“ä¸­æµ‹è¯•ï¼š"),e("a",{attrs:{href:"https://github.com/nodejs/loaders-test",target:"_blank",rel:"noopener noreferrer"}},[s._v("nodejs/loaders-test: Examples demonstrating the Node.js ECMAScript Modules Loaders API"),e("OutboundLink")],1)]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git clone https://github.com/nodejs/loaders-test.git\n\n% cd loaders-test/commonjs-extension-resolution-loader\n\n% yarn install\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("æ¯”å¦‚ "),e("code",[s._v("loaders-test/commonjs-extension-resolution-loader/test/basic-fixtures/index.js")]),s._v(" æ–‡ä»¶ï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { version } from 'process';\n\nimport { valueInFile } from './file';\nimport { valueInFolderIndex } from './folder';\n\nconsole.log(valueInFile);\nconsole.log(valueInFolderIndex);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[e("code",[s._v("./file")]),s._v(" å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰åŠ è½½å™¨ï¼Œä¸ä¼šå»æŸ¥æ‰¾æ–‡ä»¶çš„æ‰©å±•åï¼Œæ¯”å¦‚ "),e("code",[s._v("./file.js")]),s._v(" æˆ– "),e("code",[s._v("./file.mjs")])]),s._v(" "),e("p",[s._v("è®¾ç½®è‡ªå®šä¹‰åŠ è½½å™¨åï¼Œåˆ™å¯è§£å†³ä¸Šè¿°é—®é¢˜ï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { isBuiltin } from 'node:module';\nimport { dirname } from 'node:path';\nimport { cwd } from 'node:process';\nimport { fileURLToPath, pathToFileURL } from 'node:url';\nimport { promisify } from 'node:util';\n\nimport resolveCallback from 'resolve/async.js';\n\nconst resolveAsync = promisify(resolveCallback);\n\nconst baseURL = pathToFileURL(cwd() + '/').href;\n\n\nexport async function resolve(specifier, context, next) {\n  const { parentURL = baseURL } = context;\n\n  if (isBuiltin(specifier)) {\n    return next(specifier, context);\n  }\n\n  // `resolveAsync` works with paths, not URLs\n  if (specifier.startsWith('file://')) {\n    specifier = fileURLToPath(specifier);\n  }\n  const parentPath = fileURLToPath(parentURL);\n\n  let url;\n  try {\n    const resolution = await resolveAsync(specifier, {\n      basedir: dirname(parentPath),\n      // For whatever reason, --experimental-specifier-resolution=node doesn't search for .mjs extensions\n      // but it does search for index.mjs files within directories\n      extensions: ['.js', '.json', '.node', '.mjs'],\n    });\n    url = pathToFileURL(resolution).href;\n  } catch (error) {\n    if (error.code === 'MODULE_NOT_FOUND') {\n      // Match Node's error code\n      error.code = 'ERR_MODULE_NOT_FOUND';\n    }\n    throw error;\n  }\n\n  return next(url, context);\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br")])]),e("p",[s._v("æµ‹è¯•å‘½ä»¤ï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("% node --loader=./loader.js test/basic-fixtures/index  \n(node:56149) ExperimentalWarning: Custom ESM Loaders is an experimental feature. This feature could change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nhello from file.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("å°†ä¸ä¼šå†æŠ¥é”™ï¼Œæ­£å¸¸è¿è¡Œã€‚")]),s._v(" "),e("h2",{attrs:{id:"_4-ç§»é™¤å¯¹-dtrace-systemtap-etw-æ”¯æŒ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç§»é™¤å¯¹-dtrace-systemtap-etw-æ”¯æŒ"}},[s._v("#")]),s._v(" 4. ç§»é™¤å¯¹ DTrace/SystemTap/ETW æ”¯æŒ")]),s._v(" "),e("p",[s._v("åœ¨ Node.js v19ä¸­ï¼Œç§»é™¤äº†å¯¹ DTrace/SystemTap/ETW çš„æ”¯æŒï¼Œä¸»è¦æ˜¯å› ä¸ºèµ„æºçš„ä¼˜å…ˆçº§é—®é¢˜ã€‚")]),s._v(" "),e("p",[s._v("æ•°æ®è¡¨æ˜å¾ˆå°‘äººç”¨åˆ° DTraceã€SystemTap æˆ– ETWï¼Œç»´æŠ¤å®ƒä»¬æ²¡æœ‰å¤šå¤§çš„æ„ä¹‰ã€‚")]),s._v(" "),e("p",[s._v("å¦‚æœä½ æƒ³æ¢å¤ä½¿ç”¨ï¼Œå¯æ issues => https://github.com/nodejs/node/issues/44550")]),s._v(" "),e("h2",{attrs:{id:"_5-å‡çº§-v8-å¼•æ“è‡³-10-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-å‡çº§-v8-å¼•æ“è‡³-10-7"}},[s._v("#")]),s._v(" 5. å‡çº§ V8 å¼•æ“è‡³ 10.7")]),s._v(" "),e("p",[s._v("Node.js v19 å°† V8 JavaScript å¼•æ“æ›´æ–°è‡³ V8 10.7ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ–°å‡½æ•° Intl.NumberFormatï¼Œç”¨äºæ ¼å¼åŒ–æ•æ„Ÿæ•°å­—ã€‚")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Intl.NumberFormat(locales, options)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("å¯¹äºä¸åŒçš„è¯­è¨€ï¼Œä¼ å…¥ä¸åŒçš„ localesï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const number = 123456.789;\n\nconsole.log(new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(number));\nconsole.log(new Intl.NumberFormat('ja-JP', { style: 'currency', currency: 'JPY' }).format(number));\nconsole.log(new Intl.NumberFormat('ar-SA', { style: 'currency', currency: 'EGP' }).format(number));\nconsole.log(new Intl.NumberFormat('zh-CN', { style: 'currency', currency: 'CNY' }).format(number));\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"_6-è¯•éªŒ-node-watch-æ¨¡å¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-è¯•éªŒ-node-watch-æ¨¡å¼"}},[s._v("#")]),s._v(" 6. è¯•éªŒ Node watch æ¨¡å¼")]),s._v(" "),e("p",[s._v("è¿è¡Œæ—¶å¢åŠ äº† node --watch é€‰é¡¹ã€‚")]),s._v(" "),e("p",[s._v('åœ¨ "watch" æ¨¡å¼ä¸‹è¿è¡Œï¼Œå½“å¯¼å…¥çš„æ–‡ä»¶è¢«æ”¹å˜æ—¶ï¼Œä¼šé‡æ–°å¯åŠ¨è¿›ç¨‹ã€‚')]),s._v(" "),e("p",[s._v("æ¯”å¦‚ï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('const express = require("express");\nconst path = require("path");\nconst app = express();\napp.use(express.static(path.join(__dirname, "../build")));\n\napp.listen(8080, () =>\n  console.log("Express server is running on localhost:8080")\n);\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("% node --watch server\n(node:67643) ExperimentalWarning: Watch mode is an experimental feature. This feature could change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\nExpress server is running on localhost:8080\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("hr"),s._v(" "),e("p",[s._v("Node.js 14 å°†åœ¨ 2023 å¹´ 4 æœˆç»“æŸæ›´æ–°ç»´æŠ¤ï¼ŒNode.js 16 (LTS) é¢„è®¡å°†åœ¨ 2023 å¹´ 9 æœˆç»“æŸæ›´æ–°ç»´æŠ¤ã€‚")]),s._v(" "),e("p",[s._v("å»ºè®®å¤§å®¶å¼€å§‹è®¡åˆ’å°†ç‰ˆæœ¬æŒ‰éœ€å‡çº§åˆ° Node.js 16ï¼ˆLTSï¼‰æˆ– Node.js 18ï¼ˆLTSï¼‰ã€‚")]),s._v(" "),e("p",[s._v("æ¨èé˜…è¯»ï¼š")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://nodejs.org/en/blog/announcements/v19-release-announce/#node-watch-experimental",target:"_blank",rel:"noopener noreferrer"}},[s._v("Node.js 19 is now available! | Node.js"),e("OutboundLink")],1)])]),s._v(" "),e("hr"),s._v(" "),e("blockquote",[e("p",[s._v("OKï¼Œä»¥ä¸Šä¾¿æ˜¯æœ¬ç¯‡åˆ†äº«ï¼Œå¸Œæœ›å„ä½å·¥å‹å–œæ¬¢~ æ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®º ğŸ¤Ÿ")]),s._v(" "),e("p",[s._v("æˆ‘æ˜¯æ˜é‡‘å®‰ä¸œå°¼ ğŸ¤  100 ä¸‡äººæ°”å‰ç«¯æŠ€æœ¯åšä¸» ğŸ’¥ INFP å†™ä½œäººæ ¼åšæŒ 1000 æ—¥æ›´æ–‡ âœ å…³æ³¨æˆ‘ï¼Œå®‰ä¸œå°¼é™ªä½ ä¸€èµ·åº¦è¿‡æ¼«é•¿ç¼–ç¨‹å²æœˆ ğŸŒ")])]),s._v(" "),e("p",[e("em",[e("strong",[s._v("æœ¬æ–‡æ­£åœ¨å‚åŠ "),e("a",{attrs:{href:"https://juejin.cn/post/7162096952883019783",title:"https://juejin.cn/post/7162096952883019783",target:"_blank",rel:"noopener noreferrer"}},[s._v("ã€Œé‡‘çŸ³è®¡åˆ’ . ç“œåˆ†6ä¸‡ç°é‡‘å¤§å¥–ã€"),e("OutboundLink")],1)])])])])}),[],!1,null,null,null);n.default=t.exports}}]);