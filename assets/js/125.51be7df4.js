(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{621:function(s,e,t){"use strict";t.r(e);var n=t(2),a=Object(n.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"译文启发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#译文启发"}},[s._v("#")]),s._v(" 译文启发")]),s._v(" "),t("p",[s._v("原文："),t("a",{attrs:{href:"https://itnext.io/how-to-structure-my-vue-js-project-e4468db005ac",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to structure my Vue.js project"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("作者："),t("a",{attrs:{href:"https://manuustenko.medium.com/about",target:"_blank",rel:"noopener noreferrer"}},[s._v("Manu Ustenko"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("职位：Sennder GmbH 高级软件工程师")]),s._v(" "),t("p",[s._v("Sennder：欧洲排名第一的全卡车装载数字货运代理平台。")]),s._v(" "),t("blockquote",[t("p",[s._v("Vue 项目的目录不就是 Vue CLI 吗？让本瓜带你来康康作者是否还能变出什么花来？本文取其要，通译之。")])]),s._v(" "),t("p",[s._v("本文首发在我的博客："),t("a",{attrs:{href:"https://tuaran.github.io/views/2021/structureVuejs.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("地址"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"vue-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli"}},[s._v("#")]),s._v(" Vue CLI")]),s._v(" "),t("p",[s._v("认知一个项目从认识目录开始！Vue 项目那逃不过认知最通用的 Vue CLI 目录结构。")]),s._v(" "),t("p",[s._v("如下（已显示全部可选项）：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("--public\n----img\n------icons\n----favicon.ico\n----index.html\n----robots.txt\n--src\n----assets\n------logo.png\n----components\n------HelloWorld.vue\n----router\n------index.ts\n----store\n------index.ts\n----views\n------About.vue\n------Home.vue\n----App.vue\n----main.ts\n----registerServiceWorkers.ts\n----shims-vue.d.ts\n--tests\n----e2e\n----unit\n--.browserslistrc\n--.eslintrc.js\n--.gitignore\n--babel.config.js\n--cypress.json\n--jest.config.js\n--package.json\n--package-lock.json\n--README.md\n--tsconfig.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("p",[s._v("作者这里给了重要的一句结论：")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("Vue CLI 目录是非常标准的 Vue 项目结构，但是它并不适用于中型或大型应用。")])])]),s._v(" "),t("p",[s._v("原因是：我们应该花更多的精力去关注 "),t("code",[s._v("src")]),s._v(" 文件夹！")]),s._v(" "),t("h2",{attrs:{id:"新-src-目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新-src-目录"}},[s._v("#")]),s._v(" 新 src 目录")]),s._v(" "),t("p",[s._v("闲言少叙，改造后的目录结构展示：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("src\n--assets\n--common\n--layouts\n--middlewares\n--modules\n--plugins\n--router\n--services\n--static\n--store\n--views\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("让咱们来一一揭晓为什么要设置这样的目录结构！")]),s._v(" "),t("h3",{attrs:{id:"assets"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#assets"}},[s._v("#")]),s._v(" Assets")]),s._v(" "),t("p",[s._v("静态文件目录：包含字体、图标、图片、样式等静态资源，不做赘述。")]),s._v(" "),t("h3",{attrs:{id:"common"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common"}},[s._v("#")]),s._v(" Common")]),s._v(" "),t("p",[s._v("公共文件夹：通常来说，它又能被拆分成多个子目录："),t("code",[s._v("components")]),s._v("、"),t("code",[s._v("mixins")]),s._v("、"),t("code",[s._v("directives")]),s._v("，又或者是单个的文件："),t("code",[s._v("functions.ts")]),s._v("、"),t("code",[s._v("helpers.ts")]),s._v("、"),t("code",[s._v("constants.ts")]),s._v("、"),t("code",[s._v("config.ts")]),s._v("，亦或者其它。但它们有共同的特点："),t("strong",[s._v("Common 文件夹下的文件都是在多出被引用的。")])]),s._v(" "),t("p",[s._v("举例：在 "),t("code",[s._v("src/common/components")]),s._v(" 文件夹下，你可以设置 "),t("code",[s._v("Button.vue")]),s._v(" 在全局共享的组件；在 "),t("code",[s._v("helpers.ts")]),s._v(" 文件中写公共方法以供多处调用。")]),s._v(" "),t("h3",{attrs:{id:"layouts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#layouts"}},[s._v("#")]),s._v(" Layouts")]),s._v(" "),t("p",[s._v("你可以在 Layouts 文件夹下放整个应用的布局文件。比如 "),t("code",[s._v("AppLayout.vue.")]),s._v("，关于布局的更多问题可以见"),t("a",{attrs:{href:"https://itnext.io/vue-tricks-smart-layouts-for-vuejs-5c61a472b69b",target:"_blank",rel:"noopener noreferrer"}},[s._v("这篇文章-Vue tricks: smart layouts for VueJS"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"middlewares"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#middlewares"}},[s._v("#")]),s._v(" Middlewares")]),s._v(" "),t("p",[s._v("“中间件”这个文件夹有点类似 vue router，你可以在之下放置你的关于路由跳转判断文件。这里有个简单的例子：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export default function checkAuth(next, isAuthenticated) {\n  if (isAuthenticated) {\n    next('/')\n  } else {\n    next('/login');\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("在 vue-router 中这样使用")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import Router from 'vue-router'\nimport checkAuth from '../middlewares/checkAuth.js'\nconst isAuthenticated = true\nconst router = new Router({\n  routes: [],\n  mode: 'history'\n})\nrouter.beforeEach((to, from, next) => {\n  checkAuth(next, isAuthenticated)\n});\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("此例意在做权限校验。更多关于中间件的讨论，在"),t("a",{attrs:{href:"https://itnext.io/vue-tricks-smart-router-for-vuejs-93c287f46b50",target:"_blank",rel:"noopener noreferrer"}},[s._v("这篇文章-Vue tricks: smart router for VueJS"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"modules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules"}},[s._v("#")]),s._v(" Modules")]),s._v(" "),t("p",[t("strong",[s._v("Modules 文件夹是咱们应用的核心！")])]),s._v(" "),t("p",[s._v("此文件夹关于应用的业务逻辑部分，它有以下类：")]),s._v(" "),t("ul",[t("li",[s._v("业务组件 "),t("code",[s._v("components")])]),s._v(" "),t("li",[s._v("测试单元 "),t("code",[t("strong",[s._v("tests")])])]),s._v(" "),t("li",[s._v("数据持久 "),t("code",[s._v("store")])]),s._v(" "),t("li",[s._v("其它本业务相关的文件")])]),s._v(" "),t("p",[s._v("这里有个很棒的例子：订单业务模块")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("src\n--modules\n----orders\n------__tests__\n------components\n--------OrdersList.vue\n--------OrderDetails.vue\n------store\n--------actions.ts\n--------getters.ts\n--------mutations.ts\n--------state.ts\n------helpers.ts\n------types.ts\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("包括：测试文件、组件（订单列表、订单详情）、Vuex 数据、相关文件。")]),s._v(" "),t("p",[t("strong",[s._v("它又像是一个小的 src 目录~")])]),s._v(" "),t("h3",{attrs:{id:"plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[s._v("#")]),s._v(" Plugins")]),s._v(" "),t("p",[s._v("Plugins 文件夹当然是用来放 plugin。在 Vue2 中，我们这样调用")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import MyPlugin from './myPlugin.ts'\nVue.use(MyPlugin, { someOption: true })\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("在 Vue3 中，我们也可以在 main.ts 中调用，更多可见 "),t("a",{attrs:{href:"https://v3.vuejs.org/guide/plugins.html#using-a-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("v3-using-a-plugin"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"services"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#services"}},[s._v("#")]),s._v(" Services")]),s._v(" "),t("p",[s._v("Services 文件夹是放请求库和 API 的地方，也包括对 localStorage 的管理等。")]),s._v(" "),t("p",[s._v("本瓜之前也翻译过这篇文章："),t("a",{attrs:{href:"https://tuaran.github.io/views/2021/vueclassapi.html#%E5%89%8D%E8%A8%80",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue 魔法师 —— 将 API “类化”"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"static"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#static"}},[s._v("#")]),s._v(" Static")]),s._v(" "),t("p",[s._v("通常来说，我们不需要 Static 这个文件夹，但也可以放一些 dummy data （虚拟数据）。")]),s._v(" "),t("h3",{attrs:{id:"router"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#router"}},[s._v("#")]),s._v(" Router")]),s._v(" "),t("p",[s._v("Router 文件夹放置你的路由文件，太过常见、无需赘述。你也可以根据需要只在根目录设置 router.ts。但是更推荐你将路由进行一个划分以便阅读和扩展。"),t("a",{attrs:{href:"https://itnext.io/vue-tricks-smart-router-for-vuejs-93c287f46b50",target:"_blank",rel:"noopener noreferrer"}},[s._v("vue-tricks-smart-router"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"store"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#store"}},[s._v("#")]),s._v(" Store")]),s._v(" "),t("p",[s._v("Store 文件夹放置你的 Vuex 相关文件。在这个目录下主要是一些全局的持久数据及方法：state 、 actions 、 mutations 、 getters，同时也和 "),t("code",[s._v("modules")]),s._v(" 文件夹下的 Vuex 进行关联。")]),s._v(" "),t("h3",{attrs:{id:"views"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#views"}},[s._v("#")]),s._v(" Views")]),s._v(" "),t("p",[s._v("Views 文件夹是我们应用中第二重要的文件夹了。我们都知道它包含的也是业务组件。但其实它更应该是路由的一种映射，比如 "),t("code",[s._v("/home /about /orders")]),s._v(" 这个路由，在 Views 文件夹下就应该有 "),t("code",[s._v("Home.vue")]),s._v("、"),t("code",[s._v(" About.vue ")]),s._v("、"),t("code",[s._v("Orders.vue ")]),s._v("这三个文件！")]),s._v(" "),t("p",[s._v("你一定会问为什么要拆分业务部分为 "),t("code",[s._v("Views")]),s._v(" 和 "),t("code",[s._v("Modules")]),s._v(" 这两个目录，而不是像 Vue CLI 那样放在一起？")]),s._v(" "),t("p",[s._v("有以下优点：")]),s._v(" "),t("ul",[t("li",[s._v("更清晰的目录结构")]),s._v(" "),t("li",[s._v("更快速的了解路由")]),s._v(" "),t("li",[s._v("更直观看到根文件、根页面、以及它们与子组件、子业务是如何关联的。")])]),s._v(" "),t("h2",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),t("p",[s._v("作者从工作中针对 Vue 项目目录结构进行思考，然后给出建议，并不是要求咱完全套用，咱可汲取其思想，按需所用。")]),s._v(" "),t("p",[s._v("本瓜以为：在实际的项目中，Vue CLI 项目确实会造成 Views 目录的庞大，所以将 Views 改造，分为 "),t("code",[s._v("Views")]),s._v(" 和 "),t("code",[s._v("Modules")]),s._v(" 目录，前者是核心的页面（参照路由），后者是具体的子业务及相关。这样的建议确实是不错的思路~")]),s._v(" "),t("p",[s._v("其实，又回到了那个问题：如果咱足够了解业务，需求没有频繁的改动，目录结构应该会是清晰的。但是没办法，再好的产品也避免不了来回改动。所以只能定期梳理、定期优化了。认知目录的过程也是对业务熟悉的过程。")]),s._v(" "),t("p",[s._v("以上！")]),s._v(" "),t("p",[s._v("撰文不易，点赞鼓励。讨论留言，携手向前。"),t("em",[s._v("★,°")]),s._v(":.☆(￣▽￣)/$:"),t("em",[s._v(".°★")]),s._v(" 。")]),s._v(" "),t("p",[s._v("求一波关注，我的公众号：【掘金安东尼】，牛年持续更新~")])])}),[],!1,null,null,null);e.default=a.exports}}]);