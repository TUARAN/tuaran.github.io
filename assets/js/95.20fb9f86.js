(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{593:function(e,t,s){"use strict";s.r(t);var a=s(2),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"å­—èŠ‚ç ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å­—èŠ‚ç ç¼“å­˜"}},[e._v("#")]),e._v(" å­—èŠ‚ç ç¼“å­˜")]),e._v(" "),s("p",[s("strong",[e._v("ä»€ä¹ˆæ˜¯å­—èŠ‚ç ç¼“å­˜ï¼Ÿ")])]),e._v(" "),s("p",[s("strong",[s("code",[e._v("å­—èŠ‚ç ç¼“å­˜ï¼ˆBytecode Cacheï¼‰")]),e._v("ï¼Œæ˜¯æµè§ˆå™¨æ€§èƒ½ä¼˜åŒ–æœºåˆ¶ä¸­é‡è¦çš„ä¸€é¡¹ï¼Œé€šè¿‡ç¼“å­˜ è§£æï¼ˆpasingï¼‰+ç¼–è¯‘ï¼ˆcompilationï¼‰çš„ç»“æœï¼Œå‡å°‘ç½‘ç«™çš„å¯åŠ¨æ—¶é—´")]),e._v("ï¼›å½“å‰å¸‚é¢ä¸Šä¸»æµçš„æµè§ˆå™¨éƒ½å®ç°äº†å­—èŠ‚ç ç¼“å­˜åŠŸèƒ½ï¼›")]),e._v(" "),s("p",[e._v("ä»¥ Chrome ä¸ºä¾‹ï¼ŒV8 æ—©æœŸé‡‡ç”¨äº†ç›´æ¥ç”ŸæˆäºŒè¿›åˆ¶æœºå™¨ç çš„æ–¹å¼ï¼Œå³ï¼š")]),e._v(" "),s("blockquote",[s("p",[s("strong",[e._v("js æºä»£ç  => AST æŠ½è±¡è¯­æ³•æ ‘ => äºŒè¿›åˆ¶æ–‡ä»¶")])])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/13dc7791bb5c4ce09ab20de2eb7e4083~tplv-k3u1fbpfcp-zoom-1.image",alt:"image.png"}})]),e._v(" "),s("p",[e._v("è™½ç„¶å½“æ—¶ä¹Ÿé‡‡ç”¨äº†äºŒè¿›åˆ¶ä»£ç ç¼“å­˜ï¼ˆç¼“å­˜åˆ°å†…å­˜å’Œç¡¬ç›˜ä¸Šï¼‰æ¥çœå»é‡å¤ç¼–è¯‘æ—¶é—´ï¼›")]),e._v(" "),s("p",[e._v("ä½†æ˜¯ï¼ŒäºŒè¿›åˆ¶ä»£ç çš„é—®é¢˜åœ¨äºï¼š1. å†…å­˜å ç”¨å¤§ï¼›2. ä»£ç å¤æ‚åº¦é«˜ï¼›3. æƒ°æ€§ç¼–è¯‘åªç¼“å­˜æœ€å¤–å±‚ä»£ç ï¼›")]),e._v(" "),s("p",[e._v("äºæ˜¯ä¹ï¼Œåæ¥ V8 ä¹Ÿå¼•è¿›äº†å­—èŠ‚ç æ¶æ„ï¼š")]),e._v(" "),s("blockquote",[s("p",[s("strong",[e._v("js æºä»£ç  => AST æŠ½è±¡è¯­æ³•æ ‘ => å­—èŠ‚ç  => äºŒè¿›åˆ¶æ–‡ä»¶")])])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4e693453365d4648b6d226fd179aeb04~tplv-k3u1fbpfcp-zoom-1.image",alt:"image.png"}})]),e._v(" "),s("p",[e._v("å¼•å…¥å­—èŠ‚ç çš„ä¼˜åŠ¿åœ¨äºï¼š1. å†…å­˜å ç”¨å°ï¼›2. ç¼–è¯‘å¿«ã€å¯åŠ¨å¿«ï¼›3. é™ä½ä»£ç å¤æ‚åº¦ï¼›")]),e._v(" "),s("p",[e._v("é™¤äº† Googleï¼ŒåŒè¡Œ Mozilla ä¹Ÿåº”ç”¨äº†å­—èŠ‚ç ç¼“å­˜æœºåˆ¶ï¼› æ›´å¤šè§å®˜ç½‘ blog ä»‹ç»ï¼š "),s("a",{attrs:{href:"https://blog.mozilla.org/javascript/2017/12/12/javascript-startup-bytecode-cache/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ã€ŠMozilla - JavaScript å¯åŠ¨å­—èŠ‚ç ç¼“å­˜ã€‹"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/744edef2e9e647e7ad6fc24f6c024c13~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ae8c963e95e40e8bbb030301e437621~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),s("p",[e._v("å¹¶ä¸”è¿˜å¯¹æ¯”äº†æ˜¯å¦å¯ç”¨ JSBCï¼ˆThe JavaScript Startup Bytecode Cacheï¼‰åœ¨ä¸»æµç½‘ç«™çš„æ€§èƒ½è¡¨ç°ç»Ÿè®¡ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2829e88d3ed2456ca724bd80b94a2458~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),s("h2",{attrs:{id:"ä¸¤çº§ç¼“å­˜ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¤çº§ç¼“å­˜ç­–ç•¥"}},[e._v("#")]),e._v(" ä¸¤çº§ç¼“å­˜ç­–ç•¥")]),e._v(" "),s("p",[s("strong",[e._v("æ­£ç‰‡å¼€å¯ â€”â€” ä¸¤çº§ç¼“å­˜ç­–ç•¥ï¼")])]),e._v(" "),s("p",[e._v("å®é™…ä¸Šï¼Œå¯¹äº V8 ç¼–è¯‘åçš„å­—èŠ‚ç ï¼ŒChrome æœ‰ä¸¤çº§ç¼“å­˜ç­–ç•¥ï¼š")]),e._v(" "),s("blockquote",[s("ol",[s("li",[e._v("Isolate å†…å­˜ç¼“å­˜ï¼›")]),e._v(" "),s("li",[e._v("å®Œæ•´åºåˆ—åŒ–çš„ç¡¬ç›˜ç¼“å­˜ï¼›")])])]),e._v(" "),s("p",[s("strong",[e._v("1. Isolate å†…å­˜ç¼“å­˜ï¼š")])]),e._v(" "),s("p",[e._v("Isolate ç¼“å­˜å‘ç”Ÿåœ¨åŒä¸€è¿›ç¨‹ä¸­ï¼ˆåŒä¸€é¡µé¢ä¸­ï¼‰ï¼Œå®ƒè¯•å›¾å°½å¯èƒ½å¿«è€Œå°åœ°ä½¿ç”¨å·²ç»å¯ç”¨çš„æ•°æ®ï¼›")]),e._v(" "),s("p",[e._v("å®ƒçš„åŠ£åŠ¿åœ¨äºï¼ša. å‘½ä¸­ç‡åä½ï¼ˆ80%ï¼‰ï¼›b. ä¸èƒ½è·¨è¿›ç¨‹ï¼›")]),e._v(" "),s("p",[e._v("å½“ V8 ç¼–è¯‘è„šæœ¬æ—¶ï¼Œç¼–è¯‘åçš„è„šæœ¬ä»¥æºç ä¸ºé”®è¢«å­˜å‚¨åœ¨ä¸€ä¸ª hashtable ä¸­ï¼ˆåœ¨ V8 çš„å †ä¸­ï¼‰ï¼Œå½“ Chrome è¦æ±‚ V8 ç¼–è¯‘å…¶ä»–è„šæœ¬çš„æ—¶å€™ï¼ŒV8 é¦–å…ˆæ£€æŸ¥è„šæœ¬çš„æºç æ˜¯å¦èƒ½åŒ¹é… hashtable ä¸­çš„å€¼ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›å·²ç»å­˜åœ¨çš„å­—èŠ‚ç ã€‚")]),e._v(" "),s("p",[s("strong",[e._v("2. å®Œæ•´åºåˆ—åŒ–çš„ç¡¬ç›˜ç¼“å­˜ï¼š")])]),e._v(" "),s("p",[e._v("ç¡¬ç›˜ç¼“å­˜æ˜¯ç”± Chrome ç®¡ç†ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯ç”± Blink ï¼‰ï¼Œå®ƒå¡«å……äº†Â IsolateÂ ç¼“å­˜ä¸èƒ½åœ¨å¤šä¸ªè¿›ç¨‹æˆ–å¤šä¸ª Chrome ä¼šè¯é—´å…±äº«ä»£ç ç¼“å­˜çš„ç©ºç™½ã€‚")]),e._v(" "),s("p",[e._v("å®ƒåˆ©ç”¨ç°æœ‰çš„ HTTP èµ„æºç¼“å­˜ï¼Œç®¡ç†ä» Web æ¥æ”¶çš„ç¼“å­˜å’Œè¿‡æœŸæ•°æ®ï¼Œå…·ä½“è¿‡ç¨‹æ˜¯ï¼š")]),e._v(" "),s("p",[s("strong",[e._v("â‘ ")]),e._v("  å½“é¦–æ¬¡è¯·æ±‚ä¸€ä¸ª JS æ–‡ä»¶ï¼ˆå³ "),s("strong",[e._v("cold run")]),e._v("ï¼‰æ—¶ï¼ŒChrome ä¼šä¸‹è½½å®ƒå¹¶å°†å…¶äº¤ç»™ V8 è¿›è¡Œç¼–è¯‘ã€‚å®ƒè¿˜å°†æ–‡ä»¶å­˜å‚¨åœ¨æµè§ˆå™¨çš„ç£ç›˜ç¼“å­˜ä¸­ã€‚")]),e._v(" "),s("p",[s("strong",[e._v("â‘¡")]),e._v("  å½“ç¬¬äºŒæ¬¡è¯·æ±‚ JS æ–‡ä»¶ï¼ˆå³ "),s("strong",[e._v("warm run")]),e._v("ï¼‰æ—¶ï¼ŒChrome ä¼šä»æµè§ˆå™¨ç¼“å­˜ä¸­è·å–è¯¥æ–‡ä»¶ï¼Œå¹¶å†æ¬¡å°†å…¶æä¾›ç»™ V8 è¿›è¡Œç¼–è¯‘ã€‚ç„¶è€Œï¼Œè¿™ä¸€æ¬¡ç¼–è¯‘çš„ä»£ç è¢«åºåˆ—åŒ–ï¼Œå¹¶ä½œä¸ºå…ƒæ•°æ®é™„åŠ åˆ°ç¼“å­˜çš„è„šæœ¬æ–‡ä»¶ä¸­ã€‚")]),e._v(" "),s("p",[s("strong",[e._v("â‘¢")]),e._v("  ç¬¬ä¸‰æ¬¡ï¼ˆå³ "),s("strong",[e._v("hot run")]),e._v("ï¼‰ï¼ŒChrome ä»ç¼“å­˜ä¸­è·å–æ–‡ä»¶å’Œæ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œå¹¶å°†ä¸¤è€…äº¤ç»™ V8ã€‚V8 ååºåˆ—åŒ–å…ƒæ•°æ®å¹¶ä¸”å¯ä»¥è·³è¿‡ç¼–è¯‘ã€‚")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fbfdee4ae948405983fe426233e489f8~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),s("p",[s("sub",[e._v("åœ¨ "),s("strong",[e._v("warm run")]),e._v(" æ—¶ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼Œåœ¨ "),s("strong",[e._v("hot run")]),e._v(" æ—¶ä½¿ç”¨ç£ç›˜ç¼“å­˜ï¼›")])]),e._v(" "),s("h2",{attrs:{id:"å†çœ‹-http-ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†çœ‹-http-ç¼“å­˜"}},[e._v("#")]),e._v(" å†çœ‹ HTTP ç¼“å­˜")]),e._v(" "),s("p",[s("strong",[e._v("çŸ¥å·±çŸ¥å½¼ã€ç™¾æˆ˜ä¸æ®†ï¼")])]),e._v(" "),s("p",[e._v("æ ¹æ®å¯¹ã€å­—èŠ‚ç ç¼“å­˜ã€‘ä»¥åŠ ã€ä¸¤çº§ç¼“å­˜ç­–ç•¥ã€‘çš„è®¤çŸ¥ï¼Œæˆ‘ä»¬å°†æœ‰æ›´æ¸…æ™°çš„æ€è·¯æ¥åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æœºåˆ¶æå‡ç½‘ç«™çš„åŠ è½½æ€§èƒ½ï¼")]),e._v(" "),s("p",[e._v("è¿˜è®°å¾—å¼ºç¼“å­˜ã€åå•†ç¼“å­˜ä¸­çš„è¿™å¼ å›¾å—ï¼Ÿ")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d443e19d345b4324a35a2d233e0294cb~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),e._v(" "),s("p",[e._v("å½“æœåŠ¡å™¨è¿”å› "),s("code",[e._v("304 Not Modified")]),e._v(" æ—¶ï¼Œæˆ‘ä»¬çš„å­—èŠ‚ç ç¼“å­˜ä¿æŒç€ "),s("strong",[e._v("warm runï¼ˆæš–è¿è¡Œï¼‰")]),e._v(" æˆ– "),s("strong",[e._v("hot runï¼ˆçƒ­è¿è¡Œï¼‰")]),e._v("ï¼›å½“è¿”å›ä¸º Â "),s("code",[e._v("200 OK")]),e._v(" æ—¶ï¼Œæ›´æ–°ç¼“å­˜èµ„æºï¼Œ"),s("strong",[e._v("å¹¶ä¸”æ¸…é™¤å­—èŠ‚ç ç¼“å­˜ï¼Œæ¢å¤åˆ° cold runï¼ˆå†·è¿è¡Œï¼‰çŠ¶æ€ï¼›")]),e._v("ï¼ˆå“‡ï¼HTTP ç¼“å­˜æ–‡ä»¶å†è¿›ä¸€æ­¥çš„ç†è§£ï¼ä»ã€æ–‡ä»¶ç¼“å­˜ã€‘åˆ°ã€æ–‡ä»¶ç¼–è¯‘åçš„å­—èŠ‚ç ç¼“å­˜ã€‘çš„ç†è§£~ï¼‰")]),e._v(" "),s("p",[e._v("æ‰€ä»¥ï¼Œ"),s("strong",[e._v("å‡å°‘ä»£ç å˜æ›´")]),e._v("ï¼Œä»ç„¶æ˜¯åˆ©ç”¨ç¼“å­˜æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„ä¸€æ¡å‡†åˆ™ï¼›")]),e._v(" "),s("p",[e._v("å½“ç„¶ï¼Œä¸ä¹‹åŒä¸ºä¸€ä¸ªé“ç†çš„æ˜¯ï¼š"),s("strong",[e._v("ä¸éšæ„ä¿®æ”¹èµ„æºçš„ URL")]),e._v("ï¼Œå› ä¸ºå­—èŠ‚ç ç¼“å­˜ä¸è„šæœ¬çš„ URL å…³è”ï¼Œä¿®æ”¹ URLï¼Œä¼šåœ¨æµè§ˆå™¨çš„ç¼“å­˜èµ„æºä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºå…¥å£ï¼Œå¹¶ä¼´éšç€ä¸€ä¸ªå†·ç¼“å­˜å…¥å£ï¼›")]),e._v(" "),s("p",[e._v("è¿˜æœ‰ 1 ä¸ªç»†èŠ‚å°±æ˜¯ï¼Œæˆ‘ä»¬åš A/B æµ‹è¯•æ—¶ï¼Œä¹Ÿå¯èƒ½å‡ºç°ç¼“å­˜ä¸åŒçš„èµ„æºï¼Œæ‰€ä»¥ "),s("strong",[e._v("ä¿è¯è¿è¡Œçš„ç¡®å®šæ€§")]),e._v("ï¼Œä¹Ÿæ˜¯ä¿è¯èƒ½èµ°å¯¹åº”çš„ç¼“å­˜çš„å‰æï¼š")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("if (Math.random() > 0.5) {\n  A();\n} else {\n  B();\n}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[e._v("è¿˜æœ‰ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„ HTTP ç¼“å­˜ç­–ç•¥ï¼š"),s("strong",[e._v("å°†ç¨³å®šçš„ç¬¬ä¸‰æ–¹åº“åˆ†ç¦»æˆç‹¬ç«‹æ–‡ä»¶")]),e._v("ï¼›")]),e._v(" "),s("p",[e._v("é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ä¸å»ºè®®å°†æ‰€æœ‰ JS è„šæœ¬åˆå¹¶åˆ°ä¸€ä¸ªå¤§çš„ bundle ä¸­ï¼Œå°†å…¶åˆ†æˆå¤šä¸ªè¾ƒå°è„šæœ¬å¾€å¾€æ›´æœ‰åˆ©äºé™¤äº†å­—èŠ‚ç ç¼“å­˜ä¹‹å¤–çš„å…¶ä»–åŸå› ï¼ˆå¦‚ï¼šå¤šä¸ªç½‘ç»œè¯·æ±‚ã€æµç¼–è¯‘ã€é¡µé¢äº¤äº’ç­‰ï¼‰ã€‚")]),e._v(" "),s("p",[e._v("æ³¨ï¼šå­—èŠ‚ç ç¼“å­˜çš„æœ€å°æ–‡ä»¶å¤§å°é™åˆ¶æ˜¯ 1 Kbï¼Œæ–‡ä»¶å¤ªå°ä¹Ÿä¸è¡Œï¼›")]),e._v(" "),s("h2",{attrs:{id:"å¼ºåˆ¶ç¼–è¯‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼ºåˆ¶ç¼–è¯‘"}},[e._v("#")]),e._v(" å¼ºåˆ¶ç¼–è¯‘")]),e._v(" "),s("p",[s("strong",[e._v("ä¸è¿‡ï¼Œè¿™é‡Œä»”ç»†æƒ³ä¸€æƒ³ï¼š")])]),e._v(" "),s("p",[e._v("åªæœ‰åœ¨ä»£ç æ‰§è¡Œå®Œæˆæ—¶ç¼–è¯‘äº†çš„ä»£ç æ‰ä¼šè¢«åŠ å…¥åˆ°å­—èŠ‚ç ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆæœ‰è®¸å¤šç±»å‹çš„å‡½æ•°å°½ç®¡ä¼šç¨åæ‰§è¡Œï¼Œä½†ä¹Ÿä¸ä¼šè¢«ç¼“å­˜ã€‚å¦‚ï¼šäº‹ä»¶å¤„ç†ç¨‹åºï¼ˆç”šè‡³æ˜¯ onloadï¼‰ã€promise é“¾ã€æœªä½¿ç”¨çš„åº“å‡½æ•°å’Œå…¶ä»–ä¸€äº›å»¶è¿Ÿç¼–è¯‘è€Œæ²¡æœ‰åœ¨æ‰§è¡Œåˆ°Â "),s("code",[e._v("<\/script>")]),e._v("Â ä¹‹å‰è¢«è°ƒç”¨çš„ï¼Œéƒ½ä¼šä¿æŒå»¶è¿Ÿè€Œä¸ä¼šè¢«æ‰§è¡Œï¼Œå®ƒä»¬æ˜¯ä¸ä¼šä½œä¸ºå­—èŠ‚ç è¢«ç¼“å­˜ï¼›")]),e._v(" "),s("p",[e._v("æ€ä¹ˆåŠï¼Ÿ")]),e._v(" "),s("p",[e._v("å™¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ "),s("strong",[e._v("ç«‹å³æ‰§è¡Œå‡½æ•°")]),e._v("ï¼ˆIIFEï¼‰æ¥å¼ºåˆ¶ç¼–è¯‘å®ƒä»¬ï¼")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("(function foo() {\n  // â€¦\n})();\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("å› ä¸º IIFE è¡¨è¾¾å¼ä¼šè¢«ç«‹å³è°ƒç”¨ï¼Œå¤§å¤šæ•° JavaScript å¼•æ“ä¼šå°è¯•æ¢æµ‹å®ƒä»¬å¹¶ç«‹å³ç¼–è¯‘ï¼Œç„¶åè¿›è¡Œå®Œå…¨ç¼–è¯‘ï¼›")]),e._v(" "),s("p",[e._v("ç”±äºæ¢æµ‹æ‰‹æ®µä¸åŒï¼Œç°åœ¨ï¼Œå³ä½¿å‡½æ•°å®é™…ä¸æ˜¯ç«‹å³æ‰§è¡Œä¹Ÿä¼šè¢«ç¼–è¯‘ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const foo = function() {\n  // Lazily skipped\n};\nconst bar = (function() {\n  // Eagerly compiled\n});\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("p",[e._v("ï¼ˆç§’å•Šï¼‰")]),e._v(" "),s("h2",{attrs:{id:"service-worker-ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-worker-ç¼“å­˜"}},[e._v("#")]),e._v(" service worker ç¼“å­˜")]),e._v(" "),s("p",[s("strong",[e._v("service worker")]),e._v(" ä¸­ä¹Ÿæœ‰å­—èŠ‚ç ç¼“å­˜æœºåˆ¶ï¼›")]),e._v(" "),s("p",[e._v("æˆ‘ä»¬çŸ¥é“ service worker å¯ä»¥è®©ä½ æ„å»ºæœ¬åœ°èµ„æºç¼“å­˜ï¼Œå½“ä½ å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šä»æœ¬åœ°ç¼“å­˜æä¾›èµ„æºã€‚å¦‚æœä½ æƒ³æ„å»ºç¦»çº¿åº”ç”¨ï¼Œè¿™ç‚¹ç‰¹åˆ«æœ‰ç”¨ï¼Œä¾‹å¦‚ï¼šPWA åº”ç”¨ã€‚")]),e._v(" "),s("p",[e._v("ä»£ç ç¤ºä¾‹ï¼š")]),e._v(" "),s("ul",[s("li",[e._v("service worker ä¸ºå®‰è£…ï¼ˆåˆ›å»ºèµ„æºï¼‰å’Œè·å–ï¼ˆä»æ½œåœ¨çš„ç¼“å­˜æä¾›èµ„æºï¼‰äº‹ä»¶æ·»åŠ å¤„ç†ç¨‹åºã€‚")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// sw.js\nself.addEventListener('install', (event) => {\n  async function buildCache() {\n    const cache = await caches.open(cacheName);\n    return cache.addAll([\n      '/main.css',\n      '/main.mjs',\n      '/offline.html',\n    ]);\n  }\n  event.waitUntil(buildCache());\n});\n\nself.addEventListener('fetch', (event) => {\n  async function cachedFetch(event) {\n    const cache = await caches.open(cacheName);\n    let response = await cache.match(event.request);\n    if (response) return response;\n    response = await fetch(event.request);\n    cache.put(event.request, response.clone());\n    return response;\n  }\n  event.respondWith(cachedFetch(event));\n});\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br")])]),s("p",[e._v("è¿™äº›ç¼“å­˜åŒ…æ‹¬ JS èµ„æºç¼“å­˜ã€‚ä½† service worker çš„ç¼“å­˜ä¸»è¦ç”¨äº PWAï¼Œæ‰€ä»¥å®ƒä¸ Chrome çš„â€œè‡ªåŠ¨â€ç¼“å­˜çš„æœºåˆ¶ç•¥å¾®ä¸åŒï¼›")]),e._v(" "),s("p",[e._v("service worker ä¸­ï¼Œå½“ JS èµ„æºè¢«æ·»åŠ åˆ°ç¼“å­˜çš„æ—¶å€™ï¼Œå®ƒä»¬ç«‹å³åˆ›å»ºå­—èŠ‚ç ç¼“å­˜ï¼Œè¿™æ„å‘³ç€"),s("strong",[e._v("åœ¨ç¬¬äºŒæ¬¡åŠ è½½çš„æ—¶å€™å­—èŠ‚ç ç¼“å­˜æ˜¯å¯ç”¨çš„")]),e._v("ï¼ˆè€Œä¸æ˜¯åƒå‰æ–‡æ‰€è®²çš„ä¸¤çº§ç¼“å­˜ä¸€æ ·ä»…åœ¨ç¬¬ä¸‰æ¬¡åŠ è½½çš„æ—¶å¯ç”¨ï¼‰ï¼›")]),e._v(" "),s("p",[e._v("å…¶æ¬¡ï¼Œservice worker ä¸ºè¿™äº›è„šæœ¬ç”Ÿæˆäº† "),s("strong",[e._v("â€œå…¨é‡â€å­—èŠ‚ç ç¼“å­˜")]),e._v("ï¼Œä¸å­˜åœ¨æœ‰å»¶è¿Ÿç¼–è¯‘ï¼Œè€Œæ˜¯å…¨éƒ¨ç¼–è¯‘å¥½æ”¾åˆ°ç¼“å­˜ä¸­ã€‚è¿™å…·æœ‰å¿«é€Ÿä¸”å¯é¢„æµ‹çš„æ€§èƒ½çš„ä¼˜ç‚¹ï¼Œæ²¡æœ‰æ‰§è¡Œé¡ºåºä¾èµ–æ€§ï¼Œä½†æ˜¯è¿™ä»¥å¢åŠ çš„å†…å­˜ä½¿ç”¨ä¸ºä»£ä»·ï¼›")]),e._v(" "),s("p",[e._v("è¯·æ³¨æ„ï¼Œæ­¤ç­–ç•¥ä»…é€‚ç”¨äº service worker ç¼“å­˜ï¼Œè€Œä¸é€‚ç”¨äºÂ CacheÂ API çš„å…¶ä»–ç”¨é€”ã€‚å®é™…ä¸Šï¼Œç°åœ¨çš„Â CacheÂ API ä¸ä¼šæ‰§è¡Œå­—èŠ‚ç ç¼“å­˜ã€‚")]),e._v(" "),s("h2",{attrs:{id:"é˜¶æ®µå°ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é˜¶æ®µå°ç»“"}},[e._v("#")]),e._v(" é˜¶æ®µå°ç»“")]),e._v(" "),s("p",[e._v("ä»¥ä¸Šï¼Œæœ¬æ–‡å…ˆè®²äº†"),s("strong",[e._v("ä»€ä¹ˆæ˜¯å­—èŠ‚ç ")]),e._v("ï¼Œç„¶åè®²äº†"),s("strong",[e._v("å­—èŠ‚ç çš„ä¸¤çº§ç¼“å­˜ç­–ç•¥")]),e._v("ï¼Œå†è®²äº†"),s("strong",[e._v("ä»å­—èŠ‚ç çš„ç¼“å­˜æœºåˆ¶ä¸­çœ‹ HTTP ç¼“å­˜")]),e._v("ï¼Œç»™åˆ°å¯¹åº”çš„å»ºè®®åŠä¸åŒè§’åº¦çš„ç†è§£ï¼ˆæ ¸å¿ƒï¼‰ï¼›å†è®²äº†ä¸€ä¸ªç»†èŠ‚ï¼š"),s("strong",[e._v("å¼ºåˆ¶ç¼–è¯‘")]),e._v("ï¼›æœ€åè®²äº†åœ¨ "),s("strong",[e._v("service worker ç¼“å­˜")]),e._v("ä¸­ï¼Œå­—èŠ‚ç ç¼“å­˜çš„å·®å¼‚ï¼›")]),e._v(" "),s("p",[e._v("å¯¹äºä¸€éƒ¨åˆ†å¼€å‘äººå‘˜æ¥è®²ï¼Œç¼“å­˜å•¥çš„ï¼Œèƒ½ç”¨å°±è¡Œï¼Œæ€§èƒ½å•¥çš„ï¼Œloading å°±è¡Œï¼›ä½†æ˜¯è®¤çœŸå»äº†è§£æµè§ˆå™¨çš„å†…éƒ¨ä¸€äº›æœºåˆ¶åï¼Œä¼šå‘ç°ï¼šæˆ‘ä»¬ä¹‹æ‰€ä»¥ç«™çš„è¿™ä¹ˆé«˜ï¼Œæ˜¯å› ä¸ºè¸©åœ¨äº†å·¨äººçš„è‚©è†€ä¸Šï¼")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47ef374a9e33436e93da4b23151fe5e3~tplv-k3u1fbpfcp-watermark.image?",alt:"06b9e718.gif"}})]),e._v(" "),s("p",[e._v("okï¼Œæ‰“å®Œæ”¶å·¥ï¼è¿™ä¸€æ³¢ï¼Œå¤Ÿç»†èŠ‚ï¼ï¼")]),e._v(" "),s("blockquote",[s("p",[e._v("æ’°æ–‡ä¸æ˜“ï¼Œç‚¹èµé¼“åŠ± ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘")]),e._v(" "),s("p",[e._v("æˆ‘æ˜¯æ˜é‡‘å®‰ä¸œå°¼ï¼Œå…¬ä¼—å·åŒåï¼Œè¾“å‡ºæš´éœ²è¾“å…¥ï¼ŒæŠ€æœ¯æ´è§ç”Ÿæ´»ï¼Œå†ä¼š~")])]),e._v(" "),s("h2",{attrs:{id:"å‚è€ƒæ–‡çŒ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒæ–‡çŒ®"}},[e._v("#")]),e._v(" å‚è€ƒæ–‡çŒ®")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.mozilla.org/javascript/2017/12/12/javascript-startup-bytecode-cache/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JavaScript Startup Bytecode Cache"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://v8.dev/blog/code-caching-for-devs",target:"_blank",rel:"noopener noreferrer"}},[e._v("Code caching for JavaScript developers"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://bugs.webkit.org/show_bug.cgi?id=192782",target:"_blank",rel:"noopener noreferrer"}},[e._v("BugÂ 19278 -Â JSC Cache bytecode to disk"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6844904152745639949",target:"_blank",rel:"noopener noreferrer"}},[e._v("V8 å¼•æ“è¯¦è§£"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);